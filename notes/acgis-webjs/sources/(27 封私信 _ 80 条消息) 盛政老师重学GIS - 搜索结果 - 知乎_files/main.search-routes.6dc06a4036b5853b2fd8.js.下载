(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{1017:function(e,t,n){"use strict";e.exports=n(1018)},1018:function(e,t,n){"use strict";
/** @license React v16.13.1
 * create-subscription.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(2);t.createSubscription=function(e){var t=e.getCurrentValue,n=e.subscribe;return function(e){function r(){for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return(n=e.call.apply(e,[this].concat(r))||this).state={source:n.props.source,value:null!=n.props.source?t(n.props.source):void 0},n._hasUnmounted=!1,n._unsubscribe=null,n}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(r,e),r.getDerivedStateFromProps=function(e,n){return e.source!==n.source?{source:e.source,value:null!=e.source?t(e.source):void 0}:null};var a=r.prototype;return a.componentDidMount=function(){this.subscribe()},a.componentDidUpdate=function(e,t){this.state.source!==t.source&&(this.unsubscribe(),this.subscribe())},a.componentWillUnmount=function(){this.unsubscribe(),this._hasUnmounted=!0},a.render=function(){return this.props.children(this.state.value)},a.subscribe=function(){var e=this,r=this.state.source;if(null!=r){var a=n(r,(function(t){e._hasUnmounted||e.setState((function(e){return t===e.value||r!==e.source?null:{value:t}}))}));if("function"!=typeof a)throw Error(function(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}(266));this._unsubscribe=a,(a=t(this.props.source))!==this.state.value&&this.setState({value:a})}},a.unsubscribe=function(){"function"==typeof this._unsubscribe&&this._unsubscribe(),this._unsubscribe=null},r}(r.Component)}},1029:function(e,t,n){"use strict";var r=n(31),a=n(1),c=n(2),o=n(10),i=n.n(o),l=n(304),s=n.n(l),u=n(373),d=n.n(u),f=n(49),p=Object(f.isBrowser)()?c.useLayoutEffect:function(){};t.a=function(e){var t=e.onKeyDown,n=void 0===t?s.a:t,o=e.onChange,l=e.value,u=e.large,f=e.className,h=e.autoHeight,b=Object(r.a)(e,["onKeyDown","onChange","value","large","className","autoHeight"]),m=Object(c.useRef)();p((function(){if(!h){var e=u?100:0,t=m.current;t.style.height="1px",t.style.height="".concat(d()(t.scrollHeight,e,230),"px")}}),[l,u,h]);var v=Object(c.useCallback)((function(e){u||"Enter"!==e.key||e.preventDefault(),n(e)}),[u,n]),g=Object(c.useCallback)((function(e){h&&function(){var e=m.current;if(e){e.style.height="1px";var t=Math.max(e.scrollHeight,25);e.style.height="".concat(t,"px")}}(),o(e)}),[o,h]);return Object(a.b)("textarea",Object.assign({},b,{ref:m,onKeyDown:v,value:l,onChange:g,className:i()("AutoSizeTextArea",f)}))}},1035:function(e,t,n){"use strict";var r=n(2),a=n(3),c=n.n(a),o=n(25),i=n(366);function l(e){var t=e.content,n=e.type,a=e.urlToken,c=Object(o.useDispatch)(),l=Object(r.useCallback)((function(){c(Object(i.a)({content:t,type:n,urlToken:a}))}),[c,t,n,a]),s=Object(o.useSelector)((function(e){return Object(i.c)(e,{type:n,urlToken:a})}));return Object(r.useEffect)((function(){s||l()}),[s,l]),null}l.propTypes={content:c.a.string.isRequired,type:c.a.oneOf(["answer","article"]).isRequired,urlToken:c.a.string.isRequired},t.a=l},1037:function(e,t,n){"use strict";var r=n(1),a=n(14),c=n(15),o=n(16),i=n(17),l=n(8),s=n(2),u=n(3),d=n.n(u),f=n(29),p=n(77);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var b=function(e){Object(o.a)(n,e);var t=h(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={logoutModalShown:!1},e.handleLogoutModalShow=function(){e.setState({logoutModalShown:!0})},e.handleLogoutModalHide=function(){e.setState({logoutModalShown:!1})},e.handleClick=function(){var t=e.context.currentUser;t&&t.urlToken?e.handleLogoutModalShow():location.href="https://www.zhihu.com/org/signup"},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.state.logoutModalShown;return Object(r.c)(s.Fragment,{children:[Object(r.b)(f.c,{className:"OrgCreateButton",onClick:this.handleClick,children:"申请开通知乎机构号"}),e&&Object(r.c)(p.b,{className:"OrgCreateButton-logoutModal",title:"开通提示",onClose:this.handleLogoutModalHide,children:[Object(r.b)("p",{children:"若想访问机构号注册页面，请您请先退出当前帐号登录状态"}),Object(r.c)(p.a,{children:[Object(r.b)(f.c,{preset:"primary",color:"blue",onClick:function(){location.href="/logout?next=/org/signup"},children:"退出登录"}),Object(r.b)(f.c,{onClick:this.handleLogoutModalHide,children:"我再想想"})]})]})]})}}]),n}(s.Component);b.contextTypes={currentUser:d.a.object};var m=b;t.a=function(e){var t=e.showHelpCenter,n=void 0!==t&&t,a=(new Date).getFullYear();return Object(r.c)("footer",{className:"Footer",children:[n&&Object(r.c)(r.a,{children:[Object(r.b)("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"/help-center",children:"帮助中心"}),Object(r.b)("span",{className:"Footer-dot"})]}),Object(r.b)("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"//liukanshan.zhihu.com/",children:"刘看山"}),Object(r.b)("span",{className:"Footer-dot"}),Object(r.b)("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"/question/19581624",children:"知乎指南"}),Object(r.b)("span",{className:"Footer-dot"}),Object(r.b)("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"/term/zhihu-terms",children:"知乎协议"}),Object(r.b)("span",{className:"Footer-dot"}),Object(r.b)("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"/term/privacy",children:"知乎隐私保护指引"}),Object(r.b)("br",{}),Object(r.b)("a",{className:"Footer-item",target:"_blank",href:"/app",children:"应用"}),Object(r.b)("span",{className:"Footer-dot"}),Object(r.b)("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"https://app.mokahr.com/apply/zhihu",children:"工作"}),Object(r.b)("span",{className:"Footer-dot"}),Object(r.b)(m,{className:"Footer-item"}),Object(r.b)("br",{}),Object(r.b)("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"https://zhuanlan.zhihu.com/p/28852607",children:"侵权举报"}),Object(r.b)("span",{className:"Footer-dot"}),Object(r.b)("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"http://www.12377.cn",children:"网上有害信息举报专区"}),Object(r.b)("br",{}),Object(r.b)("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"https://tsm.miit.gov.cn/dxxzsp/",children:"京 ICP 证 110745 号"}),Object(r.b)("br",{}),Object(r.b)("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"https://beian.miit.gov.cn/",children:"京 ICP 备 13052560 号 - 1"}),Object(r.b)("br",{}),Object(r.c)("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010802020088",children:[Object(r.b)("img",{src:"https://pic3.zhimg.com/80/v2-d0289dc0a46fc5b15b3363ffa78cf6c7.png"}),"京公网安备 11010802020088 号"]}),Object(r.b)("br",{}),Object(r.c)("span",{className:"Footer-item",children:["互联网药品信息服务资格证书",Object(r.b)("br",{}),"（京）- 非经营性 - 2017 - 0067"]}),Object(r.b)("span",{className:"Footer-item",children:"违法和不良信息举报：010-82716601"}),Object(r.b)("br",{}),Object(r.b)("a",{className:"Footer-item",target:"_blank",href:"/term/child-jubao",children:"儿童色情信息举报专区"}),Object(r.b)("br",{}),Object(r.b)("a",{className:"Footer-item",target:"_blank",href:"/certificates",children:"证照中心"}),Object(r.b)("br",{}),Object(r.b)("a",{className:"Footer-item",target:"_blank",href:"/contact",children:"联系我们"}),Object(r.c)("span",{children:[" © ",a," 知乎"]})]})}},1038:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(14),a=n(15),c=n(16),o=n(17),i=n(8),l=n(1),s=n(3),u=n.n(s),d=n(2),f=n(10),p=n.n(f),h=n(225),b=n(409),m=n(178),v=n(197),g=n(24);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var O=function(e){Object(c.a)(n,e);var t=y(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={enabled:!1,shown:!1},e.handleScrollUp=function(){e.state.shown&&e.canToggle()&&e.setState({shown:!1})},e.handleScrollDown=function(){!e.state.shown&&e.canToggle()&&e.setState({shown:!0})},e.handlePositionStatusChange=function(t){e.canToggle()&&("normal"!==t?e.enable():e.disable())},e}return Object(a.a)(n,[{key:"canToggle",value:function(){return!(this.props.prevent||document.activeElement&&document.activeElement.closest(".SearchBar"))}},{key:"enable",value:function(){this.setState({enabled:!0,shown:!0})}},{key:"disable",value:function(){this.setState({enabled:!1,shown:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.offset,r=t.children,a=this.state,c=a.enabled,o=a.shown;return Object(l.c)(d.Fragment,{children:[Object(l.b)(v.a,{shortcuts:[{key:"/",action:function(){return e.setState({shown:!1})}}]}),Object(l.b)(h.a,{offset:n,onPositionStatusChange:this.handlePositionStatusChange,children:Object(l.b)("div",{})}),c&&Object(l.b)(b.a,{onScrollUp:this.handleScrollUp,onScrollDown:this.handleScrollDown}),Object(l.b)(m.a.Inlet,{shown:o,children:Object(l.b)("div",{className:p()("PageHeader",{"is-shown":o}),children:r})})]})}}]),n}(d.Component);O.propTypes={prevent:u.a.bool,offset:u.a.number},O.defaultProps={prevent:!1,offset:g.i};var j=O},1040:function(e,t,n){"use strict";var r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},c=Object.defineProperty,o=Object.getOwnPropertyNames,i=Object.getOwnPropertySymbols,l=Object.getOwnPropertyDescriptor,s=Object.getPrototypeOf,u=s&&s(Object);e.exports=function e(t,n,d){if("string"!=typeof n){if(u){var f=s(n);f&&f!==u&&e(t,f,d)}var p=o(n);i&&(p=p.concat(i(n)));for(var h=0;h<p.length;++h){var b=p[h];if(!(r[b]||a[b]||d&&d[b])){var m=l(n,b);try{c(t,b,m)}catch(e){}}}return t}return t}},1043:function(e,t,n){"use strict";var r=n(59);Object.defineProperty(t,"__esModule",{value:!0}),t.stripHTML=t.truncateHTML=t.getBlockType=t.parseTag=t.parseTagGroup=t.parseAttrs=t.TAG_RE=t.TAG_RE_TEMPLATE=void 0;var a=["img","br"],c=/([\w|-]+)(?:="([^"]*)")?/;function o(e){var t={};if((e=e.trim()).length)for(var n,a=new RegExp(c.source,"g");n=a.exec(e);){var o=n.slice(1),i=r(o,2),l=i[0],s=i[1];t[l]=s}return t}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r(e,5),c=n[0],i=n[1],l=n[2],s=n[3],u=n[4],d="open";"/"===i?d="close":(a.includes(l)||"/"===u)&&(d="self-close");var f=t.parseAttrs?o(s):s;return{tagHTML:c,tagName:l,tagType:d,attrs:f}}function l(e){var t=e.tagName,n=e.attrs;return"string"==typeof n?t:"invisible"===n.class?"invisible":"video-box"===n.class?"video-box":["link-card","mcn-link-card","metalink"].includes(n["data-draft-type"])?"link-card":t}function s(e){switch(e){case"invalid":return{type:"invalid"};case"noscript":case"figcaption":case"video-box":case"link-card":return{type:"replace",content:" "};case"div":case"br":case"figure":case"img":case"hr":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"p":case"pre":case"code":case"blockquote":case"ul":case"ol":case"li":return{type:"replace-self",content:" "};case"invisible":return{type:"hide"};default:return null}}function u(e){return!!(e.h1||e.h2||e.h3||e.h4||e.h5||e.h6||e.blockquote||e.pre||e.img||e["video-box"]||e["link-card"])||(e.br||0)+(e.p||0)+(e.li||0)>1}t.TAG_RE_TEMPLATE=new RegExp(/<(\/?)(#TAG_NAME#)\s*(#TAG_ATTRS#)\s*(\/?)>/.source.replace("#TAG_ATTRS#",/[^>]*/.source)),t.TAG_RE=new RegExp(t.TAG_RE_TEMPLATE.source.replace("#TAG_NAME#",/[\w|-]+/.source)),t.parseAttrs=o,t.parseTagGroup=i,t.parseTag=function(e,n){var r=t.TAG_RE.exec(e);if(r)return i(r,n)},t.getBlockType=l,t.truncateHTML=function(e){for(var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=c.endsWith,d=void 0===o?"…":o,f=c.placeholders,p=void 0===f?{}:f,h=[],b=[],m=[],v={},g={},y=new RegExp(t.TAG_RE.source,"g"),O=0,j=0,C=0,k=0,w=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];h.push(e),t||(O+=e.length),j+=e.length};n=y.exec(e);){var S=i(n,{parseAttrs:!0}),x=S.tagHTML,N=S.tagType,R=S.tagName,E="close"===N&&a.includes(R)?"invalid":l("close"!==N?S:b[b.length-1]),T=p[E]?{type:"replace",content:p[E]}:s(E);"close"!==N&&(v[E]=(v[E]||0)+1);var I=e.slice(j,n.index),P=I.length;if(O+P>=r&&0===C&&0===k){for(w(I.slice(0,r-O));m.length;){var L=m.pop();h.push("</".concat(L.tagName,">"))}break}0===C&&w(I,0!==k),"invalid"!==E&&("open"===N?b.push(S):"close"===N&&b.pop(),T?("replace"===T.type&&(0===C&&"close"!==N&&h.push(T.content),"open"===N?C++:"close"===N&&C--),0===C&&"replace-self"===T.type&&h.push(T.content),0===C&&"hide"===T.type&&("open"===N?k++:"close"===N&&k--,h.push(x))):0===C&&(h.push(x),"open"===N?m.push(S):"close"===N&&m.pop())),"video-box"!==E||g.type||"string"==typeof S.attrs||(g.type="video",g.url=S.attrs["data-poster"],g.id=S.attrs["data-lens-id"]),j=y.lastIndex}if(O<r){var A=e.slice(j).slice(0,r-O);w(A)}var _=O>r||O===r&&j<e.length||u(v);return{isTruncated:_,thumbnailInfo:g,content:"".concat(h.join("").trim().replace(/\s{2,}/g," ")).concat(_?d:"")}},t.stripHTML=function(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""}},1044:function(e,t,n){"use strict";var r=n(78),a=n.n(r);function c(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,c=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw c}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=["DIV","P","BLOCKQUOTE","PRE","CODE","OL","UL","H1","H2","H3","H4","H5","H6"],l=function(e){return i.includes(e.nodeName)||e.classList&&(e.classList.contains("video-box")||e.classList.contains("link-box")||e.classList.contains("origin_image")||e.classList.contains("content_image"))};t.a=function(e){if("undefined"==typeof window)return e;if(-1!==e.indexOf("<p>"))return e;var t=document,n=t.createElement("div");n.innerHTML=e;var r,o=c(a()(n.childNodes));try{for(o.s();!(r=o.n()).done;){var i=r.value;if("BR"===i.nodeName&&i.previousSibling&&"BR"!==i.previousSibling.nodeName&&i.nextSibling&&"BR"===i.nextSibling.nodeName){for(var s=t.createElement("p"),u=i.previousSibling;u&&!l(u)&&("BR"!==u.nodeName||u.previousSibling&&"BR"!==u.previousSibling.nodeName&&!l(u.previousSibling));){var d=s.childNodes;d.length>0?s.insertBefore(u,d[0]):s.appendChild(u),u=i.previousSibling}s.childNodes.length>0&&(n.insertBefore(s,i),i.nextSibling.parentNode.removeChild(i.nextSibling),i.parentNode.removeChild(i))}}}catch(e){o.e(e)}finally{o.f()}return n.innerHTML}},1055:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observe=c,t.unobserve=o,t.destroy=i;var r=new Map,a=new Map;function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{threshold:0},c=arguments[3],o=n.root,i=n.rootMargin,s=n.threshold||0;if(e&&t){var u=i?s.toString()+"_"+i:""+s.toString();o&&(u=c?c+"_"+u:null);var d=u?a.get(u):null;d||(d=new IntersectionObserver(l,n),u&&a.set(u,d));var f={callback:t,visible:!1,options:n,observerId:u,observer:u?void 0:d};return r.set(e,f),d.observe(e),f}}function o(e){if(e){var t=r.get(e);if(t){var n=t.observerId,c=t.observer,o=n?a.get(n):c;o&&o.unobserve(e);var i=!1;n&&r.forEach((function(t,r){t&&t.observerId===n&&r!==e&&(i=!0)})),o&&!i&&(o.disconnect(),a.delete(n)),r.delete(e)}}}function i(){a.forEach((function(e){e.disconnect()})),a.clear(),r.clear()}function l(e){e.forEach((function(e){var t=e.isIntersecting,n=e.intersectionRatio,a=e.target,c=r.get(a);if(c&&n>=0){var o=c.options,i=!1;Array.isArray(o.threshold)?i=o.threshold.some((function(e){return c.visible?n>e:n>=e})):void 0!==o.threshold&&(i=c.visible?n>o.threshold:n>=o.threshold),void 0!==t&&(i=i&&t),c.callback&&c.callback(i)}}))}t.default={observe:c,unobserve:o,destroy:i}},1056:function(e,t,n){},1061:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(31),a=n(14),c=n(15),o=n(16),i=n(17),l=n(8),s=n(1),u=n(2),d=n(3),f=n.n(d),p=n(870),h=n(197);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var m=function(e){Object(o.a)(n,e);var t=b(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.containerClassName,n=e.selector,a=Object(r.a)(e,["containerClassName","selector"]);return Object(s.b)(h.b,{className:t,selector:n,children:Object(s.b)(p.b,Object.assign({},a))})}}]),n}(u.Component);m.propTypes={containerClassName:f.a.string,selector:f.a.string},m.defaultProps={selector:".List-item"};var v=m},1065:function(e,t,n){"use strict";var r=n(1),a=n(2),c=n.n(a),o=n(18),i=function(e){return c.a.createElement(o.a,e,c.a.createElement("path",{fill:"currentColor",d:"M3.495 3A1.993 1.993 0 0 0 1.5 4.99v14.02c0 1.092.893 1.99 1.995 1.99h16.01a1.993 1.993 0 0 0 1.995-1.99V4.99c0-1.092-.893-1.99-1.995-1.99zm1.007 8a.999.999 0 1 1 0-2h6.995a.999.999 0 1 1 0 2zM3.5 14c0 .556.449 1 1.002 1h4.995a.999.999 0 1 0 0-2H4.502c-.546 0-1.002.448-1.002 1zm15.285-2.429a.5.5 0 0 1 0 .858l-3.528 2.117a.5.5 0 0 1-.757-.43V9.884a.5.5 0 0 1 .757-.429z",fillRule:"evenodd",clipRule:"evenodd"}))};i.defaultProps={name:"Catalog"};var l=i,s=n(29),u=n(871),d=n(355),f=n(28);t.a=function(e){var t=e.className,n=e.onClick,c=e.html,o=e.sourceId,i=Object(a.useCallback)((function(e){f.a.trackEvent(e.target,{id:9857,action:"Click"}),n&&n(e)}),[n]),p=Object(a.useMemo)((function(){return Object(u.c)(c,o).catalog}),[c,o]);return(null==p?void 0:p.length)?Object(r.b)(d.a,{trackCardShow:!0,view:{id:9856},children:Object(r.b)(s.c,{preset:"plain",className:t,onClick:i,icon:l,label:"目录"})}):null}},1066:function(e,t,n){"use strict";var r=n(817),a=n(1),c=n(2),o=n(10),i=n.n(o),l=n(164),s=n(166),u=n(358),d=n.n(u),f=n(871),p=n(41),h=n(31),b=n(58),m=n(807),v=n(165),g=n(355),y=n(28),O=n(819),j=function(e){var t=e.children,n=e.targetId,r=e.active,c=e.setCursor,o=Object(h.a)(e,["children","targetId","active","setCursor"]);return Object(a.b)(b.h,Object.assign({color:r?"GBL01A":"GBK02A",fontWeight:r?"bold":"normal",css:{fontSize:"14px"}},o,{children:Object(a.b)(g.a,{module:"Content",moduleName:String(t),children:Object(a.c)(b.d,{css:{cursor:"pointer",alignItems:"center",height:"48px"},sx:{borderBottom:"1px solid",borderColor:"GBK09A"},onClick:function(e){y.a.trackEvent(e.target,{id:9745,action:"Click",name:"弹窗"});var t=document.querySelector("#"+n);c(n),t&&Object(O.a)(t)},children:[Object(a.b)(b.h,{css:Object(v.d)(1),children:t}),Object(a.b)(m.a,{size:"24px",css:function(e){return{color:e.colors.GBL05A,flex:"0 0 auto",marginLeft:"auto"}}})]})})}))},C=function(e){return Object(a.b)(j,Object.assign({},e))},k={1:C,2:function(e){return Object(a.b)(j,Object.assign({pl:"20px"},e))}},w=function(e){var t=e.catalog,n=e.className,r=e.zaContent,o=Object(c.useState)(null),l=Object(p.a)(o,2),s=l[0],u=l[1];return Object(c.useEffect)((function(){if(null==t?void 0:t.length){var e=null,n=Object(O.c)();t.forEach((function(t){var r=document.querySelector("#"+t.targetId);(null==r?void 0:r.getBoundingClientRect().top)<=n+2&&(e=t.targetId)})),u(e)}}),[]),(null==t?void 0:t.length)?Object(a.b)(g.a,{trackCardShow:!0,view:{id:9744,name:"弹窗"},content:r,module:"Content",children:Object(a.b)(b.a,{className:i()(n),children:Object(a.b)(b.d,{flexDirection:"column",css:{fontSize:"12px"},children:t.map((function(e){var t=e.titleLevel,n=e.text,r=e.targetId,c=k[t]||C;return Object(a.b)(c,{targetId:r,active:s===r,setCursor:u,children:n},r)}))})})}):null};function S(){var e=Object(r.a)([""," 编辑于",""]);return S=function(){return e},e}t.a=function(e){var t=e.className,n=e.shown,r=e.onClose,o=e.html,u=e.sourceId,p=e.updated,h=e.author,b=e.zaContent,m=Object(c.useMemo)((function(){return Object(f.c)(o,u).catalog}),[o,u]);return Object(a.b)(l.b,{wrapperClassName:"CatalogModal-wrapper",className:i()("CatalogModal",t),title:"目录",subtitle:d()(S(),null==h?void 0:h.name,Object(s.toSmartString)(p)),onClose:r,children:n&&Object(a.b)(w,{css:{paddingBottom:"16px"},catalog:m,zaContent:b})})}},1067:function(e,t,n){"use strict";var r=n(14),a=n(15),c=n(69),o=n(16),i=n(17),l=n(8),s=n(1),u=n(2),d=n(3),f=n.n(d),p=n(28),h=n(564),b=n(813),m=n(837);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var g=function(e){Object(o.a)(n,e);var t=v(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={expanded:!0},e.handleTitleClick=function(t){p.a.trackEvent(Object(c.a)(e),{id:6121,action:"OpenUrl",element_name:"Title"}),window.open(t)},e.renderHeader=function(){var t=e.props,n=t.title,r=t.url,a=t.author;return Object(s.c)("div",{className:"AbstractCard-header",children:[Object(s.c)("div",{className:"AbstractCard-desc",children:[Object(s.b)("span",{className:"AbstractCard-title",onClick:function(){return e.handleTitleClick(r,n)},children:n}),Object(s.b)("span",{className:"AbstractCard-source",children:e.abstractSourceInfo})]}),Object(s.b)(m.a,{zaId:6120,className:"AbstractCard-author",author:a,preset:"plain"})]})},e.renderContent=function(){var t=e.props,n=t.content,r=t.member.name,a=t.theme;return Object(s.c)("div",{className:"AbstractCard-content",children:[Object(s.b)("div",{className:"AbstractCard-text AbstractCard-text--".concat(a),children:n}),Object(s.b)("div",{className:"AbstractCard-tip",children:Object(s.c)("span",{className:"AbstractCard-info",children:[r," 摘录于 ",e.createdFormat]})})]})},e}return Object(a.a)(n,[{key:"componentDidMount",value:function(){Object(b.onViewedOnce)(this.node,(function(){p.a.trackCardShow(null,{id:6118})}))}},{key:"render",value:function(){var e=this;return Object(s.c)("div",{className:"AbstractCard",ref:function(t){e.node=t},children:[this.renderHeader(),this.renderContent()]})}},{key:"abstractSourceInfo",get:function(){return"answer"===this.props.type?"下的回答内容摘录":"下的内容摘录"}},{key:"createdFormat",get:function(){var e=this.props.created;return Object(h.a)(e?new Date(1e3*e):new Date,"yyyy-MM-dd")}}]),n}(u.Component);g.propTypes={title:f.a.string.isRequired,url:f.a.string.isRequired,author:f.a.object,member:f.a.object,content:f.a.string.isRequired,created:f.a.number,theme:f.a.string.isRequired};t.a=g},1085:function(e,t,n){"use strict";var r=n(2),a=n.n(r),c=n(18),o=function(e){return a.a.createElement(c.a,e,a.a.createElement("path",{d:"M18.376 5.624c-3.498-3.499-9.254-3.499-12.752 0-3.499 3.498-3.499 9.254 0 12.752 3.498 3.499 9.254 3.499 12.752 0 3.499-3.498 3.499-9.14 0-12.752zm-1.693 1.693c2.37 2.37 2.596 6.094.678 8.69l-9.367-9.48c2.708-1.919 6.32-1.58 8.69.79zm-9.48 9.48c-2.37-2.37-2.595-6.095-.676-8.69l9.48 9.48c-2.822 1.918-6.433 1.58-8.803-.79z",fillRule:"evenodd"}))};o.defaultProps={name:"Ban"},t.a=o},1088:function(e,t,n){},1090:function(e,t,n){e.exports=n(64)(201)},1092:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(2)),a=c(n(195));function c(e){return e&&e.__esModule?e:{default:e}}var o=function(e){return r.default.createElement(a.default,Object.assign({width:"1.2em",height:"1.2em",viewBox:"0 0 24 24"},e),r.default.createElement("path",{d:"M19.027 10c.239.01 1.973.138 1.973 2l-.001 8.027c-.009.24-.137 1.973-2 1.973H5.003C3.138 22 3.009 20.266 3 20.027V12c0-1.862 1.733-1.99 1.972-2zm-8.481 3.004c-.475-.277-.86-.064-.86.5V18.5c0 .553.394.773.86.5l4.278-2.496c.475-.277.466-.731 0-1.003zM18 2a2 2 0 0 1 2 2v1.134a1 1 0 0 1 1.207 1.573l-1.5 1.5a1 1 0 0 1-1.414 0l-1.5-1.5A1 1 0 0 1 18 5.134V4h-2a1 1 0 1 1 0-2h2zm-8 4a1 1 0 0 1 0 2H4a1 1 0 1 1 0-2h6zm2-4a1 1 0 0 1 0 2H4a1 1 0 1 1 0-2h8z",fillRule:"evenodd"}))};t.default=o},1102:function(e,t,n){"use strict";var r=n(2),a=n.n(r),c=n(18),o=function(e){return a.a.createElement(c.a,e,a.a.createElement("path",{d:"M19.947 3.129c-.633.136-3.927.639-5.697.385-3.133-.45-4.776-2.54-9.949-.888-.997.413-1.277 1.038-1.277 2.019L3 20.808c0 .3.101.54.304.718a.97.97 0 0 0 .73.304c.275 0 .519-.102.73-.304.202-.179.304-.418.304-.718v-6.58c4.533-1.235 8.047.668 8.562.864 2.343.893 5.542.008 6.774-.657.397-.178.596-.474.596-.887V3.964c0-.599-.42-.972-1.053-.835z",fillRule:"evenodd"}))};o.defaultProps={name:"Report"},t.a=o},1103:function(e,t,n){"use strict";var r=n(2),a=n.n(r),c=n(18),o=function(e){return a.a.createElement(c.a,e,a.a.createElement("path",{d:"M4.076 16.966a4.19 4.19 0 0 1 1.05-1.76l8.568-8.569a.524.524 0 0 1 .741 0l2.928 2.927a.524.524 0 0 1 0 .74l-8.568 8.57c-.49.49-1.096.852-1.761 1.051l-3.528 1.058a.394.394 0 0 1-.49-.488l1.06-3.53zM20.558 4.83c.59.59.59 1.546 0 2.136l-1.693 1.692a.503.503 0 0 1-.712 0l-2.812-2.812a.504.504 0 0 1 0-.712l1.693-1.693a1.51 1.51 0 0 1 2.135 0l1.389 1.389z"}))};o.defaultProps={name:"Edit"},t.a=o},1104:function(e,t,n){"use strict";var r=n(2),a=n.n(r),c=n(18),o=function(e){return a.a.createElement(c.a,e,a.a.createElement("path",{d:"M18.453 7.992l-1.833-1.65.964-.978a1.223 1.223 0 0 1 1.73-.012l.005.006a1.24 1.24 0 0 1 .007 1.748l-.873.886zm-1.178 1.194l-5.578 5.66-1.935.697a.393.393 0 0 1-.504-.504l.697-1.935 5.488-5.567 1.832 1.65zM7.58 5.848l5.654.006-1.539 1.991-3.666.012A1.02 1.02 0 0 0 7 8.868v7.993c0 .558.46 1.01 1.029 1.01l7.941-.01c.568 0 1.03-.453 1.03-1.012v-4.061l2-1.442v6.002c0 1.397-1.2 2.501-2.62 2.501H7.574C6.153 19.85 5 18.717 5 17.32V8.35c0-1.397 1.16-2.502 2.58-2.502z"}))};o.defaultProps={name:"EditSurround"},t.a=o},1110:function(e,t,n){"use strict";var r=n(137),a=n.n(r),c=n(2),o=n.n(c),i=function e(t){var n=function(e,t){return Object.keys(t).reduce((function(e,n){var r=e[n];if(delete e[n],r){var a=t[n],c="function"==typeof a?a(e):a;return Object.assign({},e,c,c&&c.style&&{style:Object.assign({},e.style,c.style)})}return e}),Object.assign({},e))}(t,e.mapProps),r=n.name,c=n.className,i=n.defaultClassName,l=n.size,s=n.center,u=a()(n,["name","className","defaultClassName","size","center"]),d=o.a.createElement("svg",Object.assign({className:"".concat(i," ").concat(i,"--").concat(r).concat(c?" ".concat(c):"")},u,l&&{width:l,height:l}));return s?o.a.createElement("span",{style:e.strutStyle},"​",d):d};i.defaultProps={defaultClassName:"Icon",fill:"currentColor"},i.mapProps={text:{size:"1.2em"}},i.strutStyle={display:"inline-flex",alignItems:"center"},t.a=i},1203:function(e,t,n){"use strict";var r=n(2),a=n.n(r),c=n(18),o=function(e){return a.a.createElement(c.a,e,a.a.createElement("path",{d:"M9 9.185v5.63c0 .378.18.685.665.685.114 0 .187-.03.314-.083l4.621-2.793c.2-.124.4-.304.4-.624s-.2-.5-.4-.624L9.979 8.583c-.127-.053-.2-.083-.314-.083-.485 0-.665.307-.665.685z"}))};o.defaultProps={name:"TriangleArrowRight"},t.a=o},1204:function(e,t,n){"use strict";var r=n(2),a=n.n(r),c=n(18),o=function(e){return a.a.createElement(c.a,e,a.a.createElement("path",{d:"M6 3.956v16.088C6 21.124 6.517 22 7.9 22c.326 0 .533-.087.896-.236L22 13.784c.571-.355 1.143-.87 1.143-1.784S22.57 10.571 22 10.216L8.796 2.236C8.433 2.087 8.226 2 7.9 2 6.514 2 6 2.876 6 3.956z"}))};o.defaultProps={name:"Play"},t.a=o},1212:function(e,t,n){"use strict";var r=n(1213),a={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var n,c,o,i,l,s,u=!1;t||(t={}),n=t.debug||!1;try{if(o=r(),i=document.createRange(),l=document.getSelection(),(s=document.createElement("span")).textContent=e,s.style.all="unset",s.style.position="fixed",s.style.top=0,s.style.clip="rect(0, 0, 0, 0)",s.style.whiteSpace="pre",s.style.webkitUserSelect="text",s.style.MozUserSelect="text",s.style.msUserSelect="text",s.style.userSelect="text",s.addEventListener("copy",(function(r){if(r.stopPropagation(),t.format)if(r.preventDefault(),void 0===r.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var c=a[t.format]||a.default;window.clipboardData.setData(c,e)}else r.clipboardData.clearData(),r.clipboardData.setData(t.format,e);t.onCopy&&(r.preventDefault(),t.onCopy(r.clipboardData))})),document.body.appendChild(s),i.selectNodeContents(s),l.addRange(i),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");u=!0}catch(r){n&&console.error("unable to copy using execCommand: ",r),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),u=!0}catch(r){n&&console.error("unable to copy using clipboardData: ",r),n&&console.error("falling back to prompt"),c=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(c,e)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(i):l.removeAllRanges()),s&&document.body.removeChild(s),o()}return u}},1213:function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},1216:function(e,t,n){"use strict";var r=n(31),a=n(14),c=n(15),o=n(16),i=n(17),l=n(8),s=n(1),u=n(2),d=n(19),f=n(3),p=n.n(f),h=n(25),b=n(93),m=n.n(b),v=n(26),g=n(227),y=n(72),O=n(24),j=n(911);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var k=function(e,t){var n=e.entities.questions[t.answer.question.id];return n&&n.voteDownReason},w={loadSwitches:g.b,showNotification:v.h,updateAnswerVote:y.K,getVoteDownReason:y.k,selectVoteDownReason:y.C,setOpposeRightStatus:g.e},S=function(e){Object(o.a)(n,e);var t=C(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).handleVote=e.context.authRequired((function(t){var n=e.props,r=n.answer;(0,n.updateAnswerVote)(r.id,t)}),O.U.vote),e.handleLoadVoteDownReason=function(){var t=e.props,n=t.answer;(0,t.getVoteDownReason)(n.id,n.question.id)},e.handleSelectVoteDownReason=function(t){var n=e.props,r=n.answer,a=n.selectVoteDownReason,c=n.showNotification;a(r.id,t.reasonId).then((function(e){c(e.payload.message)}))},e.handleSetShowVoteDownReason=function(t){(0,e.props.setOpposeRightStatus)(t)},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.loadSwitches;this.shouldShowVoteDownMenu&&e(["opposeRight"])}},{key:"render",value:function(){var e=this.props,t=e.answer,n=e.voteDownReason,a=e.opposeRightStatusIsOn,c=Object(r.a)(e,["answer","voteDownReason","opposeRightStatusIsOn"]);return Object(s.b)(j.a,Object.assign({count:t.voteupCount,voting:t.relationship&&t.relationship.voting,isOwner:t.relationship&&t.relationship.isAuthor,isShowVoteDownMenu:this.shouldShowVoteDownMenu&&a,onVote:this.handleVote,voteDownReason:n,onLoadVoteDownReason:this.handleLoadVoteDownReason,onSelectVoteDownReason:this.handleSelectVoteDownReason,onSetVoteDownReason:this.handleSetShowVoteDownReason},m()(c,Object.keys(w))))}},{key:"shouldShowVoteDownMenu",get:function(){return Boolean(!this.props.disabled&&this.context.currentUser)}}]),n}(u.Component);S.contextTypes={currentUser:p.a.object,authRequired:p.a.func},t.a=Object(d.compose)(Object(h.connect)((function(e,t){return{voteDownReason:k(e,t),opposeRightStatusIsOn:Object(g.d)(e)}}),w))(S)},1218:function(e,t,n){},1220:function(e,t,n){"use strict";n.d(t,"a",(function(){return te})),n.d(t,"b",(function(){return je}));var r=n(1),a=n(25),c=n(20),o=n.n(c),i=n(21),l=n.n(i),s=n(90),u=n.n(s),d=n(22),f=n.n(d),p=n(23),h=n.n(p),b=n(13),m=n.n(b),v=n(2),g=n.n(v),y=n(3),O=n.n(y),j=n(304),C=n.n(j),k=n(10),w=n.n(k),S=n(222),x=n(807),N=n(813),R=n(196),E=n(28),T=n(832);function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var a=m()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L="dark",A="light",_=function(e){f()(n,e);var t=I(n);function n(){var e;o()(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),P(u()(e),"handleClick",(function(t,n){var r=e.props.onClick;E.a.trackEvent(e.node,{id:4240,action:"OpenUrl",name:n},{link:{url:t,anchor:n}}),r&&r({target:e.node})})),e}return l()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.goodsCard.body.link;Object(N.onViewedOnce)(this.node,(function(){E.a.trackCardShow(e.node,{id:4241,name:"课程"},{link:{url:t,anchor:"课程"}})}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.theme,r=t.zaInfo,a=void 0===r?{}:r,c=t.goodsCard,o=t.className,i=n===L,l=c.header,s=l.title,u=l.subTitle,d=c.body,f=d.title,p=d.cover,h=d.coverLabel,b=d.link,m=d.desc,v=d.label,y=d.vipNote,O=c.catalog;return g.a.createElement(g.a.Fragment,null,g.a.createElement("section",{className:w()("KfeCollection-GoodsCardV2",o),"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[a]}})},g.a.createElement("h1",{className:"KfeCollection-GoodsCardV2-header"},"".concat(s).concat(u?" · ".concat(u):"")),g.a.createElement(S.b,{content:Object.assign({},a,{type:T.e.paidAnswer}),block:"oldSkuCard"},g.a.createElement(S.a,{zaType:"Card",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:b}}},g.a.createElement("a",{href:b,target:"_blank",rel:"noopener noreferrer",className:"KfeCollection-GoodsCardV2-content",onClick:function(){return e.handleClick(b,f)},ref:function(t){return e.node=t}},g.a.createElement("div",{className:"KfeCollection-GoodsCardV2-cover"},g.a.createElement("img",{className:w()("KfeCollection-GoodsCardV2-cover-img",{"KfeCollection-GoodsCardV2-cover-img--dark":i}),src:Object(R.imgUrl)(p,{size:"200x0"})}),g.a.createElement("div",{className:"KfeCollection-GoodsCardV2-cover-label"},h)),g.a.createElement("div",{className:"KfeCollection-GoodsCardV2-detail"},g.a.createElement("div",null,g.a.createElement("h2",{className:"KfeCollection-GoodsCardV2-detail-title"},f),m&&g.a.createElement("p",{className:"KfeCollection-GoodsCardV2-detail-desc"},m),g.a.createElement("p",{className:"KfeCollection-GoodsCardV2-detail-label"},v)),g.a.createElement("p",{className:"KfeCollection-GoodsCardV2-detail-vipNote",dangerouslySetInnerHTML:{__html:y}}))))),O&&O.length>0&&g.a.createElement("div",{className:"KfeCollection-GoodsCardV2-catalog"},"章节目录",g.a.createElement("div",{className:"KfeCollection-GoodsCardV2-catalogSectionList"},O.map((function(e){var t=e.manuscriptUrl,n=e.sectionId,r=e.title;return g.a.createElement(S.a,{zaType:"Text",key:n,zaBlock:"catalog",extra:{link:{url:t}},zaAction:"OpenUrl"},g.a.createElement("a",{className:"KfeCollection-GoodsCardV2-catalogSectionItem",href:t,target:"_blank",rel:"noopener noreferrer",key:n,"data-za-detail-view-id":7500,"data-za-extra":JSON.stringify({button:{text:r}})},r,g.a.createElement(x.a,{className:"KfeCollection-GoodsCardV2-catalogSectionItemIcon"})))}))))))}}]),n}(g.a.Component);P(_,"propTypes",{theme:O.a.oneOf([L,A]),onClick:O.a.func}),P(_,"defaultProps",{theme:A});var M=_,z=n(29),D=n(1203);function B(e){var t=e.header,n=void 0===t?{}:t,r=e.onClick,a=n.title,c=n.subTitle,o=n.link;return g.a.createElement("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"KfeCollection-GoodsCardV3-header",onClick:r},g.a.createElement("div",{className:"KfeCollection-GoodsCardV3-headerTitle"},a),g.a.createElement("div",{className:"KfeCollection-GoodsCardV3-headerSubTitle"},g.a.createElement("div",null,c),g.a.createElement(D.a,{className:"KfeCollection-GoodsCardV3-headerIcon"})))}var V=function(e){var t=Object(v.useRef)(),n=e.className,r=e.zaInfo,a=void 0===r?{}:r,c=e.goodsCard,o=e.shelvesInfo,i=e.onBookshelfButtonClick,l=void 0===i?C.a:i,s=e.theme,u=void 0===s?"light":s,d=e.onClick,f=c.header,p=c.body,h=c.body,b=h.title,m=h.cover,y=h.coverLabel,O=h.link,j=h.desc,k=h.label,I=h.vipNote,P=h.icons,L=h.heatNote,A=Object(S.i)().trackEvent;Object(v.useEffect)((function(){Object(N.onViewedOnce)(t.current,(function(){E.a.trackCardShow(t.current,{id:8467,name:p.title},{button:{text:f.title}})}))}),[p,f]);var _=Object(v.useCallback)((function(e){E.a.trackEvent(e.target,{id:8468,action:"OpenUrl",name:p.title},{link:{url:f.link},button:{text:f.title}}),A({action:"OpenUrl",eventType:"Click",elementLocation:{text:f.title,block:{blockText:"newSkuCardHeader"},type:"Button",content:{type:T.e.paidAnswer}}},{link:{url:f.link}})}),[p,f,A]),M=Object(v.useCallback)((function(e){E.a.trackEvent(e.target,{id:8469,action:"OpenUrl",name:p.title},{link:{url:p.link},button:{text:f.title}}),d&&d(e)}),[p,f,d]),D=Object(v.useCallback)((function(e){var t=(null==o?void 0:o.whetherInShelf)?"去书架查看":"加入书架",n=(null==o?void 0:o.whetherInShelf)?"OpenUrl":"Collect",r={url:p.link};E.a.trackEvent(e.target,{id:8294,action:"OpenUrl",name:p.title},{link:r,button:{text:t}}),A({action:n,eventType:"Click",elementLocation:{type:"Button",text:t}},(null==o?void 0:o.whetherInShelf)?{link:{url:"https://www.zhihu.com/xen/market/vip/vip-recommend"}}:null),l(e)}),[p,l,o,A]);return g.a.createElement("section",{className:w()("KfeCollection-GoodsCardV3",n),"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[a]}})},g.a.createElement(B,{header:f,onClick:_}),g.a.createElement(S.b,{content:Object.assign({},a,{type:T.e.paidAnswer}),block:"newSkuCard"},g.a.createElement(S.a,{zaType:"Card",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:O}}},g.a.createElement("a",{href:O,target:"_blank",rel:"noopener noreferrer",className:w()("KfeCollection-GoodsCardV3-content","KfeCollection-GoodsCardV3-content--topHeader"),onClick:M,ref:t},g.a.createElement("div",{className:"KfeCollection-GoodsCardV3-cover"},g.a.createElement("img",{className:"KfeCollection-GoodsCardV3-coverVip",src:"light"===u?null==P?void 0:P.leftTopDayIcon:null==P?void 0:P.leftTopNightIcon,alt:""}),g.a.createElement("img",{className:w()("KfeCollection-GoodsCardV3-coverImage"),src:Object(R.imgUrl)(m,{size:"200x0"})}),g.a.createElement("div",{className:"KfeCollection-GoodsCardV3-coverLabel"},y)),g.a.createElement("div",{className:"KfeCollection-GoodsCardV3-detail"},b&&g.a.createElement("h2",{className:"KfeCollection-GoodsCardV3-detailTitle"},b),j&&g.a.createElement("p",{className:"KfeCollection-GoodsCardV3-detailDescription"},j),k&&g.a.createElement("p",{className:"KfeCollection-GoodsCardV3-detailLabel"},k),L?g.a.createElement("p",{className:"KfeCollection-GoodsCardV3-detailHeatNote"},L):I&&g.a.createElement("p",{className:"KfeCollection-GoodsCardV3-detailVipNote",dangerouslySetInnerHTML:{__html:I}}),o&&g.a.createElement(z.c,{className:"KfeCollection-GoodsCardV3-bookshelfButton",preset:"plain",color:"grey",onClick:D},o.whetherInShelf?"去书架查看":"加入书架",g.a.createElement(x.a,{text:!0,center:!0})))))))};function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var a=m()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var U=function(e){f()(n,e);var t=F(n);function n(){var e;o()(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),H(u()(e),"renderCard",(function(){var t=e.props,n=t.hasPurchased,r=t.result,a=void 0===r?{}:r,c=t.theme,o=t.onBookshelfButtonClick,i=void 0===o?C.a:o,l=t.onClick,s=t.className,u=a.goodsCard,d=a.shelvesInfo,f=a.zaInfo;return n?g.a.createElement(V,{goodsCard:u,zaInfo:f,hasPurchased:n,shelvesInfo:n?d:null,onBookshelfButtonClick:i,onClick:l,theme:c,className:s}):g.a.createElement(M,{goodsCard:u,zaInfo:f,onClick:l,className:s})})),e}return l()(n,[{key:"render",value:function(){return this.renderCard()}}]),n}(g.a.Component);H(U,"propTypes",{result:O.a.object.isRequired,theme:O.a.string,hasPurchased:O.a.bool,onBookshelfButtonClick:O.a.func}),H(U,"defaultProps",{result:{goodsCard:{},btnInfo:{},progressInfo:{},zaInfo:{}}});var q=U,W=n(82);function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var a=m()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Q=function(e){f()(n,e);var t=K(n);function n(){var e;o()(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),G(u()(e),"handleClick",(function(t,n){var r=e.props.onClick;E.a.trackEvent(e.node,{id:4240,action:"OpenUrl",name:n},{link:{url:t,anchor:n}}),"function"==typeof r&&r(e.node)})),e}return l()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.btnInfo,n=t.btnText,r=t.link;W.a.dispatch("vip/preloadVIPHybridPopup",{url:r}),Object(N.onViewedOnce)(this.node,(function(){E.a.trackCardShow(e.node,{id:4241,name:n},{link:{url:r,anchor:n}})}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.btnInfo,r=t.zaInfo,a=void 0===r?{}:r,c=t.className,o=n.btnText,i=n.link;return g.a.createElement("div",{className:w()("KfeCollection-PurchaseBtn",c)},g.a.createElement("div",{className:"KfeCollection-PurchaseBtn-mask"}),g.a.createElement(S.b,{block:"textLink",content:Object.assign({},a||{},{type:T.e.paidAnswer})},g.a.createElement(S.a,{zaType:"Text",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:i}}},g.a.createElement("a",{className:"KfeCollection-PurchaseBtn-HybridLink",href:i,target:"_blank",rel:"noopener noreferrer",onClick:function(){return e.handleClick(i,o)},ref:function(t){return e.node=t},"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[a]}})},g.a.createElement("span",{className:"KfeCollection-PurchaseBtn-text"},o)," ",g.a.createElement(x.a,{className:"KfeCollection-PurchaseBtn-ArrowRight"})))))}}]),n}(g.a.Component),Z=n(223),J=n(72),Y=n(43);function X(e){var t=e.id,n=e.children,r=Object(v.useRef)(),c=Object(a.useDispatch)();return Object(v.useEffect)((function(){var e=r.current;if(t&&e){var n=e instanceof Element?e:Object(Y.findDOMNode)(e);n&&Object(N.onViewedOnce)(n,(function(){return c(Object(J.y)(t))}))}}),[c,t]),Object(v.cloneElement)(n,{ref:r})}X.propTypes={id:O.a.oneOfType([O.a.number,O.a.string]).isRequired};var $=Object(Z.a)(null)(X);function ee(e){var t,n=e.answer,c=(Object(a.useSelector)((function(e){return Object(J.z)(e,null==n?void 0:n.id)}))||{}).result;if(!c)return null;var o=null==n||null===(t=n.paidInfo)||void 0===t?void 0:t.hasPurchased,i=c.btnInfo,l=c.zaInfo;return Object(r.c)(r.a,{children:[Object(r.b)($,{id:n.id,children:Object(r.b)("div",{})}),!o&&i&&Object(r.b)(Q,{btnInfo:i,zaInfo:l}),Object(r.b)(q,{className:"AnswerItem-GoodsCard",result:c,hasPurchased:o})]})}var te=Object(Z.a)(null)((function(e){var t=e.answer;return"paid"===(null==t?void 0:t.answerType)?Object(r.b)(ee,{answer:t}):null})),ne=n(59),re=n.n(ne);function ae(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ce(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw c}}}}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var oe=function(e){return function(e){if(!window)return null;try{var t=document.createElement("div");t.innerHTML=e;var n,r=Array.from(t.childNodes),a=re()(r,3),c=a[0].nodeValue,o=a[1],i=o.innerText,l=o.attributes,s=a[2].nodeValue,u={},d=ae(l);try{for(d.s();!(n=d.n()).done;){var f=n.value;u[f.name]=f.value}}catch(e){d.e(e)}finally{d.f()}return c&&i&&s?{prefixText:c,content:i,status:s,linkInfo:{name:"a",attr:u}}:null}catch(e){return null}}(e)},ie=function(e){var t=e.content;t=void 0===t?[]:t;var n=re()(t,2),r=n[0],a=n[1],c=e.className,o=e.onClick;return g.a.createElement("div",{className:w()("KfeCollection-CertainEndEllipsis",c),onClick:o},g.a.createElement("div",{className:"KfeCollection-CertainEndEllipsis-start"},r),g.a.createElement("div",{className:"KfeCollection-CertainEndEllipsis-end"},a))},le=function(e){var t=e.contentName,n=e.fallbackContent,r=e.onClick,a=Object(v.useMemo)((function(){return oe(t)}),[t]);if(null===a)return n;var c=a.prefixText,o=a.content,i=a.status,l=a.linkInfo,s=l.name,u=g.a.createElement(g.a.Fragment,null,c,g.a.createElement(s,l.attr,o.slice(0,-1))),d=g.a.createElement(g.a.Fragment,null,g.a.createElement(s,l.attr,o.slice(-1)),i);return g.a.createElement(ie,{onClick:r,content:[u,d],className:"KfeCollection-PaidContentNameCertainEndEllipsis"})};var se=function(e){var t=e.introCard,n=e.RichTextComponent,r=e.className,a=e.zaInfo,c=void 0===a?{}:a,o=e.handleTrack,i=t.statement,l=t.description,s=t.contentName,u=t.authorDesc,d=Object(S.i)().trackEvent,f=function(e,t){var n=e.target,r=e.target,a=r.text,c=r.href,i=5325===t?"userName":"bookTitle";"A"===r.tagName&&(E.a.trackEvent(n,{id:t,action:"OpenUrl"},{button:{text:a},link:{url:c}}),d({action:"OpenUrl",eventType:"Click",elementLocation:{type:"Text",block:{blockText:i},content:{type:T.e.paidAnswer}}},{link:{url:c}})),o&&o(e,c)};return g.a.createElement("section",{className:w()("KfeCollection-IntroCard",r),"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[c]}})},!!i&&g.a.createElement("p",null,i),!!l&&g.a.createElement("p",null,l),(!!i||!!l)&&g.a.createElement("p",{className:"KfeCollection-IntroCard-spacing"}),g.a.createElement(le,{contentName:s,onClick:function(e){return f(e,5326)},fallbackContent:g.a.createElement("p",{onClick:function(e){return f(e,5326)},className:"KfeCollection-IntroCard-contentName",dangerouslySetInnerHTML:{__html:s}})}),n?g.a.createElement(n,{className:"KfeCollection-IntroCard-authorDesc",html:u,onClick:function(e){return f(e,5325)}}):g.a.createElement("p",{onClick:function(e){return f(e,5325)},className:"KfeCollection-IntroCard-authorDesc",dangerouslySetInnerHTML:{__html:u}}))},ue=n(1379),de=n(1110),fe=function(e){return g.a.createElement(de.a,Object.assign({viewBox:"0 0 140 43"},e),g.a.createElement("defs",null,g.a.createElement("rect",{id:"zhimg_ic_primelabel_01@2x-a",width:"70",height:"30",x:"0",y:"0"})),g.a.createElement("g",{fillRule:"evenodd",transform:"translate(0 -6)"},g.a.createElement("path",{fillRule:"nonzero",d:"M80.0023638,2.63706979 L129.732029,30.638653 C135.976314,34.154746 139.822785,40.6523917 139.822785,47.6843672 L139.822785,103.687744 C139.822785,110.719509 135.976314,117.217365 129.732029,120.733248 L80.0023638,148.734831 C73.758079,152.250924 66.0649216,152.250924 59.8206368,148.734831 L10.0909714,120.733248 C3.84668657,117.217365 -7.10542736e-14,110.719509 -7.10542736e-14,103.687744 L-7.10542736e-14,47.6843672 C-7.10542736e-14,40.6523917 3.84668657,34.154746 10.0909714,30.638653 L59.8206368,2.63706979 C66.0649216,-0.879023264 73.758079,-0.879023264 80.0023638,2.63706979 Z M62.8214584,21.9369801 L62.4917192,22.1167713 L25.9257887,42.6512656 C21.4364336,45.1724346 18.6325361,49.7839786 18.5101354,54.8082708 L18.5059568,55.1514561 L18.5059568,96.2205991 C18.5059568,101.262635 21.2100909,105.930346 25.6223198,108.545528 L25.9257887,108.720635 L62.4917192,129.25513 C66.9737863,131.772206 72.4710741,131.832136 77.0014851,129.434921 L77.3312243,129.25513 L113.897155,108.720635 C118.38651,106.199617 121.190256,101.587929 121.31265,96.5637746 L121.316828,96.2205991 L121.316828,55.1514561 C121.316828,50.1092692 118.612846,45.4417025 114.200623,42.826383 L113.897155,42.6512656 L77.3312243,22.1167713 C72.8491571,19.5996952 67.3518694,19.5397648 62.8214584,21.9369801 Z M69.2442049,35.8512397 L88.2394468,68.1217272 L103.868354,54.7872625 L103.868354,94.6758324 C103.868354,97.7547043 101.333778,100.250689 98.2071383,100.250689 L40.2839921,100.24974 C37.1573717,100.249699 34.6227848,97.7537776 34.6227848,94.674925 L34.6227848,54.7872625 L50.2512033,68.1217272 L69.2442049,35.8512397 Z",mask:"url(#zhimg_ic_primelabel_01@2x-b)",opacity:".54"})))};fe.defaultProps={name:"PrivilegeLabel"};var pe=fe,he=function(e){var t=e.data,n=e.className,r=t||{},a=r.vipText,c=r.worthText,o=r.cardColor;return 0===(void 0===o?0:o)?null:g.a.createElement("div",{className:w()("KfeCollection-Privilege",n)},g.a.createElement(ue.a,{className:"KfeCollection-Privilege-vipIcon"}),g.a.createElement("div",{className:"KfeCollection-Privilege-content"},g.a.createElement("span",{className:"KfeCollection-Privilege-vipText"},a),g.a.createElement("span",null," ".concat(c))),g.a.createElement(pe,{className:"KfeCollection-Privilege-label"}))},be=function(e){var t=e.data,n=e.className,r=t||{},a=r.worthText,c=r.cardColor;return 2!==(void 0===c?0:c)?null:g.a.createElement("div",{className:w()("KfeCollection-OrdinaryLabel",n)},g.a.createElement("div",{className:"KfeCollection-OrdinaryLabel-content"},a))};function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var a=m()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ge=function(e){f()(n,e);var t=me(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"render",value:function(){var e=this.props.result,t=e.introCard,n=e.vipWorthInfo,r=(n||{}).cardColor;return g.a.createElement("div",{className:"KfeCollection-AnswerTopCard-Container"},2===r?g.a.createElement(be,{data:n}):g.a.createElement(he,{data:n,className:"KfeCollection-AnswerTopCard-Privilege"}),t?g.a.createElement(se,{introCard:t}):null)}}]),n}(g.a.Component);ve(ge,"propTypes",{className:O.a.string,result:O.a.object.isRequired}),ve(ge,"defaultProps",{result:{articleDesc:{},vipWorthInfo:{},goodsCard:{},btnInfo:{},progressInfo:{},zaInfo:{}},extra:{ua:{}}});var ye=ge,Oe=function(e){var t=e.answer,n=Object(a.useSelector)((function(e){return Object(J.z)(e,null==t?void 0:t.id)}))||{},c=n.isRequesting,o=n.error,i=n.result,l=Boolean(!c&&!o&&!i),s=Object(a.useDispatch)();return Object(v.useEffect)((function(){l&&s(Object(J.v)(t.id))}),[l,s,t.id]),Object(r.b)(ye,{result:i})},je=Object(Z.a)(null)((function(e){var t=e.answer;return"paid"===(null==t?void 0:t.answerType)?Object(r.b)(Oe,{answer:t}):null}))},1229:function(e,t,n){"use strict";var r=n(2),a=n.n(r),c=n(18),o=function(e){return a.a.createElement(c.a,e,a.a.createElement("path",{d:"M5 14a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z",fillRule:"evenodd"}))};o.defaultProps={name:"Dots"},t.a=o},1232:function(e,t,n){"use strict";var r=n(2),a=n.n(r),c=n(18),o=function(e){return a.a.createElement(c.a,e,a.a.createElement("path",{d:"M12 13L8.285 9.218a.758.758 0 0 0-1.064 0 .738.738 0 0 0 0 1.052l4.249 4.512a.758.758 0 0 0 1.064 0l4.246-4.512a.738.738 0 0 0 0-1.052.757.757 0 0 0-1.063 0L12.002 13z",fillRule:"evenodd"}))};o.defaultProps={name:"ArrowDown"},t.a=o},1233:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return o}));var r=n(41),a=n(1090),c=function(e,t){switch(e){case"answer":return"https://www.zhihu.com/answer/".concat(t);case"book":return"https//www.zhihu.com/pub/book/".concat(t);case"article":return"https://zhuanlan.zhihu.com/p/".concat(t);case"live":return"https://www.zhihu.com/lives/".concat(t);case"remix_album":case"remix":return"https://www.zhihu.com/remix/albums/".concat(t);case"pin":return"https://www.zhihu.com/pin/".concat(t);case"question":return"https://www.zhihu.com/question/".concat(t);case"zvideo":return"https://www.zhihu.com/zvideo/".concat(t);default:return""}},o=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];try{if(!e||"string"!=typeof e)return"";if(!t||"object"!=typeof t)return e;var c=e.split("#"),o=Object(r.a)(c,2),i=o[0],l=o[1],s=void 0===l?"":l,u=i.split("?"),d=Object(r.a)(u,2),f=d[0],p=d[1],h=Object(a.parse)(p),b=n?Object.assign({},h,t):Object.assign({},t,h),m=function(e,t){return t?e+t:""};return f+m("?",Object(a.stringify)(b))+m("#",s)}catch(t){return console.error(t),e}}},1234:function(e,t,n){"use strict";var r=n(2),a=n.n(r),c=n(18),o=function(e){return a.a.createElement(c.a,e,a.a.createElement("path",{d:"M2 18.242c0-.326.088-.532.237-.896l7.98-13.203C10.572 3.57 11.086 3 12 3c.915 0 1.429.571 1.784 1.143l7.98 13.203c.15.364.236.57.236.896 0 1.386-.875 1.9-1.955 1.9H3.955c-1.08 0-1.955-.517-1.955-1.9z",fillRule:"evenodd"}))};o.defaultProps={name:"TriangleUp"},t.a=o},1253:function(e,t,n){},1267:function(e,t,n){"use strict";var r=n(2),a=n.n(r),c=n(18),o=function(e){return a.a.createElement(c.a,e,a.a.createElement("path",{d:"M2.224 21.667s4.24-1.825 4.788-2.056C15.029 23.141 22 17.714 22 11.898 22 6.984 17.523 3 12 3S2 6.984 2 11.898c0 1.86.64 3.585 1.737 5.013-.274.833-1.513 4.756-1.513 4.756zm5.943-9.707c.69 0 1.25-.569 1.25-1.271a1.26 1.26 0 0 0-1.25-1.271c-.69 0-1.25.569-1.25 1.27 0 .703.56 1.272 1.25 1.272zm7.583 0c.69 0 1.25-.569 1.25-1.271a1.26 1.26 0 0 0-1.25-1.271c-.69 0-1.25.569-1.25 1.27 0 .703.56 1.272 1.25 1.272z",fillRule:"evenodd"}))};o.defaultProps={name:"WeChat"},t.a=o},1268:function(e,t,n){"use strict";var r=n(2),a=n.n(r),c=n(18),o=function(e){return a.a.createElement(c.a,e,a.a.createElement("path",{fill:"#FB6622",d:"M15.518 3.06c8.834-.854 7.395 7.732 7.394 7.731-.625 1.439-1.673.309-1.673.309.596-7.519-5.692-6.329-5.692-6.329-.898-1.067-.029-1.711-.029-1.711zm4.131 6.985c-.661 1.01-1.377.126-1.376.126.205-3.179-2.396-2.598-2.396-2.598-.719-.765-.091-1.346-.091-1.346 4.882-.551 3.863 3.818 3.863 3.818zM5.317 7.519s4.615-3.86 6.443-1.328c0 0 .662 1.08-.111 2.797.003-.003 3.723-1.96 5.408.159 0 0 .848 1.095-.191 2.649 0 0 2.918-.099 2.918 2.715 0 2.811-4.104 6.44-9.315 6.44-5.214 0-8.026-2.092-8.596-3.102 0 0-3.475-4.495 3.444-10.33zm10.448 7.792s.232-4.411-5.71-4.207c-6.652.231-6.579 4.654-6.579 4.654.021.39.097 3.713 5.842 3.713 5.98 0 6.447-4.16 6.447-4.16zm-9.882.86s-.059-3.632 3.804-3.561c3.412.06 3.206 3.165 3.206 3.165s-.026 2.979-3.684 2.979c-3.288 0-3.326-2.583-3.326-2.583zm2.528 1.037c.672 0 1.212-.447 1.212-.998 0-.551-.543-.998-1.212-.998-.672 0-1.215.447-1.215.998 0 .551.546.998 1.215.998z",fillRule:"evenodd"}))};o.defaultProps={name:"Weibo"},t.a=o},1276:function(e,t,n){"use strict";var r=n(2),a=n.n(r),c=n(18),o=function(e){return a.a.createElement(c.a,e,a.a.createElement("path",{d:"M20.044 3H3.956C2.876 3 2 3.517 2 4.9c0 .326.087.533.236.896L10.216 19c.355.571.87 1.143 1.784 1.143s1.429-.572 1.784-1.143l7.98-13.204c.149-.363.236-.57.236-.896 0-1.386-.876-1.9-1.956-1.9z",fillRule:"evenodd"}))};o.defaultProps={name:"TriangleDown"},t.a=o},1290:function(e,t,n){"use strict";var r=n(2),a=n.n(r),c=n(18),o=function(e){return a.a.createElement(c.a,e,a.a.createElement("path",{d:"M2 8.437C2 5.505 4.294 3.094 7.207 3 9.243 3 11.092 4.19 12 6c.823-1.758 2.649-3 4.651-3C19.545 3 22 5.507 22 8.432 22 16.24 13.842 21 12 21 10.158 21 2 16.24 2 8.437z",fillRule:"evenodd"}))};o.defaultProps={name:"Heart"},t.a=o},1301:function(e,t,n){"use strict";var r=n(31),a=n(14),c=n(15),o=n(16),i=n(17),l=n(8),s=n(1),u=n(3),d=n.n(u),f=n(2),p=n(25),h=n(900),b=n(943),m=n(1325),v=n(166),g=n(28),y=n(119),O=n(24),j=n(308);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var k=function(e){Object(o.a)(n,e);var t=C(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).load=function(){var t=e.props,n=t.dispatch,r=t.id;n(Object(j.b)(r))},e.track=function(){var t,n=e.props.column;e.hoverCardElement&&n&&(g.a.setModule(e.hoverCardElement,{module:"ColumnItem"},{card:{content:{type:"Column",token:n.id,item_num:n.articlesCount,follower_num:n.followers,publish_timestamp:1e3*n.updated,author_member_hash_id:null===(t=n.author)||void 0===t?void 0:t.id}}}),g.a.trackCardShow(e.hoverCardElement))},e.handleOpen=function(){e.load(),e.track()},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.toggler,a=t.column,c=t.id,o=t.isLoading,i=t.onRef,l=Object(r.a)(t,["toggler","column","id","isLoading","onRef"]),u=a||{},d=u.title,f=u.intro,p=u.itemsCount,g=u.voteupCount,j=u.lastArticle,C=u.articlesCount,k=u.followers,w=j||{},S=w.title,x=w.created,N="".concat(O.E,"/column/").concat(c);return Object(s.c)(b.b,Object.assign({toggler:n,preventCloseOnTarget:!0,isLoading:o,onOpen:this.handleOpen,size:"large"},l,{onRef:function(t){i&&"function"==typeof i&&i(t),e.hoverCardElement=t},children:[Object(s.b)(b.a,{title:Object(s.b)("a",{target:"_black",href:N,children:d})}),f,j&&Object(s.c)("div",{children:[Object(s.b)(m.a,{text:!0,center:!0})," 最后更新",Object(s.b)("span",{className:"HoverCard-separate",children:" | "}),S,Object(s.c)("span",{children:["（",Object(v.toRelativeString)(x),"）"]})]}),Object(s.b)("div",{children:Object(s.c)(h.a,{children:[Object(s.b)(h.a.Item,{tag:y.a,preset:"plain",a:!0,to:N,name:p>=0?"内容":"文章",value:null!=p?p:C}),Object(s.b)(h.a.Item,{tag:y.a,preset:"plain",a:!0,to:N,name:g>=0?"赞同":"关注",value:null!=g?g:k})]})})]}))}}]),n}(f.Component);k.contextTypes={currentUser:d.a.object},t.a=Object(p.connect)((function(e,t){var n=t.id,r=e.entities.columns,a=e.loading.local;return{column:r[n],isLoading:Boolean(a["column/".concat(n)])}}))(k)},1311:function(e,t,n){"use strict";var r=n(31),a=n(14),c=n(15),o=n(16),i=n(17),l=n(8),s=n(1),u=n(3),d=n.n(u),f=n(2),p=n(19),h=n(10),b=n.n(h),m=n(25),v=n(167),g=n(93),y=n.n(g),O=n(1301),j=n(60),C=n(24);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var w=function(e){Object(o.a)(n,e);var t=k(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.isMobile,a=t.column,c=a.title,o=a.imageUrl,i=a.id,l=t.avatar,u=t.avatarProps,d=t.noHoverCard,f=t.style,p=t.className,h=t.children,m=Object(r.a)(t,["isMobile","column","avatar","avatarProps","noHoverCard","style","className","children"]),g=void 0===d?n:d;return e=l?Object(s.b)(v.a,Object.assign({url:o,alt:c},u)):h||c,g||(e=Object(s.b)(O.a,{toggler:e,id:i})),Object(s.b)("a",Object.assign({style:f,className:b()("ColumnLink",p),href:"".concat(C.E,"/column/").concat(i)},y()(m,["dispatch"]),{children:e}))}}]),n}(f.Component);w.propTypes={column:d.a.object.isRequired,avatar:d.a.bool,avatarProps:d.a.object,noHoverCard:d.a.bool,style:d.a.object,className:d.a.string,children:d.a.node},w.defaultProps={avatar:!1},t.a=Object(p.compose)(Object(m.connect)((function(e){return{isMobile:Object(j.d)(e,{includeTablet:!0})}})))(w)},1325:function(e,t,n){"use strict";var r=n(2),a=n.n(r),c=n(18),o=function(e){return a.a.createElement(c.a,e,a.a.createElement("path",{d:"M12 2C6.478 2 2 6.498 2 12.013 2 17.527 6.478 22 12 22s10-4.473 10-9.987C22.025 6.498 17.547 2 12 2zm3.575 14.693s-3.677-2.45-4.135-2.8c-.458-.349-.458-.813-.458-.813l.005-5.66c0-.56.458-1.017 1.018-1.017s1.017.457 1.017 1.017l-.004 5.152 3.727 2.495c.458.305.62.99.27 1.44-.35.45-1.004.487-1.44.186z",fillRule:"evenodd"}))};o.defaultProps={name:"Time"},t.a=o},1327:function(e,t,n){"use strict";var r=n(2),a=n.n(r),c=n(18),o=function(e){return a.a.createElement(c.a,e,a.a.createElement("path",{d:"M10.241 19.313a.97.97 0 0 0-.77.2 7.908 7.908 0 0 1-3.772 1.482.409.409 0 0 1-.38-.637 5.825 5.825 0 0 0 1.11-2.237.605.605 0 0 0-.227-.59A7.935 7.935 0 0 1 3 11.25C3 6.7 7.03 3 12 3s9 3.7 9 8.25-4.373 9.108-10.759 8.063z",fillRule:"evenodd"}))};o.defaultProps={name:"Comment"},t.a=o},1328:function(e,t,n){"use strict";var r=n(2),a=n.n(r),c=n(18),o=function(e){return a.a.createElement(c.a,e,a.a.createElement("path",{d:"M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z",fillRule:"evenodd"}))};o.defaultProps={name:"Like"},t.a=o},1333:function(e,t,n){"use strict";var r=n(1),a=n(10),c=n.n(a);t.a=function(e){var t=e.className;return Object(r.b)("span",{className:c()("Bull",t),children:" · "})}},1374:function(e,t,n){},1379:function(e,t,n){"use strict";var r=n(2),a=n.n(r),c=n(18),o=function(e){return a.a.createElement(c.a,e,a.a.createElement("defs",null,a.a.createElement("linearGradient",{id:"id-3811055512-a",x1:"11.015%",x2:"87.655%",y1:"18.594%",y2:"96.14%"},a.a.createElement("stop",{offset:"0%",stopColor:"#F2D9B6"}),a.a.createElement("stop",{offset:"100%",stopColor:"#BF8B43"}))),a.a.createElement("path",{fill:"url(#id-3811055512-a)",d:"M21.351 4.858A3.115 3.115 0 0 1 22.93 7.56v8.88a3.115 3.115 0 0 1-1.578 2.702l-7.774 4.44a3.185 3.185 0 0 1-3.154 0l-7.774-4.44A3.115 3.115 0 0 1 1.07 16.44V7.56c0-1.115.602-2.145 1.578-2.702l7.774-4.44a3.185 3.185 0 0 1 3.154 0l7.774 4.44zm-2.475 1.904L13.16 3.507a2.347 2.347 0 0 0-2.32 0L5.124 6.762a2.283 2.283 0 0 0-1.16 1.982v6.512c0 .817.442 1.573 1.16 1.982l5.716 3.255a2.347 2.347 0 0 0 2.32 0l5.716-3.255a2.283 2.283 0 0 0 1.16-1.982V8.744c0-.817-.442-1.573-1.16-1.982zm-9.874 4.13L12 5.76l2.998 5.131 2.466-2.12v6.343c0 .49-.4.886-.893.886H7.429a.89.89 0 0 1-.893-.887V8.771l2.466 2.12z"}))};o.defaultProps={name:"VIP"},t.a=o},1386:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return v}));var r=n(14),a=n(15),c=n(16),o=n(17),i=n(8),l=n(1),s=n(2),u=n(82),d=n(304),f=n.n(d),p=n(1387),h=n(1388);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var m=Object(s.createContext)({}),v=function(e){Object(c.a)(n,e);var t=b(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).handleNotLogin=function(t,n){Object(h.b)(e.props.router.location.pathname,n),t()},e.handleIsSilenced=function(e){return u.a.dispatch("ui/showToast",{icon:"fail",text:"已在该圈子被禁言，无法进行该操作"}).then(e,e)},e.handleIsReset=function(t){var n=e.props,r=n.loginMask,a=(r=void 0===r?{}:r).id,c=n.router,o=n.ua,i=c.params.id,l=c.location.pathname;return Object(p.a)({title:"提示",content:"圈子帐号存在异常，请修改圈子内的个人信息",affirm:"去修改",dismiss:"取消"}).then((function(e){if(e){var n=!l.match(/\/club\/\d+\/post\/\d+$/);Object(h.c)(i,a,{router:c,ua:o,isSoft:n})}t()}),t)},e.handleToAuthenticatePage=function(t){var n=e.props.ua;return Object(p.a)({title:"提示",content:"你的知乎帐号未实名认证，暂时无法进行该操作",affirm:"去实名认证",dismiss:"取消"}).then((function(e){if(e){var r="https://www.zhihu.com/authenticate/select";n.ZhihuHybrid?u.a.dispatch("base/openURL",{url:r}):location.href=r}t()}),t)},e.handleNotNormal=function(e){u.a.dispatch("ui/showToast",{icon:"fail",text:"知乎帐号存在异常，无法进行该操作"}).then(e,e)},e.authRequired=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.a,r=arguments.length>2?arguments[2]:void 0;return function(){var a=e.props,c=a.currentUser,o=(c=void 0===c?{}:c).userType,i=c.accountStatus,l=void 0===i?[]:i,s=c.isRealname,u=a.loginMask,d=(u=void 0===u?{}:u).maskStatus,f=a.ua,p=d||{},h=p.isSilenced,b=p.isReset;o&&"guest"!==o?h&&!r?e.handleIsSilenced(n):b&&!r?e.handleIsReset(n):l.length>0?e.handleNotNormal(n):s?t.apply(void 0,arguments):e.handleToAuthenticatePage(n):e.handleNotLogin(n,f)}},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.currentUser,n=e.loginMask,r=function(e){var t=e||{},n=t.accountStatus,r=void 0===n?[]:n,a=t.isRealname;return e&&"guest"!==e.userType&&0===r.length&&a}(t),a=function(e){var t=(e||{}).maskStatus,n=(t=void 0===t?{}:t).isSilenced,r=t.isReset;return!n&&!r}(n),c=Boolean(null==t?void 0:t.urlToken);return Object(l.b)(m.Provider,{value:{authRequired:this.authRequired,isUserAllowed:r,isMaskAllowed:a,isCurrentUserLoaded:c},children:this.props.children})}}]),n}(s.Component)},1387:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(82),a=(n(304),function(e){var t=e.title,n=e.affirm,a=void 0===n?"确定":n,c=e.dismiss,o=e.content,i=o?{content:o}:{};return r.a.supportsAction("ui/showAlert").then((function(e){return e?r.a.dispatch("ui/showAlert",Object.assign({title:t,affirm:a,dismiss:c},i)):Promise.reject()})).then((function(e){return"AFFIRM"===e.result})).catch((function(){var e=o?t+"\n"+o:t;return c?window.confirm(e):(window.alert(e),!0)}))})},1388:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return u}));n(1090);var r=n(82),a=n(407),c=n.n(a),o=(n(312),n(907)),i=function(e,t){var n,r=t.router,a=((null==r||null===(n=r.location)||void 0===n?void 0:n.query)||{}).club_source;return Object(o.a)(e,Object.assign({},t,{query:Object.assign({},null==t?void 0:t.query,{club_source:a})}))},l=function(){return c()("zhihu:/".concat(location.pathname))};function s(e,t,n){var r="/club/".concat(e,"/profile/").concat(t,"/edit");return i(r,n)}function u(e,t){r.a.supportsAction("account/showLoginDialog").then((function(n){n?r.a.dispatch("account/showLoginDialog",Object.assign({},t.iOS&&{next:"zhihu:/".concat(e)})):location.href="https://www.zhihu.com/signin?next=".concat(encodeURIComponent(e))}))}},1394:function(e,t,n){"use strict";n.d(t,"a",(function(){return x})),n.d(t,"b",(function(){return E}));var r=n(31),a=n(41),c=n(1),o=n(2),i=n(25),l=n(304),s=n.n(l),u=n(82),d=n(1388),f=n(10),p=n.n(f),h=n(28),b=n(772),m=n(77),v=n(222),g=n(1029),y=function(){var e=Object(i.useSelector)((function(e){var t,n;return null===(t=e.env)||void 0===t||null===(n=t.ctx)||void 0===n?void 0:n.path}));return Boolean(e.match(/\/club\/\d+\/post\/\d+$/))},O=function(e){var t=e.handleCloseModal,n=e.clubApplicationModalShown,r=e.verifyQuestion,l=e.desc,s=e.handleSubmit,u=e.placeholder,d=void 0===u?"请输入验证回答答案":u,f=e.buttonText,O=void 0===f?"提交":f,j=e.title,C=void 0===j?"申请加入":j,k=e.clubId,w=y(),S=Object(o.useState)(""),x=Object(a.a)(S,2),N=x[0],R=x[1],E=Object(o.useRef)([0,0]),T=Object(i.useSelector)((function(e){return e.env.userAgent.ZhihuHybrid}));Object(o.useEffect)((function(){n&&k&&h.a.trackCardShow(null,{id:8115,name:r},{module:[{card:{content:[{id:k}]}}]})}),[n,k,r]);var I=Object(o.useCallback)((function(){k&&h.a.trackEvent(null,{id:8116,action:"Click",name:r},{module:[{card:{content:[{id:k}]}}]}),s(N)}),[r,k,s,N]),P=Object(o.useCallback)((function(e){return R(e.currentTarget.value)}),[R]),L=Object(o.useCallback)((function(){E.current=[window.scrollX,window.scrollY]}),[]),A=Object(o.useCallback)((function(){if(T){var e=Object(a.a)(E.current,2),t=e[0],n=e[1];window.scrollTo(t,n)}}),[T]);return Object(c.b)(m.b,{className:p()("ClubApplicationModal-modal",{"ClubApplicationModal-modalWithDetailPage":w}),onClose:t,closeButton:Object(c.b)(b.a,{size:24,className:"ClubApplicationModal-modalCloseButton",onClick:t}),children:n&&Object(c.c)(v.e,{zaType:"Popup",zaBlock:"ClubApplication",className:"ClubApplicationModal-modalWrapper",onClick:function(e){e.stopPropagation()},children:[Object(c.b)("p",{className:"ClubApplicationModal-title",children:C}),Object(c.b)("p",{className:"ClubApplicationModal-desc",dangerouslySetInnerHTML:{__html:r?"验证问题：".concat(r):l}}),Object(c.b)(g.a,{className:"ClubApplicationModal-answer",placeholder:d,value:N,onChange:P,onFocus:L,onBlur:A,large:!0,maxLength:100,autoFocus:!0}),Object(c.c)("p",{className:"ClubApplicationModal-count",children:[N.length,"/100"]}),Object(c.b)(v.a,{as:"button",zaType:"Button",zaBlock:"SubmitClubApplication",zaText:!0,className:p()("ClubApplicationModal-button",{"ClubApplicationModal-buttonWithSave":N}),disabled:!N,onClick:I,children:O})]})})},j=function(){var e=Object(i.useSelector)((function(e){var t,n;return null===(t=e.env)||void 0===t||null===(n=t.ctx)||void 0===n?void 0:n.path}));return Boolean(e.match(/\/club\/feeds$/))},C=function(){var e=Object(i.useSelector)((function(e){var t,n;return null===(t=e.env)||void 0===t||null===(n=t.ctx)||void 0===n?void 0:n.path}));return Boolean(e.match(/\/pin\/\d+$/))},k=n(1386),w=n(1487).default,S=Object(o.createContext)({}),x=function(e){var t,n=e.theme,r=e.isJoined,i=e.handleJoinClub,l=e.children,d=e.joinType,f=e.verifyQuestion,p=e.requestJoinClub,h=e.showApplicationModal,b=e.clubId,m=e.onSubmitSuccess,v=y(),g=j(),C=Object(o.useState)(!1),k=Object(a.a)(C,2),x=k[0],N=k[1],R=(t=Object(o.useRef)(s.a),[Object(o.useCallback)((function(){t.current(),t.current=s.a}),[]),Object(o.useCallback)((function(e){t.current=e}),[])]),E=Object(a.a)(R,2),T=E[0],I=E[1],P=Object(o.useCallback)((function(){g||N(!0)}),[g]),L=Object(o.useState)("true"===h),A=Object(a.a)(L,2),_=A[0],M=A[1],z=Object(o.useCallback)((function(){return N(!1)}),[]),D=Object(o.useCallback)((function(e){e.stopPropagation(),M(!1)}),[M]),B=Object(o.useCallback)((function(){"all"===d?i().then((function(){z(),T()})):(z(),M(!0))}),[z,T,i,d,M]),V=Object(o.useCallback)((function(e){p(e).then((function(){M(!1),u.a.dispatch("ui/showToast",{icon:"success",text:"提交成功"}),m&&m(e)}))}),[m,p]),F=Object(o.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isReaction,a=t.isJoinButton;return function(){for(var t=arguments.length,c=new Array(t),o=0;o<t;o++)c[o]=arguments[o];r?e.apply(void 0,c):a?"verify"===d?M(!0):e.apply(void 0,c):n?"verify"===d?P():e.apply(void 0,c):("verify"===d||I((function(){return e.apply(void 0,c)})),P())}}),[r,d,P,I,M]);return Object(c.c)(S.Provider,{value:{joinRequired:F,isJoined:r,openModal:P},children:[l,Object(c.b)(w,{handleCloseModal:z,maskBackground:"dark"===n?"https://zhstatic.zhihu.com/heifetz/club/images/zhimg_circle_ic_dialog_normal_night.png":"https://zhstatic.zhihu.com/heifetz/club/images/zhimg_circle_ic_dialog_normal.png",title:"加入圈子",content:"all"===d?"加入圈子才能和圈内好友互动和发帖":"该圈子设置了验证问题，需要申请才可加入",handleRead:B,buttonContent:"all"===d?"加入":"申请加入圈子",isPostDetail:v,maskModalShown:x}),Object(c.b)(O,{isPostDetail:v,clubApplicationModalShown:_,verifyQuestion:f,handleSubmit:V,handleCloseModal:D,clubId:b})]})},N=function(e){return e.env.userAgent.Zhihu},R=function(e){return function(){return e.apply(void 0,arguments)}},E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.oia,a=void 0===n||n,c=Object(r.a)(t,["oia"]),l=Object(i.useSelector)(N),s=C(),u=Object(o.useContext)(k.a),f=u.authRequired,p=Object(o.useContext)(S),h=p.joinRequired;return!l&&a?d.a:s?R(e):f(h(e,c))}},1433:function(e,t,n){"use strict";function r(e){try{return JSON.parse(e)}catch(e){return null}}n.d(t,"a",(function(){return r}))},1486:function(e,t,n){"use strict";var r=n(1),a=n(2),c=n(25),o=n(34),i=n(37),l=n(357),s=n(1386),u=n(1394),d=n(982);t.a=Object(o.withRouter)((function(e){var t=e.clubId,n=e.router,o=e.children,f=e.location.query.showApplicationModal,p=e.onSubmitSuccess,h=Object(c.useSelector)((function(e){return e.env.theme})),b=Object(c.useSelector)(i.b),m=Object(l.b)(),v=Object(c.useSelector)((function(e){return e.entities.clubs[t]}))||{},g=v.joinType,y=v.verifyQuestion,O=v.isJoined,j=v.loginMask,C=Object(c.useDispatch)(),k=Object(a.useCallback)((function(){return C(Object(d.b)(t))}),[t,C]),w=Object(a.useCallback)((function(e){return C(Object(d.d)(t,e))}),[t,C]);return Object(r.b)(s.b,{currentUser:b,loginMask:j,router:n,ua:m,children:Object(r.b)(u.a,{showApplicationModal:f,handleJoinClub:k,isJoined:O,theme:h,joinType:g,verifyQuestion:y,requestJoinClub:w,clubId:t,onSubmitSuccess:p,children:o})})}))},1487:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(77),c=n(29);t.default=function(e){var t=e.handleCloseModal,n=e.maskModalShown,o=e.handleRead,i=e.buttonContent,l=e.content,s=e.title;return Object(r.b)(a.b,{title:s,onClose:t,subtitle:l,className:"ClubModal",children:n&&Object(r.b)(c.c,{preset:"primary",color:"blue",onClick:o,css:{width:"100%"},children:i})})}},1514:function(e,t,n){"use strict";var r=n(31),a=n(1),c=n(25),o=n(28),i=n(222),l=n(82),s=n(787),u=n(35),d=n.n(u),f=n(982),p=n(1394),h=n(10),b=n.n(h),m=n(1387);t.a=function(e){var t=e.clubId,n=e.className,u=e.handleJoinClubBefore,h=e.handleJoinClubAfter,v=e.clickId,g=e.viewProps,y=void 0===g?{}:g,O=e.zaExtra,j=void 0===O?{}:O,C=e.oia,k=void 0===C||C,w=e.plus,S=e.joinText,x=Object(r.a)(e,["clubId","className","handleJoinClubBefore","handleJoinClubAfter","clickId","viewProps","zaExtra","oia","plus","joinText"]),N=Object(c.useDispatch)(),R=Object(c.useSelector)((function(e){return e.entities.clubs[t]})),E=R.joinType,T=R.isJoined,I=Object(p.b)((function(e){v&&o.a.trackEvent(e.currentTarget,Object.assign({action:"Click",id:v},y),j),"all"===E&&N(Object(f.b)(t)).then((function(){l.a.dispatch("ui/showToast",{icon:"success",text:"加入成功"}),h&&h(),d.a.get("club:disablePushModal")||l.a.dispatch("base/getNotificationConfig").then((function(e){e.enabled||d.a.set("club:firstJoinClub",!0)}))}))}),{isJoinButton:!0,oia:k}),P=!T&&"verify"===E;return Object(a.c)(i.a,Object.assign({zaText:!0,zaType:"Button",as:"button",zaAction:T?"UnFollow":"Follow",className:b()(n,{Joined:T,needVerify:P}),onClick:function(e){u&&u(e),e.stopPropagation(),e.preventDefault(),T?(v&&o.a.trackEvent(e.currentTarget,Object.assign({action:"Cancel",id:v},y),j),Object(m.a)({title:"退出圈子即取消管理员资格，并且无法参与互动和收到相关消息，是否退出？",affirm:"确认",dismiss:"取消"}).then((function(e){e&&N(Object(f.c)(t))}))):I(e)}},x,{children:[T&&"已",P&&"申请",w&&!T&&"verify"!==E&&Object(a.b)(s.a,{className:"JoinButton-Icon",center:!0,text:!0}),S||"加入"]}))}},1520:function(e,t,n){"use strict";var r=n(2),a=n.n(r),c=n(18),o=function(e){return a.a.createElement(c.a,e,a.a.createElement("g",{fill:"none",fillRule:"evenodd"},a.a.createElement("path",{fill:"#0F88EB",d:"M2.64 13.39c1.068.895 1.808 2.733 1.66 4.113l.022-.196c-.147 1.384.856 2.4 2.24 2.278l-.198.016c1.387-.122 3.21.655 4.083 1.734l-.125-.154c.876 1.084 2.304 1.092 3.195.027l-.127.152c.895-1.068 2.733-1.808 4.113-1.66l-.198-.022c1.386.147 2.402-.856 2.279-2.238l.017.197c-.122-1.388.655-3.212 1.734-4.084l-.154.125c1.083-.876 1.092-2.304.027-3.195l.152.127c-1.068-.895-1.808-2.732-1.66-4.113l-.022.198c.147-1.386-.856-2.4-2.24-2.279l.198-.017c-1.387.123-3.21-.654-4.083-1.733l.125.153c-.876-1.083-2.304-1.092-3.195-.027l.127-.152c-.895 1.068-2.733 1.808-4.113 1.662l.198.02c-1.386-.147-2.4.857-2.279 2.24L4.4 6.363c.122 1.387-.655 3.21-1.734 4.084l.154-.126c-1.083.878-1.092 2.304-.027 3.195l-.152-.127z"}),a.a.createElement("path",{fill:"#FFF",d:"M9.78 15.728l-2.633-2.999s-.458-.705.242-1.362c.7-.657 1.328-.219 1.328-.219l1.953 2.132 4.696-4.931s.663-.348 1.299.198c.636.545.27 1.382.27 1.382s-3.466 3.858-5.376 5.782c-.98.93-1.778.017-1.778.017z"})))};o.defaultProps={name:"BadgeCert"},t.a=o},1912:function(e,t,n){e.exports=n.p+"assets/icons-hot-spot.6568b4bd.png"},1913:function(e,t,n){e.exports=n.p+"assets/mobile_icons-hot-spot.8181ad56.png"},1914:function(e,t,n){e.exports=n.p+"assets/HotChoice.a7580612.png"},1915:function(e,t,n){e.exports=n.p+"assets/time.0431db00.png"},1916:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(2)),a=c(n(195));function c(e){return e&&e.__esModule?e:{default:e}}var o=function(e){return r.default.createElement(a.default,Object.assign({width:"150",height:"120",viewBox:"0 0 150 120"},e),r.default.createElement("g",{fill:"none",fillRule:"evenodd"},r.default.createElement("path",{fill:"#EBEEF5",d:"M107.221 83.6l8.886 8.885a1.5 1.5 0 0 1-2.122 2.122l-8.924-8.925A18.922 18.922 0 0 1 93 90c-10.493 0-19-8.507-19-19s8.507-19 19-19 19 8.507 19 19c0 4.834-1.805 9.247-4.779 12.6zM70 89.085a1.5 1.5 0 0 1 0 2.83V92H46.003A6.003 6.003 0 0 1 40 85.995v-55.99A6.005 6.005 0 0 1 46.003 24h53.994A6.003 6.003 0 0 1 106 30.005V48h-.085a1.5 1.5 0 0 1-2.83 0H103V30.005A3.003 3.003 0 0 0 99.997 27H46.003A3.005 3.005 0 0 0 43 30.005v55.99A3.003 3.003 0 0 0 46.003 89H70v.085zM93 87c8.837 0 16-7.163 16-16s-7.163-16-16-16-16 7.163-16 16 7.163 16 16 16z",fillRule:"nonzero"}),r.default.createElement("path",{fill:"#F7F8FA",d:"M49 39.5c0-.828.677-1.5 1.495-1.5h39.01c.826 0 1.495.666 1.495 1.5 0 .828-.677 1.5-1.495 1.5h-39.01A1.494 1.494 0 0 1 49 39.5zm0 9c0-.828.667-1.5 1.501-1.5H71.5c.829 0 1.501.666 1.501 1.5 0 .828-.667 1.5-1.501 1.5H50.5C49.672 50 49 49.334 49 48.5zm0 9c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H50.498A1.495 1.495 0 0 1 49 57.5z"})))};t.default=o},1917:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(2)),a=c(n(195));function c(e){return e&&e.__esModule?e:{default:e}}var o=function(e){return r.default.createElement(a.default,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24"},e),r.default.createElement("path",{d:"M12 2c5.523 0 10 4.477 10 10 0 1.49-.326 2.902-.91 4.172v4.464a.455.455 0 0 1-.454.455h-4.464A9.963 9.963 0 0 1 12 22C6.477 22 2 17.523 2 12S6.477 2 12 2zm0 1.818a8.182 8.182 0 1 0 3.753 15.454h3.52v-3.52A8.182 8.182 0 0 0 12 3.819zm0 4.546a3.636 3.636 0 1 1 0 7.272 3.636 3.636 0 0 1 0-7.272z",fillRule:"evenodd"}))};t.default=o},1918:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(2)),a=c(n(195));function c(e){return e&&e.__esModule?e:{default:e}}var o=function(e){return r.default.createElement(a.default,Object.assign({width:"36",height:"36",viewBox:"0 0 36 36"},e),r.default.createElement("g",{fill:"none",fillRule:"evenodd"},r.default.createElement("path",{d:"M0 0h36v36H0z"}),r.default.createElement("path",{fill:"currentcolor",d:"M6.282 12h3.436c.446 0 .607.046.77.134.163.087.291.215.378.378.088.163.134.324.134.77v13.436c0 .446-.046.607-.134.77a.909.909 0 0 1-.378.378c-.163.088-.324.134-.77.134H6.282c-.446 0-.607-.046-.77-.134a.909.909 0 0 1-.378-.378c-.088-.163-.134-.324-.134-.77V13.282c0-.446.046-.607.134-.77a.909.909 0 0 1 .378-.378c.163-.088.324-.134.77-.134zm20 4h3.436c.446 0 .607.046.77.134.163.087.291.215.378.378.088.163.134.324.134.77v9.436c0 .446-.046.607-.134.77a.909.909 0 0 1-.378.378c-.163.088-.324.134-.77.134h-3.436c-.446 0-.607-.046-.77-.134a.909.909 0 0 1-.378-.378c-.088-.163-.134-.324-.134-.77v-9.436c0-.446.046-.607.134-.77a.909.909 0 0 1 .378-.378c.163-.088.324-.134.77-.134z"}),r.default.createElement("rect",{width:"28",height:"2",x:"4",y:"31",fill:"currentcolor",rx:"1"}),r.default.createElement("path",{fill:"currentcolor",d:"M16.282 3h3.436c.446 0 .607.046.77.134.163.087.291.215.378.378.088.163.134.324.134.77v22.436c0 .446-.046.607-.134.77a.909.909 0 0 1-.378.378c-.163.088-.324.134-.77.134h-3.436c-.446 0-.607-.046-.77-.134a.909.909 0 0 1-.378-.378c-.088-.163-.134-.324-.134-.77V4.282c0-.446.046-.607.134-.77a.909.909 0 0 1 .378-.378c.163-.088.324-.134.77-.134z"})))};t.default=o},1919:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(2)),a=c(n(195));function c(e){return e&&e.__esModule?e:{default:e}}var o=function(e){return r.default.createElement(a.default,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24"},e),r.default.createElement("g",{fillRule:"nonzero"},r.default.createElement("path",{d:"M24 8.993v6.014c0 2.205-1.658 3.34-3.719 2.529L16 15.85v-7.7l4.281-1.686C22.335 5.656 24 6.787 24 8.994zm-2 0c0-.748-.216-.938-.86-.715l-.126.047L18 9.511v4.977l3.014 1.187c.705.277.958.147.984-.54l.002-.128V8.993z"}),r.default.createElement("path",{d:"M16.005 4C17.107 4 18 4.895 18 5.994v12.012A1.994 1.994 0 0 1 16.005 20H1.995A1.996 1.996 0 0 1 0 18.006V5.994C0 4.893.893 4 1.995 4h14.01zM16 6H2v12h14V6z"})))};t.default=o},2406:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(34),c=n(31),o=n(14),i=n(15),l=n(16),s=n(17),u=n(8),d=n(3),f=n.n(d),p=n(2),h=n.n(p),b=n(25),m=n(110),v=n.n(m),g=n(42),y=n(176),O=n(139),j=n(0),C=n(812),k=n(10),w=n.n(k),S=n(20),x=n.n(S),N=n(21),R=n.n(N),E=n(90),T=n.n(E),I=n(22),P=n.n(I),L=n(23),A=n.n(L),_=n(13),M=n.n(_),z=n(28),D=n(222),B=n(881),V=n(807),F=n(1232);var H=n(1110),U=function(e){return h.a.createElement(H.a,Object.assign({viewBox:"0 0 80 80"},e),h.a.createElement("path",{d:"M41.323 43.102c0-.02-.155-4.459-1.547-4.98h-9.7c.323-4.571.408-9.175.408-12.951h9.485c0-.335.365-4.576-1.59-4.982H21.97c.647-2.01 1.46-4.557 2.432-7.189 0 0-4.462 0-5.983 4.057-.628 1.675-2.448 8.109-5.69 14.683 1.092-.119 4.703-.22 6.83-4.174.391-1.103.466-1.251.952-2.395h5.35c0 1.637-.22 12.236-.31 12.95h-9.694c-2.177.522-2.885 4.96-2.885 4.981h12.16C24.32 52.452 19.943 60.345 12 66.59c3.799 1.098 7.584-.176 9.456-1.862 0 0 4.26-3.925 6.596-13.016l10.005 12.206s2.773-3.88-.23-7.516c-1.405-1.678-5.202-6.213-6.82-7.859l-2.712 2.182c.81-2.626 1.296-5.178 1.46-7.623h11.568zm1.974-22.913v40.845h4.759l1.433 4.781 7.812-4.78H66V20.188H43.297zm18.685 36.86h-5.211l-5.577 2.99-.576-2.99h-3.372V24.175h14.806l-.07 32.876z"}))};U.defaultProps={name:"Zhi"};var q=U;function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return A()(this,n)}}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G=function(e){P()(n,e);var t=W(n);function n(){var e;x()(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),K(T()(e),"state",{loaded:!1}),e}return R()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.src;(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,r){var a=new Image;Object.keys(t).forEach((function(e){a[e]=t[e]})),a.onload=function(){return n(a)},a.onerror=r,a.src=e}))})(t).then((function(n){n.dataset.thumbnail=t,e.setState({loaded:!0})})).catch((function(){}))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.src,r=e.alt,a=e.showIcon;return this.state.loaded?h.a.createElement("img",{src:n,className:t,alt:r}):h.a.createElement("div",{className:"KfeCollection-PlaceHolder ".concat(t)},a&&h.a.createElement(q,{className:"KfeCollection-PlaceHolder-Icon",size:40}))}}]),n}(h.a.Component);K(G,"propTypes",{src:f.a.string.isRequired,alt:f.a.string,className:f.a.string,style:f.a.shape({width:f.a.number,height:f.a.number}),showIcon:f.a.bool}),K(G,"defaultProps",{alt:"",className:"",showIcon:!0});var Q=G;function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return A()(this,n)}}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Y=function(e){P()(n,e);var t=Z(n);function n(){return x()(this,n),t.apply(this,arguments)}return R()(n,[{key:"render",value:function(){var e=this.props,t=e.src,n=e.className,r=e.width,a=e.height;return h.a.createElement("div",{className:w()("KfeCollection-Image-Wrapper",n),style:r||a?{width:r,height:a}:{}},h.a.createElement(Q,{className:"KfeCollection-Image",src:t}))}}]),n}(h.a.Component);J(Y,"propTypes",{className:f.a.string,width:f.a.number,height:f.a.number,src:f.a.string.isRequired}),J(Y,"defaultProps",{className:"",src:""});var X=n(18),$=function(e){return h.a.createElement(X.a,e,h.a.createElement("g",{fill:"none",fillRule:"evenodd"},h.a.createElement("path",{fill:"#0F88EB",d:"M12.055 3.172c.21-.165.397-.344.555-.532l-.127.152c.891-1.065 2.319-1.056 3.195.027l-.125-.153c.872 1.08 2.696 1.856 4.083 1.733l-.197.017c1.383-.122 2.386.893 2.239 2.279l.021-.198c-.147 1.381.593 3.218 1.661 4.113l-.152-.127c1.065.891 1.056 2.319-.027 3.195l.154-.125c-1.08.872-1.856 2.696-1.734 4.084l-.017-.197c.123 1.382-.893 2.385-2.279 2.238l.198.021c-1.38-.147-3.218.593-4.113 1.661l.127-.152c-.891 1.065-2.319 1.057-3.195-.027l.125.154a3.716 3.716 0 0 0-.503-.506c.975-.77 2.422-1.25 3.559-1.13l-.198-.021c1.386.147 2.402-.856 2.279-2.238l.017.197c-.122-1.388.655-3.212 1.734-4.084l-.154.125c1.083-.876 1.092-2.304.027-3.195l.152.127c-1.068-.895-1.808-2.732-1.66-4.113l-.022.198c.147-1.386-.856-2.4-2.24-2.279l.198-.017c-1.159.103-2.622-.422-3.58-1.227z"}),h.a.createElement("path",{fill:"#FF9500",d:"M19.21 10.483l.151.127c-1.069-.895-1.809-2.732-1.662-4.113l-.02.197c.146-1.386-.857-2.4-2.24-2.278l.197-.018c-1.387.124-3.21-.653-4.083-1.732l.125.153c-.876-1.083-2.304-1.092-3.195-.028l.127-.152c-.894 1.068-2.733 1.808-4.113 1.663l.198.02c-1.386-.147-2.4.857-2.279 2.24L2.4 6.363c.122 1.387-.655 3.21-1.734 4.084l.154-.126c-1.083.877-1.092 2.304-.027 3.194L.64 13.39c1.068.894 1.808 2.733 1.661 4.112l.021-.196c-.147 1.385.856 2.401 2.24 2.28l-.198.015c1.387-.122 3.211.655 4.083 1.734l-.124-.154c.184.228.396.397.62.53a1.89 1.89 0 0 0 1.972 0c.215-.127.421-.287.602-.503l-.127.152c.895-1.068 2.733-1.808 4.113-1.66l-.198-.022c1.387.147 2.402-.856 2.28-2.238l.016.197c-.122-1.389.655-3.212 1.734-4.084l-.154.124c1.083-.876 1.092-2.303.028-3.194"}),h.a.createElement("path",{fill:"#FFF",d:"M14.946 11.082l-2.362 2.024.721 3.025c.128.534-.144.738-.617.45l-2.654-1.623L7.38 16.58c-.468.286-.746.09-.617-.449l.721-3.025-2.362-2.024c-.417-.357-.317-.68.236-.726l3.101-.248 1.194-2.872c.211-.507.55-.512.763 0l1.195 2.872 3.1.248c.547.044.657.365.236.726"})))};$.defaultProps={name:"BadgeCG"};var ee=$,te=function(e){return h.a.createElement(X.a,e,h.a.createElement("g",{fill:"none",fillRule:"evenodd"},h.a.createElement("path",{fill:"#FF9500",d:"M2.64 13.39c1.068.895 1.808 2.733 1.66 4.113l.022-.196c-.147 1.384.856 2.4 2.24 2.278l-.198.016c1.387-.122 3.21.655 4.083 1.734l-.125-.154c.876 1.084 2.304 1.092 3.195.027l-.127.152c.895-1.068 2.733-1.808 4.113-1.66l-.198-.022c1.386.147 2.402-.856 2.279-2.238l.017.197c-.122-1.388.655-3.212 1.734-4.084l-.154.125c1.083-.876 1.092-2.304.027-3.195l.152.127c-1.068-.895-1.808-2.732-1.66-4.113l-.022.198c.147-1.386-.856-2.4-2.24-2.279l.198-.017c-1.387.123-3.21-.654-4.083-1.733l.125.153c-.876-1.083-2.304-1.092-3.195-.027l.127-.152c-.895 1.068-2.733 1.808-4.113 1.662l.198.02c-1.386-.147-2.4.857-2.279 2.24L4.4 6.363c.122 1.387-.655 3.21-1.734 4.084l.154-.126c-1.083.878-1.092 2.304-.027 3.195l-.152-.127z"}),h.a.createElement("path",{fill:"#FFF",d:"M12.034 14.959L9.379 16.58c-.468.286-.746.09-.617-.449l.721-3.025-2.362-2.024c-.417-.357-.317-.681.236-.725l3.1-.249 1.195-2.872c.21-.507.55-.512.763 0l1.195 2.872 3.1.249c.547.043.657.365.236.725l-2.362 2.024.721 3.025c.128.534-.144.738-.617.449l-2.654-1.621z"})))};te.defaultProps={name:"BadgeGlorious"};var ne=te,re=n(1520);function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return A()(this,n)}}function ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oe=function(e){P()(n,e);var t=ae(n);function n(){return x()(this,n),t.apply(this,arguments)}return R()(n,[{key:"render",value:function(){var e=this.props,t=e.style,n=t.className,r=void 0===n?"":n,a=t.size,c=void 0===a?16:a,o=t.center,i=void 0===o||o,l=e.badge;if(!l)return null;var s=l.identity,u=l.bestAnswerer;return u&&s?h.a.createElement(ee,{className:r,size:c,center:i}):u?h.a.createElement(ne,{className:r,size:c,center:i}):s?h.a.createElement(re.a,{className:r,size:c,center:i}):null}}]),n}(h.a.Component);ce(oe,"propTypes",{badge:f.a.object,style:f.a.object.isRequired}),ce(oe,"defaultProps",{style:{}});var ie=n(1204),le=function(e){var t=e.data;return h.a.createElement("a",{href:t.url,className:"KfeCollection-PcCollegeCard-buttonWrapper"},h.a.createElement("button",{className:"KfeCollection-PcCollegeCard-button"},h.a.createElement(ie.a,{className:"KfeCollection-PcCollegeCard-button--svg",width:14,height:14}),t.text))};function se(e){return e&&0!==e.length?(e.forEach((function(e){"identity"===e.type&&(t?t.push(e):t=[e]),"best_answerer"===e.type&&(n=e)})),{bestAnswerer:n,identity:t}):null;var t,n}var ue=n(832);function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return A()(this,n)}}function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pe=4514,he=4515,be=function(e){P()(n,e);var t=de(n);function n(){var e;x()(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),fe(T()(e),"zaRef",h.a.createRef()),fe(T()(e),"handleClick",(function(t){return function(n){var r=e.props,a=r.useDefaultZa,c=r.result,o=(void 0===c?{}:c).object,i=o.commodityType,l=void 0===i?"":i,s=o.commodityId,u={type:ue.f[l]||"Unknown",id:s};a&&(z.a.trackEvent(n.target,{id:he,action:"OpenUrl"}),e.zaRef.current.trackEvent({action:"OpenUrl",eventType:"Click",elementLocation:{type:"Card",content:u,block:{blockText:"searchCard"}}},t)),e.props.onTitleClick(n)}})),fe(T()(e),"handleSearchMore",(function(t){var n=e.props.zaInfo;z.a.trackEvent(t.target,{id:8209,action:"OpenUrl"},{search:n})})),fe(T()(e),"handleBottomMoreClick",(function(t){var n=e.props,r=n.zaInfo,a=n.result.object,c=(a=void 0===a?{}:a).commodityType;z.a.trackEvent(t.target,{id:8260,action:"OpenUrl",name:"查看更多"},{search:r,button:{text:"查看更多「".concat(ue.a[c],"」搜索结果")}})})),fe(T()(e),"renderHeader",(function(){var t=e.props.result,n=(void 0===t?{}:t).object,r=(n=void 0===n?{}:n).commodityType,a=n.header,c=a.cardTitle?a.cardTitle:ue.a[r];return h.a.createElement("div",{className:"KfeCollection-PcCollegeCard-Header"},h.a.createElement("div",{className:"KfeCollection-PcCollegeCard-Header-content"},c))})),fe(T()(e),"renderMoreBottom",(function(){var t=e.props,n=t.result,r=void 0===n?{}:n,a=t.query,c=void 0===a?{}:a,o=t.zaInfo,i=r.object,l=(i=void 0===i?{}:i).commodityType,s=i.attachedInfoBytes;return h.a.createElement(B.a,{options:[{module:"Content"},{attached_info_bytes:s},{id:8261},{search:o,button:{text:"查看更多「".concat(ue.a[l],"」搜索结果")}}]},h.a.createElement("div",{className:"KfeCollection-PcCollegeCard-moreBottom",onClick:e.handleBottomMoreClick},h.a.createElement("a",{href:"http://www.zhihu.com/search?q=".concat(c.content,"&type=").concat(ue.b[l])},"查看更多「",ue.a[l],"」搜索结果"),h.a.createElement(V.a,{className:"KfeCollection-PcCollegeCard-moreIcon",size:20,center:!0})))})),fe(T()(e),"renderPcCollegeCard",(function(){var t=e.props,n=t.className,r=t.result,a=void 0===r?{}:r,c=t.compact,o=t.query,i=void 0===o?{}:o,l=t.showBottomLink,s=a.object,u=(s=void 0===s?{}:s).body,d=void 0===u?{}:u,f=s.commodityType,p=s.source,b=s.url,m=s.footer,v=s.header,g=void 0===v?{}:v,y=s.splitLabel,O=s.cardVersion,j=s.tabType,C=a.object,k=(C=void 0===C?{}:C).attachedInfoBytes,w={link:{url:b},attached_info_bytes:k},S=g.cardTitle,x=void 0===S?"":S,N=g.noMore,R=d.images,E=void 0===R?[]:R,T=d.title,I=d.description,P=d.authors,L=void 0===P?[]:P,A=d.canTry,_=d.button,M=void 0===_?{}:_,z=!!E.length&&!!E[0],B=L[0]||{},V=se(B.badge),H=-1!==ue.c.indexOf(f)||"ADSENSE"===p,U=!V&&!B.name&&!m,q=x||ue.d[f],W=c&&1==+y,K="zhihu_km_general"===j&&1!=+y&&["album_chapter","album_video_chapter","paid_column_chapter","publication_chapter","magazine_section"].includes(f);return h.a.createElement("div",{className:"\n        KfeCollection-PcCollegeCard-wrapper\n        ".concat(W?"KfeCollection-PcCollegeCard-marginTop":"","\n      ")},W&&e.renderHeader(),K&&h.a.createElement("div",{className:"KfeCollection-PcCollegeCard-DividingLine"}),h.a.createElement("div",{className:"\n          KfeCollection-PcCollegeCard-root\n          ".concat(n,"\n          ").concat(5==+O?"KfeCollection-PcCollegeCard-root-abPadding":"","\n        ")},h.a.createElement("div",{className:"KfeCollection-PcCollegeCard"},z&&h.a.createElement("div",{className:"KfeCollection-PcCollegeCard-image"},h.a.createElement(Y,{src:E[0],width:60,height:H?60:80})),h.a.createElement("div",{className:"KfeCollection-PcCollegeCard-top"},h.a.createElement(D.d,{ref:e.zaRef}),h.a.createElement("div",{className:"KfeCollection-PcCollegeCard-title"},h.a.createElement("a",{onClick:e.handleClick(w),href:b,target:"_blank",rel:"noopener noreferrer",className:"KfeCollection-PcCollegeCard-link"},h.a.createElement("span",{dangerouslySetInnerHTML:{__html:T}})),!c&&h.a.createElement("span",{className:"KfeCollection-PcCollegeCard-type"},q)),h.a.createElement("div",{className:"KfeCollection-PcCollegeCard-meta"},h.a.createElement("div",{className:"KfeCollection-PcCollegeCard-description ".concat(U?"KfeCollection-PcCollegeCard-moreDescription":""),dangerouslySetInnerHTML:{__html:I}}),h.a.createElement("div",{className:"KfeCollection-PcCollegeCard-status"},h.a.createElement("span",{className:V?"KfeCollection-PcCollegeCard-author":"",dangerouslySetInnerHTML:{__html:B.name}}),V&&h.a.createElement(oe,{badge:V,style:{size:16}}),!!B.name&&!!m&&h.a.createElement("span",{className:"KfeCollection-PcCollegeCard-point"},"·"),h.a.createElement("span",null,m)),!c&&"special"!==f&&l&&!N&&h.a.createElement(D.b,{block:"searchCardViewMore"},h.a.createElement(D.a,{zaType:"Button",zaText:"查看更多「".concat(ue.a[f],"」搜索结果}"),extra:{link:{url:"http://www.zhihu.com/search?q=".concat(i.content,"&type=").concat(ue.b[f])},attached_info_bytes:k},zaAction:"OpenUrl"},h.a.createElement("div",{className:"KfeCollection-PcCollegeCard-searchMore",onClick:e.handleSearchMore},h.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://www.zhihu.com/search?q=".concat(i.content,"&type=").concat(ue.b[f]||"album")},"查看更多「",ue.a[f]||"盐选专栏","」搜索结果"),h.a.createElement(F.a,{className:"KfeCollection-PcCollegeCard-moreIcon",size:20,center:!0})))))),A&&h.a.createElement("div",{className:"KfeCollection-PcCollegeCard-extra"},h.a.createElement(le,{data:M})))),c&&2==+y&&e.renderMoreBottom())})),e}return R()(n,[{key:"render",value:function(){var e=this.props,t=e.zaInfo,n=e.result,r=void 0===n?{}:n,a=e.useDefaultZa,c=r.object,o=(c=void 0===c?{}:c).attachedInfoBytes,i=c.commodityId,l=c.commodityType,s=void 0===l?"":l;return a?h.a.createElement(B.a,{options:[{module:"Content",is_ad:!0},{attached_info_bytes:o},{id:pe},{search:t}]},h.a.createElement(D.b,{block:"searchCard",content:{type:ue.f[s]||"Unknown",id:i}},h.a.createElement(D.e,{zaType:"Card",extra:{attached_info_bytes:o}},this.renderPcCollegeCard()))):this.renderPcCollegeCard()}}]),n}(h.a.Component);fe(be,"propTypes",{className:f.a.string,result:f.a.object.isRequired,compact:f.a.bool.isRequired,onTitleClick:f.a.func,zaInfo:f.a.object,onRef:f.a.func,showBottomLink:f.a.bool,useDefaultZa:f.a.bool}),fe(be,"defaultProps",{className:"",result:{highlight:{},object:{}},compact:!1,zaInfo:{},onTitleClick:function(){},onRef:function(){},showBottomLink:!0,useDefaultZa:!0});var me=be,ve=n(1061),ge=n(174),ye=n(1379),Oe=n(150),je=n.n(Oe);function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var a=M()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return A()(this,n)}}function ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var we=function(e){P()(n,e);var t=Ce(n);function n(){var e;x()(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),ke(T()(e),"zaRef",h.a.createRef()),ke(T()(e),"handleClick",(function(t){return function(n){var r=e.props.zaExtra;z.a.trackEvent(n.target,{id:4623,action:"OpenUrl"},Object.assign({},r)),e.zaRef.current.trackEvent({action:"OpenUrl",eventType:"Click",elementLocation:{type:"Card"}},t)}})),ke(T()(e),"handleClickMore",(function(t){var n=e.props,r=n.zaExtra,a=n.result,c=je()(a,"object.attachedInfoBytes","");z.a.setModule(t.target,{module:"Content"},{attached_info_bytes:c}),z.a.trackEvent(t.target,{id:4874,action:"OpenUrl"},Object.assign({},r))})),e}return R()(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.result,a=t.zaExtra,c=r.object,o=(void 0===c?{}:c).card,i=(o=void 0===o?{}:o).skuItems,l=o.saltPickMeta,s=je()(l,"title",""),u=je()(l,"url","");return h.a.createElement("div",{className:"KfeCollection-PcSaltBrandCard ".concat(n)},h.a.createElement("div",{className:"KfeCollection-PcSaltBrandCard-header"},h.a.createElement(ye.a,{className:"KfeCollection-PcSaltBrandCard-vip"}),h.a.createElement("div",{className:"KfeCollection-PcSaltBrandCard-title",dangerouslySetInnerHTML:{__html:s}})),h.a.createElement("div",{className:"KfeCollection-PcSaltBrandCard-body"},i.map((function(t,n){var r=je()(t,"attachedInfoBytes",""),c=a.search,o=void 0===c?{}:c,i={object:Object.assign({},je()(t,"card",{}),{attachedInfoBytes:r})},l={link:{url:je()(t,"card.url","")},attached_info_bytes:r},s=je()(t,"card.commodityType")||"",u=je()(t,"card.commodityId");return h.a.createElement(B.a,{key:n,options:[{module:"Content"},{attached_info_bytes:r},{id:4622},Object.assign({},a)]},h.a.createElement(D.b,{content:{type:ue.f[s]||"Unknown",id:u}},h.a.createElement(D.e,{zaType:"Card",extra:{attached_info_bytes:r}},h.a.createElement(D.d,{ref:e.zaRef}),h.a.createElement(me,{className:"KfeCollection-PcSaltBrandCard-item",key:n,result:i,zaInfo:o,showBottomLink:!1,useDefaultZa:!1,onTitleClick:e.handleClick(l)}))))}))),!!u&&h.a.createElement(D.b,{block:"oneboxViewMore"},h.a.createElement(D.a,{zaType:"Button",zaText:"查看全部",zaAction:"OpenUrl",extra:{link:{url:u}}},h.a.createElement("div",{className:"KfeCollection-PcSaltBrandCard-bottom",onClick:this.handleClickMore},h.a.createElement("a",{href:u,target:"_blank",rel:"noopener noreferrer",className:"KfeCollection-PcSaltBrandCard-more"},"查看全部"),h.a.createElement(F.a,{className:"KfeCollection-PcSaltBrandCard-arrowDown"})))))}}]),n}(h.a.Component);ke(we,"propTypes",{className:f.a.string,result:f.a.object.isRequired,zaExtra:f.a.object}),ke(we,"defaultProps",{className:"",result:{},zaExtra:{}});var Se=we,xe=n(1103),Ne=n(165),Re=n(49),Ee=function(e){return e.replace(/<em>|<\/em>/g,"")},Te=function(e){return e.replace(/<b>|<\/b>/g,"")},Ie=function(e,t,n){var r=/[\s\S]+?(?=<em>)/,a=/[\s\S]+?<\/em>/g,c="",o="",i=0,l=a.exec(e);if(null===l)return i="<b></b>".length,e.substring(0,i+t);for(;null!==l;){var s=Ee(Te(l[0])),u=o+s,d=c+l[0];if(u.length>t){var f=r.exec(l[0])[0];return o.length+f.length>t?c+=f.substring(0,t-o.length-1):u.length>n?c+=f+"<em>".concat(s.substring(Te(f).length,n-o.length),"</em>"):c=d,c}o=u,c=d,i=a.lastIndex,l=a.exec(e)}return c+e.substring(i,i+t-o.length)},Pe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:70,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"...",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:80;try{var a=Ie(e,t,r),c=Ee(e).length;return"".concat(a).concat(c>t?n:"")}catch(t){return Object(Re.isBrowser)()&&(t.message="excerpt error(it is known and probably caused by backend highlight bug)",window.Raven&&window.Raven.captureException(t,{extra:{originHtml:e}})),""}},Le=n(355),Ae=n(356),_e=n(856),Me=n(822),ze=n(862),De=n(119),Be=n(836);function Ve(e){var t=e.url,n=e.title,c=e.clickId;return Object(r.b)(a.Link,{to:t,target:"_blank","data-za-detail-view-id":c||3942,children:n})}var Fe=n(318);n(1374);function He(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Ue={placeholders:{img:" [图片] ",video:" [视频] "}},qe=function(e){Object(l.a)(n,e);var t=He(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={isContentExpended:!1},e.onToggleExpend=function(t){e.setState({isContentExpended:t})},e.createClickButtonHandler=function(t){z.a.trackEvent(t.target,{id:8877,action:"Answer"});var n=e.props.question.object.id,r="/question/".concat(n,"?#write");window.open(r)},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.question,t=e.highlight,n=(t=void 0===t?{}:t).title,a=t.description,c=e.object,o=e.object,i=o.id,l=o.title,s=o.description,u=o.type,d=o.answerCount,f=o.relationship,p=void 0===f?{}:f,h=o.updatedTime,b=o.visitsCount,m=o.followerCount,v=this.state.isContentExpended,g="/question/".concat(i),y={id:i,type:u,isFollowing:p.isFollowing},O=Object(r.b)("span",{className:"Highlight",dangerouslySetInnerHTML:{__html:n||l}}),j=a?"问题描述：".concat(a):a,k={};return Object(r.b)(C.d,{className:"SearchResult-Card",children:Object(r.b)(_e.a,{children:Object(r.b)(Me.e,Object.assign({data:c,link:g,title:Object(r.b)("div",{className:"QuestionItem-title",children:Object(r.b)(Ve,{url:g,title:O})})},k,{children:Object(r.c)(r.a,{children:[0===d&&Object(r.c)(ze.b,Object.assign({css:{".CopyrightRichText-richText":Object.assign({height:"auto"},!1)},className:w()({Highlight:!v}),excerpt:Pe(j,ge.c)||j,truncateDisabled:!0,truncateHTMLOptions:Ue,html:s,onToggleExpend:this.onToggleExpend,expanded:v},k,{children:[Object(r.b)(Be.a,Object.assign({className:"QuestionFollowButton Search-questionFollowButton",zaId:8876},y)),Object(r.c)("a",{className:"Search-questionNavItem",target:"_blank",rel:"noopener noreferrer",title:"回答",css:{cursor:"pointer"},onClick:this.createClickButtonHandler,children:[Object(r.b)(xe.a,{className:"Search-questionNavIcon",size:14}),Object(r.b)("div",{className:"Search-questionNavTitle",children:" 写回答"})]}),Object(r.b)("div",{className:"Search-questionNavItem",children:Object(r.c)("span",{className:"Search-questionNavTitle",children:[Object(Ae.cnNiceNumber)(b)," 浏览"]})}),Object(r.b)("div",{className:"Search-questionNavItem",children:Object(r.c)("span",{className:"Search-questionNavTitle",children:[Object(Ae.cnNiceNumber)(m)," 关注"]})})]})),0!==d&&Object(r.c)(Me.a,{children:[Object(r.b)(Be.a,Object.assign({className:"QuestionFollowButton Search-questionFollowButton"},y)),Object(r.c)(De.a,{preset:"plain",to:g,target:"_blank",children:[d," 个回答"]}),Object(r.b)("span",{className:"SearchItem-time QuestionItem-time",children:Object(Fe.c)(h)})]})]})}))})})}}]),n}(p.Component),We=Object(Le.b)((function(e){var t=e.question.object,n=e.zaInfo,r=(n=void 0===n?{}:n).cardShowId;return{view:{id:void 0===r?3950:r},module:"QuestionItem",attachedInfoBytes:t.attachedInfoBytes,index:e.index.toString(),content:{type:"Question",token:t.id},trackCardShow:!0}}))(qe),Ke=n(19),Ge=n(29),Qe=n(85),Ze=n(1229),Je=n(196),Ye=n(366),Xe=n(72),$e=n(1035),et=n(60),tt=n(99),nt=n(1220),rt=n(1065),at=n(1066),ct=n(890),ot=n(857),it=n(853),lt=n(831),st=n(899),ut=n(1216),dt=n(945),ft=n(837),pt=n(854),ht=n(24),bt=n(1290);function mt(e){var t=e.className,n=e.onClick,a=e.isThanked;return Object(r.b)(Ge.c,{className:t,preset:"plain",onClick:n,icon:bt.a,label:a?"取消喜欢":"喜欢"})}mt.propTypes={onClick:f.a.func.isRequired,isThanked:f.a.bool};var vt=n(75),gt=n.n(vt),yt=n(41),Ot=n(73),jt=n.n(Ot),Ct=n(974),kt=n.n(Ct),wt=n(364),St=n(1433),xt=[0,.3],Nt=[".ContentItem-title a"],Rt=function(e){e&&(Array.isArray(e)||(e=[e]),e.forEach(kt.a))};var Et=function(e){var t=e.children,n=e.onClick,a=e.extra,c=Object(p.useRef)(),o=Object(p.useRef)([]),i=Object(p.useMemo)((function(){return Object(St.a)(a)}),[a]),l=Object(p.useCallback)((function(){Rt(i.impression_tracks)}),[i]),s=Object(p.useMemo)((function(){return jt()((function(){Rt(i.view_tracks)}))}),[i]),u=Object(p.useMemo)((function(){return jt()((function(){Rt(i.view_x_tracks)}))}),[i]),d=Object(p.useCallback)((function(){Rt(i.click_tracks)}),[i]);Object(p.useEffect)((function(){o.current=Nt.map((function(e){return c.current.querySelector(e)}))}),[]),Object(p.useEffect)((function(){l()}),[l]);var f=Object(p.useCallback)((function(e){o.current.some((function(t){return null==t?void 0:t.contains(e.target)}))&&d(),null==n||n(e)}),[d,o,n]),h=Object(p.useCallback)((function(e){var t=Object(yt.a)(e,1)[0];t.isIntersecting&&(s(),t.intersectionRatio>=.3&&u())}),[s,u]);return Object(r.b)(wt.a,{threshold:xt,onObserve:h,children:Object(r.b)("div",{ref:c,onClick:f,style:{marginBottom:12},children:t})})},Tt=n(1233),It=["click_tracks","view_tracks","view_x_tracks","impression_tracks","conversion_tracks"];var Pt=function(e,t){var n=Object(St.a)(e)||{};return It.map((function(e){e in n&&(n[e]=n[e].map((function(e){return Object(Tt.a)(e,{poi:t})})))})),JSON.stringify(n)},Lt=function(e){return function(t){return gt()((function(n){var a=n[e],c=(a=void 0===a?{}:a).object,o=c.isZhiPlus,i=c.extra,l=n.index,s=Object(p.useMemo)((function(){return o?Pt(i,l):{}}),[i,l,o]);return o?Object(r.b)(Et,{extra:s,index:l,children:Object(r.b)(t,Object.assign({},n))}):Object(r.b)(t,Object.assign({},n))}),t)}};n(1218);function At(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var _t=function(e){Object(l.a)(n,e);var t=At(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={pureTitle:null,commentsShown:!1,commentsAutoFocus:!0,reportModalShown:!1,deleteModalShown:!1,favlistsShown:!1,commentPattern:"fixed",isContentExpended:!1,shownCatalogModal:!1},e.toggleCatalogModal=function(){e.setState({shownCatalogModal:!e.state.shownCatalogModal})},e.onToggleExpend=function(t){e.setState({isContentExpended:t})},e.toggleCommentButton=function(t,n){e.setState(Object.assign({},n))},e.closeCommentContainer=function(){e.setState({commentsShown:!1});var t=e.props.onCloseComment;"function"==typeof t&&t()},e.handlePositionStatusChange=function(t){e.setState({positionStatus:t})},e.handleReportOpen=function(){e.context.authRequired((function(){e.setState({reportModalShown:!0}),z.a.trackEvent(e.menuNode,{id:3946,action:"Report",element:"Button",is_intent:!0})}),ht.U.report)()},e.handleReportHide=function(){e.setState({reportModalShown:!1})},e.handleFavlistsShown=function(){z.a.trackEvent(e.favButtonRef,{id:3944,action:"Collect",element:"Button",is_intent:!0}),e.context.authRequired((function(){return e.setState({favlistsShown:!0})}),ht.U.favlists)()},e.handleFavlistHide=function(){e.setState({favlistsShown:!1})},e.handleLogMoreClick=function(){z.a.trackEvent(e.logMoreRef,{action:"Click",element_name:"MoreAction"})},e.handleUpdateThanked=e.context.authRequired((function(t){var n=e.props,r=n.answer.object,a=r.id,c=r.relationship.isThanked,o=n.updateAnswerThank,i=!c;z.a.trackEvent(t.target,{action:i?"Thank":"UnThank",element:"Button"}),o(a,i)}),ht.U.thank),e}return Object(i.a)(n,[{key:"renderOptions",value:function(){var e=this,t=this.props.answer.object.relationship,n=(t=void 0===t?{}:t).isAuthor,a={toggler:Object(r.b)(Ge.c,{onRef:function(t){return e.logMoreRef=t},preset:"plain",style:{padding:"0 1px"},icon:Ze.a}),onOpen:this.handleLogMoreClick,reversed:!0,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selfMenuItem"};return n?null:Object(r.b)(Qe.c,Object.assign({ref:function(t){return e.menuNode=t}},a,{children:Object(r.b)(Qe.b,{onClick:this.handleReportOpen,children:"举报"})}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.zaInfo,a=t.ua,c=t.ecommerce,o=this.props.answer,i=o.highlight,l=(i=void 0===i?{}:i).title,s=o.object,u=o.object,d=u.author,f=u.id,h=u.question,b=h.name,m=h.id,v=u.excerpt,g=u.content,y=u.commentCount,O=u.adminClosedComment,j=void 0!==O&&O,k=u.createdTime,S=u.updatedTime,x=u.relationship,N=(x=void 0===x?{}:x).isThanked,R=x.isAuthor,E=u.thumbnailInfo,T=((E=void 0===E?{}:E).thumbnails,o.byComment),I=o.itemProp,P=void 0===I?"answer":I,L="/question/".concat(m,"/answer/").concat(f),A=this.state,_=A.pureTitle,M=A.reportModalShown,z=A.favlistsShown,D=A.commentsShown,B=A.commentsAutoFocus,V=A.commentPattern,F=A.positionStatus,H=A.isContentExpended,U=A.shownCatalogModal,q=a.Mobile,W="".concat(d.name?"<b>".concat(d.name,"</b>："):"").concat(v),K=d.name&&d.name.replace(/<\/?em>/g,""),G=Object.assign({},d,{name:K}),Q=Object(r.b)("span",{className:"Highlight",ref:function(t){t&&null===_&&e.setState({pureTitle:t.textContent})},dangerouslySetInnerHTML:{__html:l||b}}),Z={},J=("paid"===s.answerType?s.paidInfo&&s.paidInfo.content:g)||v||"",Y=!q&&H&&Object(ct.a)(s,"answer");return Object(r.b)(C.d,{className:w()("SearchResult-Card",{"SearchResult-CardWithImage":!1}),children:Object(r.b)(_e.a,{children:Object(r.c)(Me.e,{className:"AnswerItem",data:s,link:L,name:f,itemProp:P,itemType:"http://schema.org/Answer",title:Object(r.c)("div",{itemProp:"zhihu:question",itemType:"http://schema.org/Question",itemScope:!0,children:[Object(r.b)("meta",{itemProp:"url",content:"https://www.zhihu.com/question/".concat(m)}),Object(r.b)("meta",{itemProp:"name",content:_||""}),Object(r.b)(Ve,{clickId:n.clickId,url:L,title:Q})]}),itemScope:!0,children:[Object(r.c)(ze.b,Object.assign({className:w()({Highlight:!H}),excerpt:Pe(W,ge.c)||W,onPositionStatusChange:this.handlePositionStatusChange,html:J,data:s,ecommerce:c,onToggleExpend:this.onToggleExpend,truncateDisabled:!0,expanded:H,hasVideo:!0,zaIds:{expand:n.expandId},before:Object(r.c)(p.Fragment,{children:[Object(r.b)("div",{className:"SearchItem-meta SearchItem-authorInfo",children:Object(r.b)(ft.a,{preset:"plain",author:G,extra:!this.context.currentUser})}),Object(r.b)(nt.b,{answer:s})]}),after:Object(r.c)("div",{children:[Object(r.b)(nt.a,{answer:s}),Object(r.b)(ze.a,{created:k,updated:S,href:L})]})},Z,{children:[Object(r.b)(ut.a,{answer:s,positionStatus:F,zaIds:{voteUp:3938,voteDown:3940}}),Object(r.b)(ot.a,{onClick:this.toggleCommentButton,commentsShown:D,commentClosed:j,count:y,positionStatus:F,zaInfos:{toggleComment:3943}}),Y&&Object(r.b)(rt.a,{html:J,sourceId:s.id,onClick:this.toggleCatalogModal},"catalog"),!H&&Object(r.b)("span",{className:"SearchItem-time",children:Object(Fe.c)(S)}),H&&Object(r.b)(pt.a,{id:f,type:"answer",title:_||"",authorName:d&&d.name,href:L,positionStatus:F,zaShareId:3945}),H&&Object(r.b)(dt.a,{onRef:function(t){return e.favButtonRef=t},onClick:this.handleFavlistsShown,label:"收藏"}),H&&!R&&Object(r.b)(mt,{onClick:this.handleUpdateThanked,isThanked:N}),H&&this.renderOptions()]})),Object(r.b)(it.a,{shown:D,autoFocus:B,parent:s,byComment:T,commentPattern:V,onClose:this.closeCommentContainer,zaInfo:{zaSubmitCommentId:3952},needLoadCommentPermission:!0}),!1,H&&Object(r.b)($e.a,{content:g,type:"answer",urlToken:Number(s.id)}),Object(r.b)(lt.a,{type:"answer",urlToken:f,shown:M,onClose:this.handleReportHide,zaEnabled:!0}),Object(r.b)(st.a,{id:f,type:"answer",shown:z,onClose:this.handleFavlistHide,zaEnabled:!0}),Y&&Object(r.b)(at.a,{shown:U,html:J,sourceId:s.id,onClose:this.toggleCatalogModal,created:s.createdTime,updated:s.updatedTime,author:d,zaContent:{type:"Answer",token:String(s.id)}})]})})})}}]),n}(p.Component);_t.contextTypes={currentUser:f.a.object,authRequired:f.a.func};var Mt=Object(Ke.compose)(Lt("answer"),Object(b.connect)((function(e,t){var n,r=Object.assign({cardShowId:3950,clickId:3942,expandId:3937},t.zaInfo),a=t.answer,c=a.object.answerObj?Object.assign({},Object(Xe.c)(e,{id:a.object.answerObj}),{attachedInfoBytes:(n=a.object).attachedInfoBytes,answerType:"paid",paidInfo:{content:n.body&&n.body.content,hasPurchased:n.label&&"svip"===n.label.commodityType}}):a.object,o=Object.assign({},c,c.question&&{question:Object.assign({},c.question,Object(tt.ab)(e,c.question))});return{zaInfo:r,answer:Object.assign({},a,{object:o}),switches:e.switches,ua:Object(et.l)(e),ecommerce:Object(Ye.c)(e,{type:"answer",urlToken:String(o.id)})}}),{updateAnswerVote:Xe.K,updateAnswerThank:Xe.J,updateAnswerReshipmentSettings:Xe.G,updateAnswerCommentPermission:Xe.F,updateAnswerCollapsed:Xe.E,updateAnswerStick:Xe.I,deleteAnswer:Xe.i,restoreAnswer:Xe.A,updateAnswer:Xe.D,loadAnswerForSettings:Xe.t,updateAnswerReward:Xe.H}),Object(Le.b)((function(e){var t=e.answer.object;return{view:{id:e.zaInfo.cardShowId},module:"AnswerItem",attachedInfoBytes:t.attachedInfoBytes,index:e.index.toString(),content:{type:"Answer",token:t.id},trackCardShow:!0}})))(_t),zt=n(911),Dt=n(835),Bt=n(375);n(1253);function Vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Ft=function(e){Object(l.a)(n,e);var t=Vt(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={pureTitle:null,commentsShown:!1,commentsAutoFocus:!0,favlistsShown:!1,commentPattern:"fixed",isContentExpended:!1},e.onToggleExpend=function(t){e.setState({isContentExpended:t})},e.handleCommentsShown=function(t,n){e.setState(n)},e.handlePositionStatusChange=function(t){e.setState({positionStatus:t})},e.handleCommentsHide=function(){e.setState({commentsShown:!1})},e.handleFavlistsShown=e.context.authRequired((function(){z.a.trackEvent(e.favButtonRef,{id:3944,action:"Collect",element:"Button",is_intent:!0}),e.setState({favlistsShown:!0})}),ht.U.favlists),e.handleFavlistHide=function(){e.setState({favlistsShown:!1})},e.handleVote=function(t){var n=e.props,r=n.article.object.id;(0,n.updateArticleVote)(r,t)},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props.ecommerce,n=this.props.article,a=n.highlight,c=(a=void 0===a?{}:a).title,o=n.object,i=n.object,l=i.title,s=i.commentCount,u=i.id,d=i.voteupCount,f=i.author,p=i.excerpt,h=i.content,b=i.type,m=i.voting,v=i.createdTime,g=i.updatedTime,y=i.thumbnailInfo,O=((y=void 0===y?{}:y).thumbnails,this.state),j=O.pureTitle,k=O.positionStatus,S=O.favlistsShown,x=O.commentsShown,N=O.commentsAutoFocus,R=O.commentPattern,E=O.isContentExpended,T=this.context.currentUser===f.urlToken,I="article"===b?"".concat(ht.m,"/p/").concat(u):"".concat(ht.L,"/p/").concat(u),P=Object(r.b)("span",{className:"Highlight",ref:function(t){t&&null===j&&e.setState({pureTitle:t.textContent})},dangerouslySetInnerHTML:{__html:c||l}}),L="".concat(f.name?"<b>".concat(f.name,"</b>："):"").concat(p),A=f.name&&f.name.replace(/<\/?em>/g,""),_=Object.assign({},f,{name:A}),M={};return Object(r.b)(C.d,{className:w()("SearchResult-Card",{"SearchResult-CardWithImage":!1}),children:Object(r.b)(_e.a,{children:Object(r.c)(Me.e,{className:"ArticleItem",data:o,link:I,title:Object(r.b)(Ve,{url:I,title:P}),itemProp:"article",children:[Object(r.c)(ze.b,Object.assign({className:w()({Highlight:!E,"SearchItem-promotion":"promotion"===b}),itemProp:"articleBody",data:o,ecommerce:t,excerpt:Pe(L,ge.c)||L,onPositionStatusChange:this.handlePositionStatusChange,truncateDisabled:!0,html:h||p||"",onToggleExpend:this.onToggleExpend,expanded:E,zaIds:{expand:3937},before:Object(r.b)("div",{className:"SearchItem-meta SearchItem-authorInfo",children:"article"===b?Object(r.b)(ft.a,{preset:"plain",author:_,extra:!this.context.currentUser}):Object(r.b)("span",{className:"SearchItem-authorName",children:f.name})}),after:"article"===b&&Object(r.b)(ze.a,{created:v,updated:g,href:I})},M,{children:[Object(r.b)(zt.a,{type:b,count:d,onVote:this.handleVote,voting:m,isOwner:T,zaIds:{voteUp:3938,voteDown:3940}}),Object(r.b)(ot.a,{onClick:this.handleCommentsShown,commentsShown:x,commentClosed:!1,count:s,positionStatus:k,zaInfos:{toggleComment:3943}}),!E&&Object(r.b)("span",{className:"SearchItem-time",children:Object(Fe.c)(g)}),E&&Object(r.b)(dt.a,{onRef:function(t){return e.favButtonRef=t},onClick:this.handleFavlistsShown,label:"收藏"}),E&&Object(r.b)(pt.a,{id:u,type:"article",url:I,title:j||"",authorName:f&&f.name,positionStatus:k,zaShareId:3945}),E&&!T&&Object(r.b)(Dt.a,{id:u,type:b,zaReportId:3946})]})),Object(r.b)(st.a,{id:u,type:"article",shown:S,onClose:this.handleFavlistHide,zaEnabled:!0}),Object(r.b)(it.a,{parent:o,commentPattern:R,shown:x,autoFocus:N,onClose:this.handleCommentsHide,zaInfo:{zaSubmitCommentId:3952},needLoadCommentPermission:!0}),!1,E&&Object(r.b)($e.a,{content:h,type:"article",urlToken:Number(u)})]})})})}}]),n}(p.Component);Ft.contextTypes={currentUser:f.a.object,authRequired:f.a.func};var Ht=Object(Ke.compose)(Lt("article"),Object(Le.b)((function(e){var t=e.article.object,n=e.zaInfo,r=(n=void 0===n?{}:n).cardShowId;return{view:{id:void 0===r?3950:r},module:"article"===t.type?"PostItem":"PromotionItem",attachedInfoBytes:t.attachedInfoBytes,index:e.index.toString(),content:{type:"Post",token:t.id.toString()},trackCardShow:!0}})),Object(b.connect)((function(e,t){var n=t.article.object;return{ecommerce:Object(Ye.c)(e,{type:"article",urlToken:String(n.id)})}}),{updateArticleVote:Bt.e}))(Ft),Ut=n(361),qt=n(1333),Wt=n(1311),Kt=n(820);function Gt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Qt=function(e){Object(l.a)(n,e);var t=Gt(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).handleFollowButtonClick=function(t){var n=e.props.column.object.isFollowing;return z.a.trackEvent(t.target,Object(ge.k)(n)),!0},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.column,t=e.highlight,n=(t=void 0===t?{}:t).title,c=t.description,o=e.object,i=e.object,l=i.id,s=i.type,u=i.articlesCount,d=i.description,f=i.title,p=i.followers,h=i.author,b=void 0===h?{}:h,m=i.isFollowing,v=this.props,g=v.query,y=v.showMore,O=!(void 0===p||void 0===u||void 0===b),j=this.context.currentUser,k=Object(r.b)("span",{className:"Highlight",dangerouslySetInnerHTML:{__html:n||f||""}}),w=c||d,S="".concat(ht.E,"/column/").concat(l),x=j&&j.urlToken===b.urlToken,N={};return Object(r.b)(C.d,{className:"SearchResult-Card",children:Object(r.b)(_e.a,{children:Object(r.b)(Me.e,Object.assign({data:o,link:S,image:Object(r.b)("div",{className:"SearchItem-avatarWrapper",children:Object(r.b)(Wt.a,{avatar:!0,target:"_blank",column:o,avatarProps:{large:!0,alt:"打开专栏主页"}})}),title:Object(r.c)("div",{children:[Object(r.b)(Wt.a,{column:o,target:"_blank","data-za-detail-view-id":3942,children:k}),y&&Object(r.b)("span",{className:"SearchItem-type",children:"专栏"})]}),meta:Object(r.c)("div",{children:[Object(r.b)(Ut.a,{className:"SearchItem-meta Highlight",html:w}),O&&Object(r.c)("div",{className:"ContentItem-status",children:[Object(r.c)("span",{className:"Search-statusLink",children:["创建者：",Object(r.b)(Kt.a,{target:"_blank",user:b})]}),Object(r.b)(qt.a,{}),Object(r.b)(a.Link,{className:"Search-statusLink",target:"_blank",to:"".concat(S,"/followers"),children:"".concat(Object(Ae.formatNumber)(p)," 关注")}),Object(r.b)(qt.a,{}),Object(r.b)(a.Link,{className:"Search-statusLink",target:"_blank",to:S,children:"".concat(Object(Ae.formatNumber)(u)," 文章")})]}),y&&Object(r.c)("div",{className:"Search-more",children:[Object(r.b)(a.Link,{target:"_blank",to:"/search?q=".concat(g,"&type=column"),"data-za-detail-view-element_name":"ViewAll",children:"查看更多「专栏」搜索结果"}),Object(r.b)(V.a,{size:20,fill:"#175199"})]})]}),extra:!x&&Object(r.b)(Be.a,{onClick:this.handleFollowButtonClick,id:l,type:s,isFollowing:m,preset:"primary",useCustomZa:!0})},N))})})}}]),n}(p.Component);Qt.contextTypes={currentUser:f.a.object};var Zt=Object(Le.b)((function(e){var t=e.column.object,n=e.zaInfo,r=(n=void 0===n?{}:n).cardShowId;return{view:{id:void 0===r?3950:r},module:"ColumnItem",attachedInfoBytes:t.attachedInfoBytes,index:e.index.toString(),content:{type:"Column",token:t.id},trackCardShow:!0}}))(Qt),Jt=n(987);function Yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Xt=function(e){Object(l.a)(n,e);var t=Yt(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).handleFollowButtonClick=function(t){var n=e.props.topic.object.isFollowing;return z.a.trackEvent(t.target,Object(ge.k)(n)),!0},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.topic,t=e.highlight,n=(t=void 0===t?{}:t).title,c=t.description,o=e.object,i=e.object,l=i.type,s=i.id,u=i.name,d=i.description,f=i.questionsCount,p=i.topAnswerCount,h=i.followersCount,b=i.isFollowing,m=this.props,v=m.query,g=m.showMore,y=!(void 0===h||void 0===f||void 0===p),O=Object(r.b)("span",{className:"Highlight",dangerouslySetInnerHTML:{__html:n||u}}),j=c||d,k="//www.zhihu.com/topic/".concat(s),w={};return Object(r.b)(C.d,{className:"SearchResult-Card",children:Object(r.b)(_e.a,{children:Object(r.b)(Me.e,Object.assign({image:Object(r.b)("div",{className:"SearchItem-avatarWrapper",children:Object(r.b)(Jt.a,{avatar:!0,avatarProps:{large:!0,alt:"打开话题页"},topic:o,target:"_blank"})}),data:o.object,link:k,title:Object(r.c)("div",{children:[Object(r.b)(Jt.a,{target:"_blank",topic:o,"data-za-detail-view-id":3942,children:O}),g&&Object(r.b)("span",{className:"SearchItem-type",children:"话题"})]}),meta:Object(r.c)("div",{children:[Object(r.b)(Ut.a,{className:"SearchItem-meta Highlight",html:j||""}),y&&Object(r.c)("div",{className:"ContentItem-status",children:[Object(r.b)(a.Link,{className:"Search-statusLink",to:"/topic/".concat(s,"/followers"),target:"_blank",children:"".concat(Object(Ae.formatNumber)(h)," 关注")}),Object(r.b)(qt.a,{}),Object(r.b)(a.Link,{className:"Search-statusLink",to:"/topic/".concat(s,"/questions"),target:"_blank",children:"".concat(Object(Ae.formatNumber)(f)," 问题")}),Object(r.b)(qt.a,{}),Object(r.b)(a.Link,{className:"Search-statusLink",to:"/topic/".concat(s,"/top-answers"),target:"_blank",children:"".concat(Object(Ae.formatNumber)(p)," 精华内容")})]}),g&&Object(r.c)("div",{className:"Search-more",children:[Object(r.b)(a.Link,{target:"_blank",to:"/search?q=".concat(v,"&type=topic"),"data-za-detail-view-element_name":"ViewAll",children:"查看更多「话题」搜索结果"}),Object(r.b)(V.a,{size:20,fill:"#175199"})]})]}),extra:Object(r.b)(Be.a,{onClick:this.handleFollowButtonClick,id:s,type:l,isFollowing:b,preset:"primary",useCustomZa:!0})},w))})})}}]),n}(p.Component),$t=Object(Le.b)((function(e){var t=e.topic.object,n=void 0===t?{}:t,r=e.zaInfo,a=(r=void 0===r?{}:r).cardShowId;return{view:{id:void 0===a?3950:a},module:"TopicItem",attachedInfoBytes:n.attachedInfoBytes,index:e.index.toString(),content:{type:"Topic",token:n.id},trackCardShow:!0}}))(Xt);n(1088);function en(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var tn=function(e){Object(l.a)(n,e);var t=en(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).handleFollowButtonClick=function(t){var n=e.props.user.object.isFollowing;return z.a.trackEvent(t.target,Object(ge.k)(n)),!0},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.user,t=e.highlight,n=(t=void 0===t?{}:t).title,c=t.description,o=e.object,i=e.object,l=(i=void 0===i?{}:i).name,s=i.headline,u=i.type,d=i.urlToken,f=i.articlesCount,p=i.answerCount,h=i.followerCount,b=i.isFollowing,m=i.userType,v=i.gender,g=this.props,y=g.query,O=g.showMore,j=Object(r.b)("span",{className:"Highlight",dangerouslySetInnerHTML:{__html:n||l}}),k=c||s,w=!(void 0===h||void 0===f||void 0===p),S="organization"===m,x=Object.assign({},o,{isOrg:S}),N="/".concat(S?"org":"people","/").concat(d),R=this.context.currentUser,E={};return Object(r.b)(C.d,{className:"SearchResult-Card",children:Object(r.b)(_e.a,{children:Object(r.b)(Me.e,Object.assign({image:Object(r.b)("div",{className:"SearchItem-avatarWrapper",children:Object(r.b)(Kt.a,{avatar:!0,avatarProps:{large:!0,alt:"打开用户主页"},user:x,target:"_blank"})}),data:x,link:N,title:Object(r.c)("div",{className:"SearchItem-userTitleWrapper",children:[Object(r.b)(Kt.a,{target:"_blank",className:"SearchItem-userTitle",user:x,"data-za-detail-view-id":3942,children:j}),O&&Object(r.b)("span",{className:"SearchItem-type",children:"用户"})]}),meta:Object(r.c)("div",{children:[Object(r.b)(Ut.a,{className:"SearchItem-meta Highlight",html:k||""}),w&&Object(r.c)("div",{className:"ContentItem-status",children:[Object(r.b)(a.Link,{className:"Search-statusLink",to:"".concat(N,"/answers"),target:"_blank",children:"".concat(Object(Ae.formatNumber)(p)," 回答")}),Object(r.b)(qt.a,{}),Object(r.b)(a.Link,{className:"Search-statusLink",to:"".concat(N,"/posts"),target:"_blank",children:"".concat(Object(Ae.formatNumber)(f)," 文章")}),Object(r.b)(qt.a,{}),Object(r.b)(a.Link,{className:"Search-statusLink",to:"".concat(N,"/followers"),target:"_blank",children:"".concat(Object(Ae.formatNumber)(h)," 关注者")})]}),O&&Object(r.c)("div",{className:"Search-more",children:[Object(r.b)(a.Link,{target:"_blank",to:"/search?q=".concat(y,"&type=people"),"data-za-detail-view-element_name":"ViewAll",children:"查看更多「用户」搜索结果"}),Object(r.b)(V.a,{size:20,fill:"#175199"})]})]}),extra:!(R&&R.urlToken===d)&&Object(r.b)(Be.a,{onClick:this.handleFollowButtonClick,id:d,type:u,isFollowing:b,gender:v,preset:"primary",useCustomZa:!0})},E))})})}}]),n}(p.Component);tn.contextTypes={currentUser:f.a.object};var nn=Object(Le.b)((function(e){var t=e.user.object,n=(t=void 0===t?{}:t).id,r=t.attachedInfoBytes,a=e.zaInfo,c=(a=void 0===a?{}:a).cardShowId;return{view:{id:void 0===c?3950:c},module:"UserItem",attachedInfoBytes:r,index:e.index.toString(),content:{type:"User",member_hash_id:n},trackCardShow:!0}}))(tn),rn=function(e){return h.a.createElement(X.a,e,h.a.createElement("path",{d:"M13.37 12.042V17h5.57v-5.164h-2.86c0-1.798 1.64-3.42 2.92-3.743V6c-2.174.354-5.63 2.417-5.63 6.042zm-8.37 0V17h5.57v-5.164H7.71c0-1.798 1.639-3.42 2.92-3.743V6C8.455 6.354 5 8.417 5 12.042z",fillRule:"evenodd"}))};rn.defaultProps={name:"DoubleQuotationLeft"};var an=rn,cn=function(e){return h.a.createElement(X.a,e,h.a.createElement("path",{d:"M10.63 10.958V6H5.06v5.164h2.86c0 1.798-1.64 3.42-2.92 3.743V17c2.174-.354 5.63-2.417 5.63-6.042zm8.37 0V6h-5.57v5.164h2.86c0 1.798-1.639 3.42-2.92 3.743V17c2.175-.354 5.63-2.417 5.63-6.042z",fillRule:"evenodd"}))};cn.defaultProps={name:"DoubleQuotationRight"};var on=cn;function ln(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var sn=function(e){Object(l.a)(n,e);var t=ln(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).renderContent=function(e,t){switch(e.type){case"answer":return Object(r.b)(Mt,{index:t,answer:{type:"answer",object:e},zaInfo:{cardShowId:3949}});case"article":return Object(r.b)(Ht,{index:t,article:{type:"article",object:e},zaInfo:{cardShowId:3949}});case"question":return Object(r.b)(We,{preset:"plain",index:t,question:{type:"question",object:e},zaInfo:{cardShowId:3949}});default:return null}},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.items,a=t.className;return Object(r.b)("div",{className:w()("".concat("MinorHotSpot","-ContentList"),a),children:n.map((function(t,n){return t?Object(r.b)("div",{className:"".concat("MinorHotSpot","-ContentContainer"),children:e.renderContent(t,n)},"".concat(t.type,"-").concat(t.id)):null}))})}}]),n}(p.Component),un=Object(b.connect)((function(e,t){var n=e.entities;return{items:t.contentList.map((function(e){var t=e.id,r=e.schema;return(n["".concat(r,"s")]||{})[t]}))}}))(sn),dn=n(1912),fn=n.n(dn),pn=(n(1913),n(1914)),hn=n.n(pn);function bn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var mn=function(e){var t=e.description;return Object(r.c)("div",{className:"".concat("MinorHotSpot","-Description"),children:[Object(r.b)(an,{className:w()("".concat("MinorHotSpot","-Quote"),"".concat("MinorHotSpot","-Quote--left"))}),Object(r.b)("span",{className:"".concat("MinorHotSpot","-DescriptionText"),children:t}),Object(r.b)(on,{className:w()("".concat("MinorHotSpot","-Quote"),"".concat("MinorHotSpot","-Quote--right"))})]})},vn=function(e){Object(l.a)(n,e);var t=bn(n);function n(e){var r;Object(o.a)(this,n),r=t.call(this,e);var a=e.item.object,c=a.contentList,i=void 0===c?[]:c,l=a.cardType;return r.MAX_DISPLAY_COUNT="detailed"===l?3:2,r.state={showCertainContents:i.length>r.MAX_DISPLAY_COUNT},r}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props.item.object,n=t.description,a=t.title,c=t.contentList,o=t.cardType,i=t.type,l=this.state.showCertainContents,s="detailed"===o;return Object(r.b)(C.d,{className:"SearchResult-Card",children:Object(r.b)(_e.a,{children:Object(r.c)("div",{className:"MinorHotSpot",children:[Object(r.c)("div",{className:w()("".concat("MinorHotSpot","-TitleLine"),Object(j.a)({},"".concat("MinorHotSpot","-TitleLine--hasPaddingBottom"),!s)),children:[i===ge.f.minorHotSpot&&!1,i===ge.f.minorHotSpot&&Object(r.b)("img",{src:fn.a,alt:""}),i!==ge.f.minorHotSpot&&Object(r.b)("img",{src:hn.a,alt:""}),Object(r.b)("h1",{dangerouslySetInnerHTML:{__html:a}})]}),n&&s&&Object(r.b)(mn,{description:n}),l?Object(r.b)(un,{className:"".concat("MinorHotSpot","-ContentList--hasPaddingBottom"),contentList:c.slice(0,this.MAX_DISPLAY_COUNT)}):Object(r.b)(un,{contentList:c}),l&&Object(r.c)("div",{className:"".concat("MinorHotSpot","-ShowAll"),onClick:function(){e.setState({showCertainContents:!1})},children:["展开更多 ".concat(c.length-this.MAX_DISPLAY_COUNT," 个内容"),Object(r.b)(F.a,{size:24,center:!0})]})]})})})}}]),n}(p.Component),gn=n(197),yn=n(1328);function On(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var jn=function(e){Object(l.a)(n,e);var t=On(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).handleStatusClick=e.context.authRequired((function(t,n){var r=e.props,a=r.topicVote.totalVotes,c=r.updatedStatus,o=(c=void 0===c?{}:c).totalVotes,i=r.likeTopic,l=r.dislikeTopic,s=r.cancelLikeTopic,u=r.cancelDislikeTopic,d=r.id,f=o||a;switch(t){case"Upvote":i(d,f,n);break;case"UnUpvote":s(d,f);break;case"Downvote":l(d,f,n);break;case"UnDownvote":u(d)}})),e.renderMyReviewStatus=function(){var t,n,a=e.props,c=a.topicVote.status,o=a.updatedStatus,i=(o=void 0===o?{}:o).status||c;return Object(r.b)("div",{className:"".concat("SearchTopicReview","-MyStatus"),children:Object(r.c)("span",{className:"recommendStatus",children:[Object(r.b)("span",{className:w()("".concat("SearchTopicReview","-Icon"),(t={},Object(j.a)(t,"".concat("SearchTopicReview","-Icon--like"),"like"!==i),Object(j.a)(t,"".concat("SearchTopicReview","-Icon--liked"),"like"===i),t)),onClick:function(){return e.handleStatusClick("like"===i?"UnUpvote":"Upvote",i)},children:Object(r.b)(yn.a,{size:14,center:!0})}),Object(r.b)("span",{className:w()("".concat("SearchTopicReview","-Icon"),(n={},Object(j.a)(n,"".concat("SearchTopicReview","-Icon--dislike"),"dislike"!==i),Object(j.a)(n,"".concat("SearchTopicReview","-Icon--disliked"),"dislike"===i),n)),onClick:function(){return e.handleStatusClick("dislike"===i?"UnDownvote":"Downvote",i)},children:Object(r.b)(yn.a,{size:14,center:!0})})]})})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.topicVote,n=t.ratio,a=t.ratioStatus,c=t.totalVotes,o=e.updatedStatus,i=(o=void 0===o?{}:o).totalVotes,l=e.className,s=i||c;return Object(r.c)("div",{className:w()("SearchTopicReview",l),children:["normal"===a?Object(r.c)(p.Fragment,{children:[Object(r.b)("div",{className:"".concat("SearchTopicReview","-Score"),children:Object(r.b)("span",{className:"".concat("SearchTopicReview","-ScoreText"),children:"".concat((100*n).toFixed(0),"%")})}),Object(r.b)("div",{className:"".concat("SearchTopicReview","-Text"),children:"知友推荐"}),Object(r.c)("div",{className:"".concat("SearchTopicReview","-SubText ").concat("SearchTopicReview","-RecommendText"),children:[Object(Ae.cnNiceNumber)(s),"评价"]})]}):Object(r.c)(p.Fragment,{children:[Object(r.b)("div",{className:"".concat("SearchTopicReview","-Text ").concat("SearchTopicReview","-BigText"),children:"你推荐吗？"}),Object(r.b)("div",{className:"".concat("SearchTopicReview","-SubText"),children:"评价人数不足"}),Object(r.b)("div",{className:"".concat("SearchTopicReview","-SubText ").concat("SearchTopicReview","-LackReviewText"),children:"数据积累中"})]}),this.renderMyReviewStatus()]})}}]),n}(p.Component);jn.contextTypes={authRequired:f.a.func};var Cn=Object(Ke.compose)(Object(b.connect)((function(e,t){return{updatedStatus:e.search.topicReview[t.id]}}),{likeTopic:y.k,dislikeTopic:y.e,cancelLikeTopic:y.c,cancelDislikeTopic:y.b}))(jn);function kn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var wn=function(e){Object(l.a)(n,e);var t=kn(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.discussionCount;return Object(r.c)(a.Link,{target:"_blank",className:"SearchTopicHeaderLink",to:"/topic/".concat(t,"/hot"),"data-za-detail-view-id":4358,children:["查看全部 ",Object(Ae.cnNiceNumber)(n),"个讨论",Object(r.b)(V.a,{text:!0,center:!0})]})}}]),n}(p.Component);function Sn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var xn=0,Nn=1,Rn=function(e){Object(l.a)(n,e);var t=Sn(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={showMoreAtCorner:!1},e.onAccessContent=function(t,n){n===document.activeElement&&window.open("/topic/".concat(e.props.id))},e.renderDescriptions=function(){var t=e.props.meta,n=void 0===t?{}:t,a=n.scores,c=void 0===a?[]:a,o=n.wikiDescription,i=void 0===o?[]:o,l=n.template,s=(void 0===l?{}:l).avatarType===Nn||c[0]?1:2;return i.map((function(e,t){if(!(t>=s)&&e){var n=e.split(":"),a=Object(yt.a)(n,2),c=a[0],o=a[1];return Object(r.c)("div",{className:"".concat("SearchTopicHeader","-Meta"),children:[Object(r.b)("span",{className:"".concat("SearchTopicHeader","-MetaKey"),children:"".concat(c,"：")}),Object(r.b)("span",{className:"".concat("SearchTopicHeader","-MetaValue"),children:o})]},e)}}))},e.getIntroLineCount=function(){var t=e.props.meta,n=void 0===t?{}:t,r=n.scores,a=void 0===r?[]:r,c=n.wikiDescription,o=void 0===c?[]:c,i=n.template,l=void 0===i?{}:i,s=4;return l.avatarType!==xn&&(s-=1),a[0]&&(s-=1),o[0]&&(s-=1),l.avatarType===xn&&!a[0]&&o.length>1&&(s=2),s},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){if(this.introRef){var e=this.introRef.querySelector(".".concat("SearchTopicHeader","-IntroTail"));if(e){var t=e.getBoundingClientRect().top,n=this.introRef.getBoundingClientRect();t>=n.height+n.top&&this.setState({showMoreAtCorner:!0})}}}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,c=t.meta,o=void 0===c?{}:c,i=t.name,l=t.avatarUrl,s=t.attachedInfoBytes,u=t.introduction,d=t.topicVote,f=t.showDiscussionLink,p=t.discussionCount,h=t.pubInfo,b=this.state.showMoreAtCorner,m=o.avatarUrl,v=o.title,g=o.template,y=void 0===g?{}:g,O=d||{},C=O.ratio,k=O.totalVotes,S=1===h.status||2===h.status;return Object(r.b)(Le.a,{module:"ContentList",attachedInfoBytes:s,children:Object(r.c)("div",{className:"SearchTopicHeader",children:[Object(r.b)(gn.c,{keyMap:{ACCESS:"enter"},handlers:{ACCESS:this.onAccessContent}}),Object(r.b)(a.Link,{target:"_blank",className:w()("".concat("SearchTopicHeader","-ImageWrapper"),Object(j.a)({},"".concat("SearchTopicHeader","-ImageWrapper--tall"),y.avatarType===xn)),to:"/topic/".concat(n),"data-za-detail-view-id":4361,children:Object(r.b)("img",{src:m||Object(Je.imgUrl)(l,"xl"),className:"".concat("SearchTopicHeader","-Image"),alt:"打开话题页"})}),Object(r.c)("div",{className:"".concat("SearchTopicHeader","-Info"),children:[Object(r.c)("div",{className:"".concat("SearchTopicHeader","-TitleWrapper"),children:[Object(r.b)("h2",{className:"".concat("SearchTopicHeader","-Title"),children:Object(r.b)(a.Link,{target:"_blank",to:"/topic/".concat(n),dangerouslySetInnerHTML:{__html:v||i},"data-za-detail-view-id":3942})}),Object(r.b)("span",{className:"SearchItem-type",children:"话题"})]}),d&&k>=25&&Object(r.c)("div",{className:"".concat("SearchTopicHeader","-Meta"),children:[Object(r.b)("span",{className:"".concat("SearchTopicHeader","-MetaKey"),children:"知乎评分："}),Object(r.b)("span",{className:"".concat("SearchTopicHeader","-MetaValue"),children:(10*C).toFixed(1)})]}),this.renderDescriptions(),u&&Object(r.c)("div",{className:"".concat("SearchTopicHeader","-IntroductionWrapper"),ref:function(t){return e.introRef=t},style:{WebkitLineClamp:this.getIntroLineCount(),maxHeight:22*this.getIntroLineCount()},children:[Object(r.b)("span",{className:"".concat("SearchTopicHeader","-MetaKey"),children:"简介："}),Object(r.b)("div",{className:"".concat("SearchTopicHeader","-Introduction"),dangerouslySetInnerHTML:{__html:u}}),Object(r.b)(a.Link,{target:"_blank",to:"/topic/".concat(n,"/intro"),className:"".concat("SearchTopicHeader","-IntroTail"),"data-za-detail-view-id":4359,children:"更多"}),b&&Object(r.b)(a.Link,{target:"_blank",to:"/topic/".concat(n,"/intro"),className:w()("".concat("SearchTopicHeader","-IntroTail"),"".concat("SearchTopicHeader","-CornerTail")),"data-za-detail-view-id":4359,children:"更多"})]}),f&&Object(r.b)(wn,{id:n,discussionCount:p})]}),d&&!S&&Object(r.b)(Cn,{id:n,topicVote:d,className:"MajorHotSpotReview"})]})})}}]),n}(p.Component);function En(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Tn=function(e){Object(l.a)(n,e);var t=En(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.item,t=e.id,n=e.title,c=e.type,o=e.discussionCount,i=e.voteupCount,l=e.attachedInfoBytes;return Object(r.b)(Le.a,{view:{id:3951},trackCardShow:!0,module:ge.h[c],attachedInfoBytes:l,children:Object(r.c)("li",{className:"".concat("SearchTopicIndex","-ItemWrapper"),children:[Object(r.b)(a.Link,{target:"_blank",className:"".concat("SearchTopicIndex","-Item"),to:"article"===c?"//zhuanlan.zhihu.com/p/".concat(t):"/".concat(c,"/").concat(t),dangerouslySetInnerHTML:{__html:n},"data-za-detail-view-id":3942}),Object(r.b)("span",{className:"".concat("SearchTopicIndex","-ItemMeta"),children:"".concat(Object(Ae.cnNiceNumber)("question"===c?o:i)).concat(ge.j[c])})]},t)})}}]),n}(p.Component);function In(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Pn=function(e){Object(l.a)(n,e);var t=In(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.content,c=n.id,o=n.contentList,i=void 0===o?[]:o,l=n.title,s=n.attachedInfoBytes,u=n.contentCount,d=e.id;return Object(r.b)(Le.a,{module:"TopicIndexItem",attachedInfoBytes:s,children:Object(r.c)("div",{className:w()("SearchTopicIndex",t),children:[Object(r.c)("div",{className:"".concat("SearchTopicIndex","-TitleWrapper"),children:[Object(r.b)("h3",{className:"".concat("SearchTopicIndex","-Title"),children:Object(r.b)(a.Link,{target:"_blank",to:"/topic/".concat(d,"/index#module-").concat(c),dangerouslySetInnerHTML:{__html:l},"data-za-detail-view-id":3942})}),Object(r.c)("span",{children:[" ","(".concat(u,")")]})]}),Object(r.b)("ul",{className:"".concat("SearchTopicIndex","-List"),children:i.slice(0,2).map((function(e){return Object(r.b)(Tn,{item:e},e.id)}))})]})})}}]),n}(p.Component);function Ln(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var An=function(e){Object(l.a)(n,e);var t=Ln(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.list,n=e.id,c=e.attachedInfoBytes,o=t.length;return Object(r.b)(Le.a,{attachedInfoBytes:c,module:"ContentList",children:Object(r.c)("p",{className:"".concat("SearchTopicIndexesExtra"),children:[Object(r.b)("span",{className:"".concat("SearchTopicIndexesExtra","-LeadingText"),children:"更多内容："}),t.slice(0,2).map((function(e,t){var c=e.id,o=e.title,i=e.contentCount;return Object(r.c)(p.Fragment,{children:[0!==t&&Object(r.b)(qt.a,{className:"".concat("SearchTopicIndexesExtra","-Bull")}),Object(r.b)(a.Link,{target:"_blank",className:"".concat("SearchTopicIndexesExtra","-Item"),to:"/topic/".concat(n,"/index#module-").concat(c),dangerouslySetInnerHTML:{__html:"".concat(o," (").concat(i,")")},"data-za-detail-view-id":4360})]},c)})),o>2&&Object(r.c)(p.Fragment,{children:[Object(r.b)(qt.a,{className:"".concat("SearchTopicIndexesExtra","-Bull")}),Object(r.b)(a.Link,{target:"_blank",className:"".concat("SearchTopicIndexesExtra","-Item"),to:"/topic/".concat(n,"/index#module-").concat(t[2].id),"data-za-detail-view-id":4360,children:"全部分类内容"})]})]})})}}]),n}(p.Component);function _n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Mn=function(e){Object(l.a)(n,e);var t=_n(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.list,n=e.id,a=e.attachedInfoBytes;return Object(r.c)("div",{className:"SearchTopicIndexes",children:[Object(r.b)("ul",{className:"".concat("SearchTopicIndexes","-List"),children:t.slice(0,2).map((function(e){return Object(r.b)("li",{className:"".concat("SearchTopicIndexes","-ListItem"),children:Object(r.b)(Pn,{content:e,id:n})},e.title)}))}),this.withExtra&&Object(r.b)(An,{id:n,list:t.slice(2),attachedInfoBytes:a})]})}},{key:"withExtra",get:function(){return this.props.list.length>2}}]),n}(p.Component),zn=Object(a.withRouter)(Mn);function Dn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Bn=function(e){Object(l.a)(n,e);var t=Dn(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.item.object,t=e.meta,n=e.name,a=void 0===n?"":n,c=e.contentList,o=void 0===c?[]:c,i=e.attachedInfoBytes,l=t.id,s=t.pubInfo,u=void 0===s?{}:s,d=t.topicVote,f=t.discussionCount,p=t.avatarUrl,h=void 0===p?"":p,b=t.description,m=(1===u.status||u.status,o.length>0);return Object(r.b)(C.d,{className:"SearchResult-Card",children:Object(r.b)(_e.a,{children:Object(r.b)(Le.a,{view:{id:3951},trackCardShow:!0,attachedInfoBytes:i,module:"SearchResultItem",children:Object(r.c)("div",{className:"MajorHotSpot",children:[Object(r.b)(Rn,{id:l,meta:t,name:a,pubInfo:u,avatarUrl:h,attachedInfoBytes:i,introduction:b,topicVote:d,showDiscussionLink:!m,discussionCount:f}),!1,m&&Object(r.b)(zn,{hotList:o,list:o,id:l,attachedInfoBytes:i})]})})})})}}]),n}(p.Component),Vn=n(797);function Fn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Hn=function(e){Object(l.a)(n,e);var t=Fn(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.item,t=e.id,n=e.title,c=e.type,o=e.answerCount,i=e.voteupCount,l=e.attachedInfoBytes,s=Object(Ae.cnNiceNumber)("question"===c?o:i);return Object(r.b)(Le.a,{view:{id:3951},trackCardShow:!0,attachedInfoBytes:l,module:"ContentList",children:Object(r.c)("li",{className:"".concat("WikiBoxHotList","-Item"),children:[Object(r.b)(a.Link,{target:"_blank",to:"article"===c?"//zhuanlan.zhihu.com/p/".concat(t):"/".concat(c,"/").concat(t),dangerouslySetInnerHTML:{__html:n},"data-za-detail-view-id":3942}),s&&Object(r.b)("span",{className:"".concat("WikiBoxHotList","-ItemMeta"),children:"".concat(s).concat(ge.j[e.type])})]})},t)}}]),n}(p.Component);function Un(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var qn=function(e){Object(l.a)(n,e);var t=Un(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.list;return Object(r.c)("div",{className:"WikiBoxHotList",children:[Object(r.c)("h2",{className:"".concat("WikiBoxHotList","-Title"),children:[Object(r.b)(Vn.a,{className:"".concat("WikiBoxHotList","-Icon"),size:22,center:!0}),"正在热议"]}),Object(r.c)("div",{className:"".concat("WikiBoxHotList","-Container"),children:[Object(r.b)("div",{className:"".concat("WikiBoxHotList","-Line")}),Object(r.b)("ul",{className:"".concat("WikiBoxHotList","-Lists"),children:e.slice(0,3).map((function(e){return Object(r.b)(Hn,{item:e},e.id)}))})]})]})}}]),n}(p.Component);function Wn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Kn=function(e){Object(l.a)(n,e);var t=Wn(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.hotList,n=e.essenceList,a=e.id,c=e.attachedInfoBytes;return t.length?Object(r.b)(qn,{list:t,id:a}):Object(r.b)(zn,{list:n,id:a,attachedInfoBytes:c})}}]),n}(p.Component);function Gn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Qn=function(e){Object(l.a)(n,e);var t=Gn(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.item.object,t=e.id,n=e.meta,a=e.name,c=void 0===a?"":a,o=e.avatarUrl,i=void 0===o?"":o,l=e.introduction,s=e.topicVote,u=e.pubInfo,d=void 0===u?{}:u,f=e.discussionCount,p=e.contentHotList,h=void 0===p?[]:p,b=e.contentEssenceList,m=void 0===b?[]:b,v=e.extraContentEssenceList,g=void 0===v?[]:v,y=e.attachedInfoBytes,O=(1===d.status||d.status,h.length>0||m.length>0);return Object(r.b)(C.d,{className:"SearchResult-Card",children:Object(r.b)(_e.a,{children:Object(r.b)(Le.a,{view:{id:3951},trackCardShow:!0,attachedInfoBytes:y,module:"SearchResultItem",children:Object(r.c)("div",{className:"WikiBox",children:[Object(r.b)(Rn,{id:t,meta:n,name:c,pubInfo:d,avatarUrl:i,attachedInfoBytes:y,introduction:l,topicVote:s,showDiscussionLink:!O,discussionCount:f}),!1,O&&Object(r.b)(Kn,{hotList:h,essenceList:m,extraContentEssenceList:g,id:t,attachedInfoBytes:y})]})})})})}}]),n}(p.Component);function Zn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Jn=function(e){Object(l.a)(n,e);var t=Zn(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).handleClick=function(e,t){z.a.trackEvent(t.target,{id:4517,action:"OpenUrl"},{search:{raw_query:e}})},e.renderQuery=function(t){var n=t.query,a=t.attachedInfoBytes;return Object(r.b)(Le.a,{view:{id:4516},trackCardShow:!0,attachedInfoBytes:a,module:"RelatedSearchItem",extra:{search:{raw_query:n}},children:Object(r.b)("li",{children:Object(r.b)("a",{href:"/search?q=".concat(n,"&utm_content=search_relatedsearch"),"data-za-not-track-link":!0,onClick:function(t){return e.handleClick(n,t)},children:n})})},n)},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.item.queryList,t=void 0===e?[]:e;return 0===t.length?null:Object(r.b)(C.d,{className:"SearchResult-Card",children:Object(r.b)(_e.a,{children:Object(r.c)("div",{className:"RelevantQuery",children:[Object(r.b)("h2",{children:"相关搜索"}),Object(r.b)(Le.a,{module:"Content",children:Object(r.b)("ul",{children:t.map(this.renderQuery)})})]})})})}}]),n}(p.Component),Yn=Object(Le.b)((function(e){var t=e.club.object,n=e.zaInfo,r=(n=void 0===n?{}:n).cardShowId;return{view:{id:void 0===r?3950:r},module:"Content",attachedInfoBytes:t.attachedInfoBytes,index:e.index.toString(),content:{type:"Club",token:t.id.toString()},trackCardShow:!0}}))((function(e){var t=e.club.object,n=t.clubPostCount,c=t.avatarUrl,o=t.memberCount,i=t.description,l=t.name,s=t.id,u="/club/".concat(s);return Object(r.b)(C.d,{className:"SearchResult-Card",children:Object(r.b)(_e.a,{children:Object(r.c)("div",{className:"SearchClubCard",children:[Object(r.b)(a.Link,{target:"_blank",to:u,"data-za-detail-view-id":3942,children:Object(r.b)("img",{src:c,className:"SearchClubCard-avatar"})}),Object(r.c)("div",{className:"SearchClubCard-content",children:[Object(r.b)(a.Link,{target:"_blank",to:u,"data-za-detail-view-id":3942,children:Object(r.c)("div",{className:"SearchClubCard-headline",children:[Object(r.b)("span",{className:"Highlight",dangerouslySetInnerHTML:{__html:l}}),Object(r.b)("span",{className:"SearchClubCard-headlineIcon",children:"圈子"})]})}),Object(r.b)("p",{className:"SearchClubCard-count",children:"".concat(Object(Ae.cnNiceNumber)(n)," 帖子 · ").concat(Object(Ae.cnNiceNumber)(o)," 人已加入")}),Object(r.c)("p",{className:"SearchClubCard-description",children:[Object(r.b)("span",{children:"简介："}),Object(r.b)("span",{className:"Highlight",dangerouslySetInnerHTML:{__html:i}})]})]})]})})})})),Xn=n(1915),$n=n.n(Xn);function er(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var tr=function(e){Object(l.a)(n,e);var t=er(n);function n(){var e;Object(o.a)(this,n);for(var c=arguments.length,i=new Array(c),l=0;l<c;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).openRecent=function(t){var n=e.props.router,r=n.push,a=n.location.search;z.a.trackEvent(t.target,{id:4551,action:"OpenUrl"}),r("/search".concat(a,"&range=1w"))},e.renderMainContent=function(e){switch(e.type){case"answer":return Object(r.b)(Mt,{index:0,answer:{type:"answer",object:e},zaInfo:{cardShowId:4541}});case"article":return Object(r.b)(Ht,{index:0,article:{type:"article",object:e},zaInfo:{cardShowId:4541}});case"question":return Object(r.b)(We,{preset:"plain",index:0,question:{type:"question",object:e},zaInfo:{cardShowId:4541}});default:return null}},e.renderTitle=function(e){var t=e.type,n=e.title,r=e.question;return"answer"===t?r&&r.name||"":n||""},e.renderContentLink=function(e){var t=e.id,n=e.type,r=e.question;switch(n){case"article":return"//zhuanlan.zhihu.com/p/".concat(t);case"question":return"/".concat(n,"/").concat(t);case"answer":return r&&r.id?"/question/".concat(r.id,"/answer/").concat(t):"";default:return""}},e.generateMeta=function(e,t){var n=Object(Ae.cnNiceNumber)(e);return n&&"0"!==n?"".concat(n).concat(t):""},e.renderMeta=function(t){var n=t.type,r=t.answerCount,a=t.voteupCount,c=t.updatedTime,o="question"===n?e.generateMeta(r,"个回答"):e.generateMeta(a,"赞同");return"".concat(o).concat(o?" · ":"").concat(Object(Fe.c)(c))},e.renderPlainContent=function(t){var n=t.id,c=t.attachedInfoBytes;return Object(r.b)(Le.a,{view:{id:4541},trackCardShow:!0,attachedInfoBytes:c,module:"SearchResultItem",children:Object(r.c)("div",{className:"".concat("TimeBox","-PlainContent"),children:[Object(r.b)("p",{className:"".concat("TimeBox","-ContentTitle"),children:Object(r.b)(a.Link,{target:"_blank",to:e.renderContentLink(t),"data-za-detail-view-id":3942,children:Object(r.b)("span",{dangerouslySetInnerHTML:{__html:e.renderTitle(t)}})})}),Object(r.b)("span",{className:"".concat("TimeBox","-ContentMeta"),children:e.renderMeta(t)})]})},n)},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props.items,n=void 0===t?[]:t;return 0===n.length?null:Object(r.b)(C.d,{className:"SearchResult-Card",children:Object(r.b)(_e.a,{children:Object(r.c)("div",{className:"TimeBox",children:[Object(r.c)("div",{className:"".concat("TimeBox","-TimeTitle"),children:[Object(r.b)("img",{src:$n.a,className:"".concat("TimeBox","-TimeTitleIcon")}),Object(r.b)("h2",{children:"最新讨论"})]}),Object(r.b)("div",{className:"".concat("TimeBox","-Content"),children:n.map((function(t,n){return t?0===n?Object(r.b)("div",{className:"".concat("TimeBox","-MainContent"),children:e.renderMainContent(t)},t.id):e.renderPlainContent(t):null}))}),Object(r.b)("div",{className:"".concat("TimeBox","-Footer"),children:Object(r.c)("span",{onClick:this.openRecent,children:["查看最近一周全部结果 ",Object(r.b)(V.a,{text:!0,center:!0})]})})]})})})}}]),n}(p.Component),nr=Object(Ke.compose)(a.withRouter,Object(b.connect)((function(e,t){var n=e.entities,r=t.item.object,a=(r=void 0===r?{}:r).contentList;return{items:(void 0===a?[]:a).map((function(e){var t=e.id,r=e.schema;return(n["".concat(r,"s")]||{})[t]}))}})))(tr),rr=n(147),ar=n(908);var cr=function(e){var t=e.item,n=e.zaExtra,a=t.object,c=a.attachedInfoBytes,o=a.header,i=a.banner,l=a.entities,s=a.topicBestAnswereres,u=Object(rr.b)().isDarkMode,d=Object(p.useMemo)((function(){var e=o.avatarUrl,t=o.avatarUrlDark;return u?t:e}),[o,u]),f=Object(p.useMemo)((function(){var e=i.imageUrl,t=i.imageUrlDark;return u?t:e}),[i,u]),h=Object(p.useCallback)((function(e){var t=e.target,r=e.link,a=e.zaClickId,c=e.attachedInfoBytes,o=e.authorId;z.a.trackEvent(t,{id:a,action:"OpenUrl"},Object.assign({},n,{module:[Object.assign({},o?{card:{content:[{author_member_hash_id:o}]}}:{},{attached_info_bytes:c})]})),location.href=r}),[n]),b=Object(p.useCallback)((function(e){var t=e.target,n=e.attachedInfoBytes,r=e.id,a=e.urlToken,c=e.zaClickId,o="https://www.zhihu.com/people/".concat(a);h({target:t,link:o,zaClickId:c,authorId:r,attachedInfoBytes:n})}),[h]);return Object(r.b)(Le.a,{trackCardShow:!0,extra:n,view:{id:7395},module:"Content",attachedInfoBytes:c,children:Object(r.c)("div",{className:"NceeActivity",children:[Object(r.b)("div",{className:"".concat("NceeActivity","-header"),onClick:function(e){var t=e.target;return h(Object.assign({target:t},o,{zaClickId:7396}))},children:Object(r.b)("img",{src:d})}),Object(r.b)("div",{className:"".concat("NceeActivity","-grid"),children:l.map((function(e){var t=e.icon,n=e.link,a=e.name,c=e.attachedInfoBytes;return Object(r.c)("div",{className:"".concat("NceeActivity","-item"),onClick:function(e){var t=e.target;return h({target:t,link:n,attachedInfoBytes:c,zaClickId:7396})},children:[Object(r.b)("img",{src:t}),Object(r.b)("span",{children:a})]},a)}))}),f&&Object(r.b)("div",{className:"".concat("NceeActivity","-banner"),onClick:function(e){var t=e.target;return h(Object.assign({target:t},i,{zaClickId:8951}))},children:Object(r.b)("img",{src:f})}),Boolean(null==s?void 0:s.length)&&Object(r.c)("div",{className:"".concat("NceeActivity","-gallery"),children:[Object(r.b)("div",{className:"".concat("NceeActivity","-title"),children:"高考话题优秀答主"}),Object(r.b)("div",{className:"".concat("NceeActivity","-content"),children:s.map((function(e){return Object(r.b)("div",{className:"".concat("NceeActivity","-authorWrapper"),children:Object(r.c)("div",{className:"".concat("NceeActivity","-author"),onClick:function(t){var n=t.target;return b(Object.assign({target:n},e,{zaClickId:8952}))},children:[Object(r.b)(ar.a,{className:"".concat("NceeActivity","-avatar"),user:e,shouldShowBadge:!0}),Object(r.c)("div",{className:"".concat("NceeActivity","-info"),children:[Object(r.b)("div",{className:"".concat("NceeActivity","-name"),children:e.name}),Object(r.b)("div",{className:"".concat("NceeActivity","-desc"),children:e.description})]})]})},e.id)}))})]})]})})},or=function(e){var t=e.item,n=(null==t?void 0:t.object)||{},a=n.attachedInfoBytes,c=n.avatarUrl,o=n.link;return Object(r.b)(C.d,{className:"SearchResult-Card SearchResult-AnniversaryActivityWrap",children:Object(r.b)(_e.a,{children:Object(r.b)(Le.a,{trackCardShow:!0,view:{id:10244},module:"Content",attachedInfoBytes:a,children:Object(r.b)("div",{className:"AnniversaryActivity-wrap",style:{backgroundImage:"url(".concat(c,")")},onClick:function(e){z.a.trackEvent(e.target,{id:10245,action:"OpenUrl"},{attached_info_bytes:a}),location.href=o}})})})})};function ir(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var lr=function(e){Object(l.a)(n,e);var t=ir(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"renderItem",value:function(){var e=this.props,t=e.generalItem,n=e.index,a=e.keyword;if("anniversary_activity"===t.type)return Object(r.b)(or,{item:t});if("relevant_query"===t.type)return Object(r.b)(Jn,{item:t});if("time_box"===t.type)return Object(r.b)(nr,{item:t});if("ncee_2020_activity"===t.type)return Object(r.b)(cr,{item:t,zaExtra:{search:{input_query:a,raw_query:a}}});var c=t.object.type;if(Object(y.i)(t))return Object(r.b)(C.d,{className:"SearchResult-Card",children:Object(r.b)(me,{zaInfo:{input_query:a,raw_query:a},query:{type:this.props.type,content:a},result:t})});if(Object(y.h)(t))return Object(r.b)(Mt,{zaInfo:{expandId:6044,clickId:6045,cardShowId:5914},index:n,answer:t});if(Object(y.j)(t))return Object(r.b)(C.d,{className:"SearchResult-Card",children:Object(r.b)(Se,{zaExtra:{search:{input_query:a,raw_query:a}},result:t})});if(!t.object)return null;switch(c){case"question":return Object(r.b)(We,{preset:"plain",index:n,question:t});case"answer":return Object(r.b)(Mt,{index:n,answer:t});case"article":case"promotion":return Object(r.b)(Ht,{index:n,article:t});case"brief":return Object(r.b)(Yn,{index:n,club:t});case"topic":return Object(r.b)($t,{query:a,topic:t,index:n,showMore:!0});case"people":return Object(r.b)(nn,{query:a,user:t,index:n,showMore:!0});case"column":return Object(r.b)(Zt,{query:a,column:t,index:n,showMore:!0});case"wiki_box":return Object(r.b)(Qn,{item:t});case ge.f.minorHotSpot:case ge.f.domainMinorHot:return Object(r.b)(vn,{item:t});case ge.f.majorHotSpot:return Object(r.b)(Bn,{item:t});default:return null}}},{key:"render",value:function(){return this.renderItem()}}]),n}(p.Component),sr=n(839),ur=n(224),dr=n(148),fr=n(129),pr=n(404),hr=n(1916),br=n.n(hr);function mr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var vr=function(e){Object(l.a)(n,e);var t=mr(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={inputText:e.props.query.q},e.handleInputChange=function(t){e.setState({inputText:t.target.value})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.state.inputText,t=this.props,n=t.query.type,a=t.onRef;return Object(r.b)(C.d,{onRef:a,className:"SearchNoContent-wrapper",children:"content"===n?Object(r.c)("div",{className:"SearchNoContent-content",children:[Object(r.b)("div",{className:"SearchNoContent-title",children:"没有想要的内容？"}),Object(r.b)(fr.a,{className:"SearchNoContent-input",value:e,onChange:this.handleInputChange}),Object(r.b)(pr.b,{children:Object(r.b)(Ge.c,{preset:"primary",color:"blue",className:"SearchNoContent-button",onClick:this.handleOpenModal,children:"我要提问"})})]}):Object(r.c)("div",{className:"SearchNoContent-content",children:[Object(r.b)(br.a,{width:150,height:120}),Object(r.b)("div",{className:"SearchNoContent-description",children:"暂无搜索结果"})]})})}}]),n}(p.Component);vr.contextTypes={authRequired:f.a.func};var gr=Object(Le.b)({module:"SearchResultItem"})(vr),yr=n(407),Or=n.n(yr);function jr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Cr={people:"用户",topic:"话题",column:"专栏",live:"内容",album:"内容",publication:"内容"},kr=function(e){Object(l.a)(n,e);var t=jr(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).handleClickButton=function(){var t=e.props.query.q;Or()("zhihu://search?q=".concat(t))},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.query,t=e.q,n=e.type;return"content"!==n?Object(r.c)("div",{className:"MobileEmptyPage MobileEmptyPageWithType",children:["未搜索到相关",Cr[n]]}):Object(r.c)("div",{className:"MobileEmptyPage",children:[Object(r.c)("div",{className:"".concat("EmptyPage","-Description"),children:[Object(r.b)(an,{className:w()("".concat("EmptyPage","-Quote"),"".concat("EmptyPage","-Quote--left"))}),Object(r.b)("span",{className:"".concat("EmptyPage","-DescriptionText"),children:t}),Object(r.b)(on,{className:w()("".concat("EmptyPage","-Quote"),"".concat("EmptyPage","-Quote--right"))})]}),Object(r.b)("p",{className:"MobileEmptyPage-desc",children:"未找到相关内容，提问快速获得回答"}),Object(r.b)("button",{className:"MobileEmptyPage-button",onClick:this.handleClickButton,children:"立即提问"})]})}}]),n}(p.Component);Object(Le.b)({module:"SearchResultItem"})(kr);function wr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Sr=function(e){Object(l.a)(n,e);var t=wr(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).trackedEmpty=!1,e.handleLoad=function(){var t=e.props,n=t.query,r=n.type,a=n.q,c=n.correction,o=void 0===c?1:c,i=n.range,l=t.loadSearch,s=t.isFetching,u=t.attachedInfo,d=(u=void 0===u?{}:u).searchHashId,f=u.lcIdx,p=t.nextOffset,h=(p=void 0===p?{}:p).offset,b=void 0===h?0:h,m=p.limit,v=void 0===m?y.a:m,g=t.verticalInfo;s||l({searchHashId:d,lcIdx:f,type:Object(ge.n)(r),query:a,range:ge.m[i],offset:b,limit:v,correction:o,showAllTopics:"topic"===r,verticalInfo:g})},e.trackSearchAction=function(t){var n=t||e.props.attachedInfo;if(n){var r=n.attachedInfoBytes;z.a.trackEvent(e.listNode,{action:"Search",id:3953},{attached_info_bytes:r})}},e.trackEmptySearchResult=function(t,n){if(n||e.props.attachedInfo){var r=n.attachedInfoBytes;z.a.trackEvent("empty"===t?e.emptyNode:e.listNode,{id:"empty"===t?4314:4316},{attached_info_bytes:r}),e.trackedEmpty=!0}},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.items,n=void 0===t?[]:t,r=e.showEmpty,a=e.attachedInfo;(n.length>0||r)&&this.trackSearchAction(a),!this.trackedEmpty&&r&&a&&this.trackEmptySearchResult("empty",a)}},{key:"componentWillReceiveProps",value:function(e){var t=e.items,n=void 0===t?[]:t,r=e.isDrained,a=e.showEmpty,c=e.attachedInfo,o=this.props,i=o.items,l=void 0===i?[]:i,s=o.isDrained;n.length>l.length&&this.trackSearchAction(c),this.trackedEmpty||(a?this.trackEmptySearchResult("empty",c):r!==s&&this.trackEmptySearchResult("noMore",c))}},{key:"renderItems",value:function(){var e=this.props,t=e.ssrSuspendCount,n=e.renderItem,r=e.items.filter((function(e){return e&&!e.isDelete}));return t&&Object(Re.isNode)()?Object(dr.b)(t,r.map(n)):r.map(n)}},{key:"render",value:function(){var e=this,t=this.props,n=t.isFetching,a=t.isDrained,c=t.query,o=t.showEmpty;if(void 0!==o&&o&&a)return Object(r.b)(gr,{onRef:function(t){return e.emptyNode=t},query:c});var i=Object(r.b)(sr.a,{children:Object(r.b)(ur.a,{className:"List-item",small:!0})});return Object(r.b)(ur.b,{onRef:function(t){return e.listNode=t},isLoading:n,isDrained:a,onLoad:this.handleLoad,placeholder:i,children:this.renderItems()})}}]),n}(p.Component);Sr.propTypes={renderItem:f.a.func.isRequired};var xr=Object(Ke.compose)(Object(b.connect)((function(e,t){var n=e.entities,r=e.search,a=t.query,c=a.type,o=void 0===c?"content":c,i=a.q,l=a.range,s=void 0===l?"no_limit":l,u=Object(ge.n)(o),d=ge.m[s],f=Object(ge.l)(u,d),p=f.keyNameInReducer,h=f.keyNameInEntities,b=r.attachedInfo[p],m=r.nextOffset[p];if("general"===u){var v=r[p][i]||{isFetching:!1,isDrained:!1,ids:[],next:""},y=v.isFetching,O=v.isDrained,j=v.ids,C=v.next,k=n[h],w=j&&0===j.length,S=(C?Object(g.parse)(C.split("?")[1]):{}).vertical_info;return{showEmpty:w,isFetching:y,isDrained:O,items:j.map((function(e){var t=k&&k[e];if(t&&ge.d.includes(t.type)){if(ge.g.includes(t.type))return t;if(["knowledge_ad","knowledge_result"].includes(t.type))return"paidAnswer"===t.object.schema?Object.assign({},t,{object:t.object.id}):t;if("ebook_saltpick"===t.type)return t;var r=t.object,a=r.schema,c=r.id,o=(n["".concat(a,"s")]||n[a]||{})[c];if(o){var i=o.type;if(ge.b.includes(i))return Object.assign({},t,{object:o})}}})).filter(Boolean),attachedInfo:b,nextOffset:m,verticalInfo:S}}if("people"===u){var x=r.peopleByQuery[i]||{isFetching:!1,isDrained:!1,ids:[]},N=x.isFetching,R=x.isDrained,E=x.ids,T=n.searchPeople;return{showEmpty:E&&0===E.length,isFetching:N,isDrained:R,items:E.filter((function(e){return Boolean(e)})).map((function(e){var t=T[e]||{},r=t.object;return Object.assign({},t,{object:(n.users||{})[r]})})),attachedInfo:b,nextOffset:m}}if("topic"===u){var I=r.topicByQuery[i]||{isFetching:!1,isDrained:!1,ids:[]},P=I.isFetching,L=I.isDrained,A=I.ids,_=n.searchTopic;return{showEmpty:A&&0===A.length,isFetching:P,isDrained:L,items:A.filter((function(e){return Boolean(e)})).map((function(e){var t=_[e]||{},r=t.object;return Object.assign({},t,{object:(n.topics||{})[r]})})),attachedInfo:b,nextOffset:m}}if("column"===u){var M=r.columnByQuery[i]||{isFetching:!1,isDrained:!1,ids:[]},z=M.isFetching,D=M.isDrained,B=M.ids,V=n.searchColumn;return{showEmpty:B&&0===B.length,isFetching:z,isDrained:D,items:B.filter((function(e){return Boolean(e)})).map((function(e){var t=V[e]||{},r=t.object;return Object.assign({},t,{object:(n.columns||{})[r]})})),attachedInfo:b,nextOffset:m}}if("live"===u){var F=r.liveByQuery[i]||{isFetching:!1,isDrained:!1,ids:[]},H=F.isFetching,U=F.isDrained,q=F.ids,W=n.searchLive;return{showEmpty:q&&0===q.length,isFetching:H,isDrained:U,items:q.filter((function(e){return Boolean(e)})).map((function(e){if(n.searchKnowledge[e])return n.searchKnowledge[e];var t=W[e]||{},r=t.object,a=r.schema,c=r.id;return Object.assign({},t,{object:(n["".concat(a,"s")]||{})[c]})})).filter(Boolean),attachedInfo:b,nextOffset:m}}if("album"===u){var K=r.albumByQuery[i]||{isFetching:!1,isDrained:!1,ids:[]},G=K.isFetching,Q=K.isDrained,Z=K.ids,J=n.searchAlbum;return{showEmpty:Z&&0===Z.length,isFetching:G,isDrained:Q,items:Z.filter((function(e){return Boolean(e)})).map((function(e){if(n.searchKnowledge[e])return n.searchKnowledge[e];var t=J[e]||{},r=t.object;return Object.assign({},t,{object:(n.albums||{})[r]})})),attachedInfo:b,nextOffset:m}}if("publication"===u){var Y=r.eBookByQuery[i]||{isFetching:!1,isDrained:!1,ids:[]},X=Y.isFetching,$=Y.isDrained,ee=Y.ids,te=n.searchEBook;return{showEmpty:ee&&0===ee.length,isFetching:X,isDrained:$,items:ee.filter((function(e){return Boolean(e)})).map((function(e){if(n.searchKnowledge[e])return n.searchKnowledge[e];var t=te[e]||{},r=t.object;return Object.assign({},t,{object:(n.ebooks||{})[r]})})),attachedInfo:b,nextOffset:m}}if("km_general"===u){var ne=r.kmGeneralByQuery[i]||{isFetching:!1,isDrained:!1,ids:[]},re=ne.isFetching,ae=ne.isDrained,ce=ne.ids,oe=n.searchKmGeneral;return{showEmpty:ce&&0===ce.length,isFetching:re,isDrained:ae,items:ce.filter((function(e){return Boolean(e)})).map((function(e){if(n.searchKnowledgeGeneral[e])return n.searchKnowledgeGeneral[e];var t=oe[e]||{},r=t.object;return Object.assign({},t,{object:(n.ebooks||{})[r]})})),attachedInfo:b,nextOffset:m}}if("clubentity"===u){var ie=r.clubentityByQuery[i]||{isFetching:!1,isDrained:!1,ids:[]},le=ie.isFetching,se=ie.isDrained,ue=ie.ids,de=n.searchClub;return{showEmpty:ue&&0===ue.length,isFetching:le,isDrained:se,items:ue.filter((function(e){return Boolean(e)})).map((function(e){var t=de[e]||{},r=t.object;return Object.assign({},t,{object:(n.clubs||{})[r]})})),attachedInfo:b,nextOffset:m}}if("club"===u){var fe=r.clubPostByQuery[i]||{isFetching:!1,isDrained:!1,ids:[]},pe=fe.isFetching,he=fe.isDrained,be=fe.ids,me=n.searchPost;return{showEmpty:be&&0===be.length,isFetching:pe,isDrained:he,items:be.filter((function(e){return Boolean(e)})).map((function(e){var t=me[e]||{},r=t.object;return Object.assign({},t,{object:(n.posts||{})[r]})})),attachedInfo:b,nextOffset:m}}return{isFetching:!1,isDrained:!1,items:[],attachedInfo:b,nextOffset:m}}),{loadSearch:y.l}),Object(Le.b)({module:"SearchResultList"}))(Sr),Nr=function(e){var t=e.handleClick,n=e.club,a=e.content,c=e.isWeb,o=void 0!==c&&c,i=n.avatarUrl,l=n.name,s=n.description,u=n.clubPostCount,d=n.memberCount,f={zaAction:"OpenUrl",zaEventType:"Click",shouldTrackClick:!0,extra:{link:{get url(){return location.origin+"/club/".concat(n.id)}}},onClick:function(e){t&&t(e)}},p=Object(r.c)(D.e,Object.assign({zaType:"Card"},!o&&f,{className:w()("Club-Search-Content",{"Club-Search-WebContent":o}),children:[Object(r.b)("div",{className:"Club-Search-ImgWrap",children:Object(r.b)("img",{src:i,css:Object(Ne.e)()})}),Object(r.c)("div",{className:"Club-Search-Right",children:[Object(r.c)("div",{className:"Club-Search-Text",children:[Object(r.b)(D.a,Object.assign({zaType:"Card",className:"Club-Search-Name Highlight"},o?f:{shouldTrackClick:!1},{dangerouslySetInnerHTML:{__html:l}})),Object(r.b)("div",{className:"Club-Search-Desc Highlight",dangerouslySetInnerHTML:{__html:s}}),Object(r.b)("div",{className:"Club-Search-Count",children:Object(r.c)("div",{className:"Club-Search-Post",children:[0!=u&&"".concat(Object(Ae.cnNiceNumber)(u)," 帖子 · "),0!=d&&"".concat(Object(Ae.cnNiceNumber)(d)," 人已加入")]})})]}),a]})]}));return Object(r.b)(D.b,{content:{type:"Club",id:n.id},children:p})},Rr=n(1486),Er=n(1514),Tr=Object(Le.b)((function(e){var t=e.club,n=e.zaInfo,r=(n=void 0===n?{}:n).cardShowId,a=void 0===r?3950:r,c=t.attachedInfoBytes,o=t.id;return{view:{id:a},module:"Content",attachedInfoBytes:c,index:e.index.toString(),content:{type:"Club",token:o.toString()},trackCardShow:!0}}))((function(e){var t=e.club,n=e.index,a=t.id,c=t.isJoined,o=t.joinType,i={path:[{index:n}]},l={button:{text:"".concat(c?"已":"").concat(c||"verify"!==o?"":"申请","加入")}};return Object(r.b)(C.d,{children:Object(r.b)(_e.a,{css:{padding:"0 !important"},children:Object(r.b)(Nr,{isWeb:!0,club:t,handleClick:function(e){z.a.trackEvent(e.target,{id:3942,action:"OpenUrl"}),window.open("/club/".concat(a))},content:Object(r.b)(Rr.a,{clubId:a,children:Object(r.b)(Er.a,{clickId:8751,viewProps:i,zaExtra:l,oia:!1,clubId:a,plus:!1,css:function(e){return Object.assign({width:"96px",height:"34px",lineHeight:"34px",textAlign:"center",color:e.colors.GBK99A,fontSize:"13px",fontWeight:"500",borderRadius:"3px",marginLeft:"auto",marginRight:"16px",marginTop:"15px",flexShrink:0,backgroundColor:e.colors.GBL01A},c&&{backgroundColor:e.colors.GBL05A},c&&!1)}})})})})})})),Ir=n(166),Pr=n(1917),Lr=n.n(Pr),Ar=n(1918),_r=n.n(Ar),Mr=n(1919),zr=n.n(Mr),Dr=function(e){var t=e.time;if(!t)return null;var n=new Date(1e3*t);return Object(r.b)("time",{dateTime:n.toISOString(),children:Object(Ir.toSmartString)(n)})},Br=function(e){var t=e.clubId,n=e.post,a=e.onClick,c=e.prefix,o=e.name,i=e.showPoll,l=void 0!==i&&i,s=e.isWeb,u=void 0!==s&&s,d=e.useSingleImg,f=void 0!==d&&d,p=e.showTitle,h=void 0!==p&&p,b=e.showExcerpt,m=void 0!==b&&b,v=e.showClubLabel,g=void 0===v||v,y=n.title,O=n.excerpt,j=n.thumbnailInfo,C=n.pollInfo,k=n.reactionNum,S=n.commentNum,x=n.created,N=Object(Ne.e)(),R=null==j?void 0:j.count,E=!f&&R>=3,T={zaAction:"OpenUrl",zaEventType:"Click",shouldTrackClick:!0,extra:{link:{get url(){return location.origin+"/club/".concat(t,"/post/").concat(n.id)}}},onClick:function(e){a&&a(e)}},I=Object(r.b)(D.e,Object.assign({zaType:"Card"},!u&&T,{className:"Club-SearchPosts-Item",children:Object(r.c)("div",{className:w()("Club-SearchPosts-Content",{"Club-SearchPosts-WebContent":u}),children:[Object(r.b)("div",{children:Object(r.c)("div",{className:"Club-SearchPosts-DescWrap",children:[Object(r.c)("div",{className:w()({"Club-SearchPosts-TextRight":!E,"Club-SearchPosts-TextLineWithTwoLine":E}),children:[h&&y&&Object(r.b)("div",{className:"Club-SearchPosts-Title Club-SearchPosts-TextLineWithOneLine",dangerouslySetInnerHTML:{__html:y.replace(/<\/?br>/g,"")}}),m?Object(r.b)("div",{className:"Club-SearchPosts-Expert",dangerouslySetInnerHTML:{__html:Pe(O.replace(/<\/?br>/g,""),160)}}):Object(r.c)("span",{className:w()("Club-SearchPosts-Desc",{"Club-SearchPosts-TextLineWithThreeLine":!u,"Club-SearchPosts-TextLineWithTwoLine":E&&!u}),css:{height:!o||E||u?"auto":"66px"},children:[c,Object(r.b)("span",{className:"Highlight",dangerouslySetInnerHTML:{__html:Pe(O.replace(/<\/?br>/g,""),160)}})]}),u&&Object(r.c)(D.a,Object.assign({zaType:"Card",as:"button",className:"Club-SearchPosts-button"},T,{children:["查看帖子",Object(r.b)(V.a,{text:!0,center:!0})]}))]}),!E&&!u&&Boolean(R)&&Object(r.c)("div",{className:"Club-SearchPosts-ImgMask",children:["video"===j.thumbnails[0].type&&Object(r.b)(zr.a,{className:"Club-SearchPosts-Video"}),Object(r.b)("img",{css:N,src:j.thumbnails[0].url})]})]})}),E&&!u&&!f&&Object(r.c)("div",{className:"Club-SearchPosts-ImgWrapper",children:[Object(r.b)("div",{className:"Club-SearchPosts-ImgExtraMask",children:Object(r.b)("img",{css:N,src:j.thumbnails[0].url})}),Object(r.b)("div",{className:"Club-SearchPosts-ImgExtraMask",children:Object(r.b)("img",{css:N,src:j.thumbnails[1].url})}),Object(r.c)("div",{className:w()("Club-SearchPosts-ImgExtraMask",{"Club-SearchPosts-ImgMore":j.count>3}),children:[j.count>3&&Object(r.b)("span",{className:"Club-SearchPosts-ImgExtraNum",children:"+".concat(n.thumbnailInfo.count-3)}),Object(r.b)("img",{css:N,src:j.thumbnails[2].url})]})]}),C&&l&&!u&&Object(r.c)("div",{className:"Club-SearchPosts-BottomPoll",children:[Object(r.b)(_r.a,{center:!0,text:!0,className:"Club-SearchPosts-BottomIcon"}),C.title]}),Object(r.c)("div",{className:"Club-SearchPosts-Footer",children:[Object(r.c)("div",{className:"Club-SearchPosts-BottomCount",children:[0!=k&&"".concat(Object(Ae.cnNiceNumber)(k)," 互动 · "),0!=S&&"".concat(Object(Ae.cnNiceNumber)(S)," 评论 · "),Object(r.b)(Dr,{time:x}),u&&Object(r.b)("span",{className:"Highlight",dangerouslySetInnerHTML:{__html:" · 来自「".concat(o,"」")}})]}),g&&o&&!u&&Object(r.c)("p",{className:"Club-SearchPosts-Name",children:[" ",Object(r.b)(Lr.a,{size:17}),Object(r.b)("span",{className:"Highlight",dangerouslySetInnerHTML:{__html:o}})]})]})]})}));return Object(r.b)(D.b,{content:{type:"Clubpost",id:n.id},children:I})},Vr=Object(Le.b)((function(e){var t=e.post,n=e.zaInfo,r=(n=void 0===n?{}:n).cardShowId;return{view:{id:void 0===r?3950:r},module:"Content",attachedInfoBytes:t.contentList[0].attachedInfoBytes,index:e.index.toString(),content:{type:"Clubpost",token:t.contentList[0].id.toString(),parent_token:t.clubId.toString()},trackCardShow:!0}}))((function(e){var t=e.post,n=t.contentList[0],a=n.tagId,c=n.tagName,o=n.title,i=n.id,l=t.name,s=t.clubId;return Object(r.b)(C.d,{children:Object(r.b)(_e.a,{css:{padding:"0 !important"},children:Object(r.b)(Br,{clubId:s,post:t.contentList[0],onClick:function(e){z.a.trackEvent(e.target,{id:3942,action:"OpenUrl"}),window.open("/club/".concat(s,"/post/").concat(i))},showPoll:!1,isWeb:!0,name:l,prefix:Object(r.c)(r.a,{children:[a&&Object(r.b)("span",{className:"Highlight",dangerouslySetInnerHTML:{__html:c}}),a&&Object(r.b)(r.a,{children:" | "}),o&&Object(r.c)(r.a,{children:[Object(r.b)("span",{className:"Highlight",dangerouslySetInnerHTML:{__html:o}})," "]})]})})})})})),Fr=function(e,t){var n=e.type,a=void 0===n?"content":n,c=e.range,o=Object(ge.n)(a),i=ge.m[c];return Object(r.b)(ve.a,{children:Object(r.b)(xr,{ssrSuspendCount:5,renderItem:function(n,a){return function(e){var t,n=e.item,a=e.query,c=e.index,o=e.isCompact,i=a.q,l=a.type;if(["km_general","publication","live","album"].includes(l)&&Object(y.i)(n))t=Object(r.b)(C.d,{className:w()("SearchResult-Card",Object(j.a)({},"".concat("SearchResult-Card","--compact"),o)),children:Object(r.b)(me,{result:n,zaInfo:{input_query:i,raw_query:i},index:c,query:{type:l,content:i},compact:!0})});else switch(l){case"general":t=Object(r.b)(lr,{type:l,keyword:i,generalItem:n,index:c},c);break;case"people":t=Object(r.b)(nn,{user:n,index:c});break;case"topic":t=Object(r.b)($t,{topic:n,index:c});break;case"column":t=Object(r.b)(Zt,{column:n,index:c});break;case"clubentity":t=Object(r.b)(Tr,{club:n.object,index:c});break;case"club":t=Object(r.b)(Vr,{post:n.object,index:c});break;default:t=Object(r.b)(lr,{type:l,keyword:i,generalItem:n,index:c},c)}return Object(r.b)(p.Fragment,{children:t},c)}({item:n,query:e,index:a,isCompact:t})},query:e})},"".concat(o).concat(i?"_".concat(i):""))};function Hr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Ur=function(e){Object(l.a)(n,e);var t=Hr(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.correction,n=t.queryCorrection,a=t.query,c=t.cardType,o=e.query;return"recommend"===c?Object(r.c)(C.d,{className:"SearchCorrection",children:["你是不是要找：",Object(r.b)(De.a,{to:"/search?".concat(Object(g.stringify)(Object.assign({},o,{q:n,correction:0}))),a:!0,preset:"link",children:n})]}):"corrected"===c?Object(r.c)(C.d,{className:"SearchCorrection",children:["已显示"," ",Object(r.b)("span",{className:"SearchCorrection-correctionQueryString",children:n})," ","的搜索结果，仍然搜索：",Object(r.b)(De.a,{to:"/search?".concat(Object(g.stringify)(Object.assign({},o,{q:a,correction:0}))),a:!0,preset:"link",children:a})]}):null}}]),n}(p.Component),qr=Object(Le.b)((function(e){var t=e.correction;return{module:"SearchAutoCorrection",extra:{search:{corrective_query:t.queryCorrection,raw_query:t.query}},trackCardShow:!0}}))(Ur),Wr=n(93),Kr=n.n(Wr),Gr=n(112);function Qr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Zr=function(e){Object(l.a)(n,e);var t=Qr(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.context.router.location.query,t=this.props.subTabList;return Object(r.b)("div",{className:"SearchSubTabs",children:Object(r.b)(Gr.b,{children:t.map((function(t){var n=t.type,c=t.text,o=Object(g.stringify)(Kr()(Object.assign({},e,{type:n}),["range"]));return Object(r.b)(Gr.a,{"aria-controls":"Search-".concat(n),children:Object(r.b)(a.Link,{className:"".concat("SearchSubTabs","-item"),"data-za-detail-view-name":c,to:"/search?".concat(o),children:c})},n)}))})})}}]),n}(p.Component);Zr.contextTypes={router:f.a.object.isRequired,authRequired:f.a.func.isRequired};var Jr=Object(Le.b)({module:"SearchSwitchTabBar"})(Zr),Yr=n(69),Xr=n(171),$r=n(434);function ea(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var ta=[{text:"综合",type:"content"},{text:"用户",type:"people"},{text:"话题",type:"topic"},{text:"专栏",type:"column"},{text:"Live",type:"live"},{text:"盐选专栏",type:"album"},{text:"电子书",type:"publication"},{text:"圈子",type:"clubentity",includeTypes:["clubentity","club"]}],na=[{text:"综合",type:"content"},{text:"用户",type:"people"},{text:"话题",type:"topic"},{text:"专栏",type:"column"},{text:"盐选内容",type:"km_general",includeTypes:["live","album","publication"]},{text:"圈子",type:"clubentity",includeTypes:["clubentity","club"]}],ra=[{text:"全部",type:"km_general"},{text:"盐选专栏",type:"album"},{text:"Live 讲座",type:"live"},{text:"电子书",type:"publication"}],aa=[{text:"圈子",type:"clubentity"},{text:"圈子内容",type:"club"}],ca=[{text:"时间不限",value:""},{text:"一天内",value:"1d"},{text:"一周内",value:"1w"},{text:"三个月内",value:"3m"}],oa=function(e){Object(l.a)(n,e);var t=ea(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).selectChange=function(t){var n=e.context.router,r=n.push,a=n.location.query,c=""===t?Kr()(a,["range"]):Object.assign({},a,{range:t}),o="/search?".concat(Object(g.stringify)(c));z.a.trackEvent(Object(Yr.a)(e),{action:"OpenUrl",name:Object.values(ca).find((function(e){return e.value===t})).text},{link:{url:o}}),r(o)},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.context.router.location.query,t=this.props.isPageHeader;return Object(r.b)("div",{className:w()("SearchTabs",{"SearchTab-bottomShadow":!t}),children:Object(r.c)("div",{className:"SearchTabs-inner",children:[Object(r.c)("div",{className:"SearchTabs-actions",children:[Object(r.b)(Gr.b,{children:this.tabList.map((function(t){var n=t.type,c=t.text,o=t.includeTypes,i=void 0===o?[]:o,l=Object(g.stringify)(Kr()(Object.assign({},e,{type:n}),["range"]));return Object(r.b)(Gr.a,{"aria-controls":"Search-".concat(n),children:Object(r.b)(a.Link,{"data-za-detail-view-name":c,to:"/search?".concat(l),className:w()({"is-active":i.includes(e.type)}),children:c})},n)}))}),"content"===e.type&&Object(r.b)(Xr.b,{needsReposition:!0,plain:!0,value:e.range||"",onChange:this.selectChange,listClassName:"SearchTabs-selectList",children:ca.map((function(e){var t=e.value,n=e.text;return Object(r.b)(Xr.a,{value:t,text:n},t)}))})]}),t&&Object(r.b)($r.a,{searchButtonType:"solid",initialValue:e.q,type:e.type,css:{borderRadius:999,paddingLeft:16,".SimpleSearchBar-solidSearchButton":{borderBottomRightRadius:999,borderTopRightRadius:999}}},e.type)]})})}},{key:"tabList",get:function(){var e=this.props.vipTabListType;return"1"===e||"2"===e?na:ta}}]),n}(p.Component);oa.contextTypes={router:f.a.object.isRequired,authRequired:f.a.func.isRequired};var ia=Object(Ke.compose)(Object(b.connect)((function(e){return{vipTabListType:Object(O.a)(e,"li_vip_verti_search")}})),Object(Le.b)({module:"SearchSwitchTabBar"}))(oa);function la(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var sa=function(e){Object(l.a)(n,e);var t=la(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.location.query,n=e.searchCorrection,a=e.shouldShowVipSubTabs,c=e.shouldShowClubSubTabs,o=e.isCompact;return Object(r.c)("div",{className:"SearchMain",id:"SearchMain",children:[n&&Object(r.b)(qr,{correction:n,query:t}),(a||c)&&Object(r.b)(Jr,{subTabList:a?ra:aa}),Object(r.b)("div",{children:Fr(t,o)})]})}}]),n}(p.Component),ua=Object(b.connect)((function(e,t){var n=t.location.query,r=n.type,a=void 0===r?"content":r,c=n.range,o=void 0===c?"no_limit":c,i=e.entities,l=Object(O.a)(e,"li_vip_verti_search"),s=Object(Fe.b)(Object(ge.n)(a)),u=i[Object(ge.l)(s,Object(Fe.a)(ge.m[o])).keyNameInEntities],d=void 0===u?{}:u,f="km_general"===s&&"1"===l;return{searchCorrection:Object.keys(d).map((function(e){return d[e]})).find((function(e){return"search_query_correction"===e.type})),finalType:s,shouldShowVipSubTabs:ra.map((function(e){return e.type})).includes(s)&&("1"===l||"2"===l),shouldShowClubSubTabs:aa.map((function(e){return e.type})).includes(s),isCompact:f}}))(sa),da=n(1037),fa=n(980);function pa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var ha={utm_source:"zhihu",utm_content:"search_hot",utm_medium:"organic"},ba=function(e){Object(l.a)(n,e);var t=pa(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.index;return Object(r.b)("div",{className:"TopSearch-item",children:Object(r.c)(a.Link,{className:"TopSearch-itemLink",target:"_blank",to:"/search?".concat(Object(g.stringify)(Object.assign({q:t.query},ha))),children:[Object(r.b)("span",{className:"TopSearch-itemText",children:t.displayQuery}),n<3&&Object(r.b)(Vn.a,{className:"TopSearch-hot",size:18})]},n)})}}]),n}(p.PureComponent),ma=Object(Ke.compose)(a.withRouter,Object(Le.b)((function(e){return{module:"HotSearchWordItem",trackCardShow:!0,extra:{search:{search_source:"Hot",raw_query:e.item.query||""}}}})))(ba);function va(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var ga=function(e){Object(l.a)(n,e);var t=va(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.loadTopSearch)()}},{key:"componentDidUpdate",value:function(e){var t=e.words,n=this.props,r=n.words,a=n.onHeightChange;a&&(!t&&r||r.length!==t.length)&&a()}},{key:"render",value:function(){var e=this.props,t=e.words,n=e.spread,a=e.maxCount,c=e.blue;return t&&t.length?Object(r.c)(C.d,{className:w()("TopSearch","TopSearch--new"),children:[Object(r.b)(C.b,{children:"知乎热搜"}),Object(r.b)("div",{className:w()("TopSearch-items",{"TopSearch-items--spread":n,"TopSearch-items--blue":c}),children:t.slice(0,a).map((function(e,t){return Object(r.b)(ma,{item:e,index:t},t)}))})]}):null}}]),n}(p.Component),ya=Object(Ke.compose)(Object(Le.b)({module:"HotSearchWordList"}),Object(b.connect)((function(e){return{words:e.search.topSearch&&e.search.topSearch.words}}),{loadTopSearch:y.m}))(ga),Oa=n(223);function ja(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Ca=function(e){Object(l.a)(n,e);var t=ja(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).onHeightChange=function(){e.dynamicSticky&&e.dynamicSticky.check()},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props.searchType;return Object(r.b)("div",{className:"SearchSideBar",children:Object(r.c)(fa.a,{offset:ht.i+ge.a,ref:function(t){e.dynamicSticky=t},children:[Object(r.b)(ya,{onHeightChange:this.onHeightChange}),Object(r.b)(da.a,{})]})},t)}}]),n}(p.Component),ka=Object(Oa.a)(null)(Ca),wa=n(1038),Sa=n(299);function xa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Na=function(e){Object(l.a)(n,e);var t=xa(n);function n(e,r){var a;return Object(o.a)(this,n),(a=t.call(this,e,r)).checkRedirect(e),a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.location.query,t=(e=void 0===e?{}:e).q,n=this.context.currentUser,r=(n=void 0===n?{}:n).id;if("string"!=typeof t){var a=new Error("manual throw error: wrong location query");window.Raven&&window.Raven.captureException(a,{extra:{location:this.props.location}})}t&&Object(Sa.d)(Object(Sa.b)(r),{q:t})}},{key:"componentWillReceiveProps",value:function(e){this.checkRedirect(e)}},{key:"checkRedirect",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=t.location.query,r=t.router,a=n.range,o=Object(c.a)(n,["range"]),i=ge.m[a||"no_limit"];"string"==typeof n.q&&ge.i.some((function(e){return e===n.type}))||(e=Object.assign({},o,{type:"content",q:n.q||""})),!i||"no_limit"===i||ge.e.includes(i)&&"content"===n.type||(e=o),e&&r.replace("/search?".concat(Object(g.stringify)(e)))}},{key:"render",value:function(){var e=this.props.location.query;return Object(r.c)("div",{children:[Object(r.b)(v.a,{title:"".concat(e.q||""," - 搜索结果")}),Object(r.b)(ia,{isPageHeader:!1}),Object(r.c)("div",{className:"Search-container",children:[Object(r.b)(wa.a,{children:Object(r.b)(ia,{isPageHeader:!0})}),Object(r.b)(ua,Object.assign({},this.props)),Object(r.b)(ka,{searchType:e.type})]})]})}}]),n}(p.Component);Na.contextTypes={currentUser:f.a.object};var Ra=Object(b.connect)(null,{loadSearch:y.l})(Na);t.default=Object(r.b)(a.Route,{children:Object(r.b)(a.IndexRoute,{component:Ra,name:"Search",zaPageId:3375})})},812:function(e,t,n){"use strict";n.d(t,"d",(function(){return r.a})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return f}));var r=n(839),a=(n(2),n(10)),c=n.n(a),o=(n(855),n(5)),i=function(e){var t=e.className,n=e.options,r=e.children;return Object(o.g)("div",{className:c()("Card-header",t)},Object(o.g)("div",{className:"Card-headerText"},r),n&&Object(o.g)("div",{className:"Card-headerOptions"},n))},l=n(33),s=n.n(l),u=n(45),d=n.n(u),f=function(e){var t=e.className,n=d()(e,["className"]);return Object(o.g)("div",s()({className:c()("Card-section",t)},n))}},813:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onFullyViewedOnce=t.isFullyViewed=t.onViewedOnce=t.isViewed=void 0;var r=n(865);Object.defineProperty(t,"isViewed",{enumerable:!0,get:function(){return r.isViewed}}),Object.defineProperty(t,"onViewedOnce",{enumerable:!0,get:function(){return r.onViewedOnce}});var a=n(866);Object.defineProperty(t,"isFullyViewed",{enumerable:!0,get:function(){return a.isFullyViewed}}),Object.defineProperty(t,"onFullyViewedOnce",{enumerable:!0,get:function(){return a.onFullyViewedOnce}})},816:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(31),a=n(41),c=n(1),o=n(2),i=n(82),l=n(58),s=n(222),u=n(76),d=n.n(u),f=n(357),p=function(e){return/^\w+:\/\//.test(e)?e:location.origin+e},h=function(e,t){var n=t.params,r=t.onRequestOpen,c=Object(f.b)();return function(t){var o=e.href,l=e.onClick;if(l&&l(t),!t.defaultPrevented){var s=function(e,t){if(!t)return e;var n=e.split("#"),r=Object(a.a)(n,2),c=r[0],o=r[1],i=c+(c.includes("?")?"&":"?")+t;return o?i+"#"+o:i}(p(o),n);return c.ZhihuHybrid?(t.preventDefault(),void i.a.dispatch("base/openURL",{url:s})):c.isMiniProgram?(t.preventDefault(),void function(e,t){var n,r=function(){var n,r,a,c=null,o=null;if(t.WxMiniProgram)c=null===(r=window.wx)||void 0===r||null===(a=r.miniProgram)||void 0===a?void 0:a.navigateTo;else if(t.JDMiniProgram){var i,l;c=null===(i=window.jd)||void 0===i||null===(l=i.miniProgram)||void 0===l?void 0:l.navigateTo}var s,u=null===(n=/\/topic\/(\d+)/.exec(e))||void 0===n?void 0:n[1];(u&&(t.WxMiniProgram?o="/pages/topic?id=".concat(u):t.JDMiniProgram&&(o="/pages/topic/index?id=".concat(u))),o)?null===(s=c)||void 0===s||s({url:o}):/^http(s)?:/.test(e)&&(location.href=e)};!t.WxMiniProgram||(null===(n=window.WeixinJSBridge)||void 0===n?void 0:n.invoke)?r():document.addEventListener("WeixinJSBridgeReady",r,!1)}(s,c)):void((null==r?void 0:r({ua:c,url:s}))&&t.preventDefault())}}},b=function(e,t){var n=t.extra;return{zaType:"Button",zaAction:"OpenUrl",zaEventType:"Click",shouldTrackClick:!0,extra:d()({link:{get url(){return p(e)}}},n)}},m=Object(o.forwardRef)((function(e,t){var n=e.params,a=e.onRequestOpen,o=e.extra,i=Object(r.a)(e,["params","onRequestOpen","extra"]);return Object(c.b)(s.c,Object.assign({as:l.g},b(i.href,{extra:o}),i,{ref:t,onClick:h(i,{params:n,onRequestOpen:a})}))}));t.b=function(e){var t=e.params,n=e.onRequestOpen,a=e.children,c=e.extra,i=Object(r.a)(e,["params","onRequestOpen","children","extra"]);return Object(o.cloneElement)(a,Object(s.j)(Object.assign({},b(a.props.href,{extra:c}),i,{ref:a.ref,onClick:h(a.props,{params:t,onRequestOpen:n})})))}},817:function(e,t,n){"use strict";function r(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,"a",(function(){return r}))},819:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return c})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return s}));var r=/([-\w]+)(="([^"]+)"|='([^']+)')?/g,a=function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.decodeValue,c=void 0!==a&&a,i={};t=r.exec(e);){var l=t[1],s=t[3]||t[4];i[l]=(c?o(s):s)||""}return i},c=function(e){if(!e)return null;try{return JSON.parse(e)}catch(e){return null}};function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/&amp;/g,"&").replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#34;/g,'"').replace(/&#13;/g,"\r")}function i(){return Math.max(window.innerHeight/10,100)}var l=function(e){for(var t=e;t&&"HTML"!==t.tagName&&"BODY"!==t.tagName&&1===t.nodeType;){var n=document.defaultView.getComputedStyle(t);if([n.overflow,n.overflowY,n.overflowX].some((function(e){return"scroll"===e||"auto"===e})))return t;t=t.parentNode||t.parentElement}return window};function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=l(e),r=e.getBoundingClientRect().top+(n.pageYOffset||n.scrollTop||0)-i()-t;n.scrollTo({top:r,behavior:"smooth"})}},820:function(e,t,n){"use strict";var r=n(31),a=n(1),c=n(3),o=n.n(c),i=n(25),l=n(34),s=n(61),u=n(10),d=n.n(u),f=n(167),p=n(82),h=n(93),b=n.n(h),m=n(60),v=n(359),g=n(893),y=n(28);n(852);var O=function(e){var t,c=e.isPinProfile,o=e.onClick,u=e.isPinDaily,h=e.user,O=e.avatar,j=e.avatarProps,C=e.showVipIcon,k=e.vipIconZaViewName,w=e.badgeProps,S=e.noBadge,x=e.noLink,N=e.noHoverCard,R=e.style,E=e.className,T=e.children,I=Object(r.a)(e,["isPinProfile","onClick","isPinDaily","user","avatar","avatarProps","showVipIcon","vipIconZaViewName","badgeProps","noBadge","noLink","noHoverCard","style","className","children"]),P=Object(i.useSelector)((function(e){return Object(m.d)(e,{includeTablet:!0})})),L=h.id,A=h.name,_=h.avatarUrl,M=h.urlToken,z=h.isOrg,D=h.vipInfo,B=h.url,V=h.maskLevel,F=void 0===N?P:N,H=Object(s.d)((function(){return n.e(46).then(n.bind(null,1053))}),!F&&!P);t=O?Object(a.b)(f.a,Object.assign({className:"UserLink-avatar",url:_,alt:A},j)):T||A;var U=Boolean(function(e){var t=e.id,n=e.name,r=e.urlToken;return"0"===t||"知乎用户"===n?null:r||t}(h)),q="//www.zhihu.com/".concat(z?"org":"people","/").concat(M||L),W="zhihu://pin".concat(B,"/moments");return U&&!x&&(t=Object(a.b)(l.Link,Object.assign({className:"UserLink-link","data-za-detail-view-element_name":"User",to:q,target:"_blank",onClick:function(e){return function(t){u&&"A"===t.target.nodeName&&y.a.trackEvent(t.target,{id:2065}),c&&(t.preventDefault(),p.a.dispatch("base/openURL",{url:e})),V&&t.preventDefault(),o&&"function"==typeof o&&o(t)}}(W)},b()(I,["isPinProfile","trackEvent","onClick","dispatch","isPinDaily"]),{children:t})),!F&&H&&(t=Object(a.b)(H,{toggler:t,id:L,urlToken:M,user:h}))),Object(a.c)("span",{style:R,className:d()("UserLink",E),children:[t,U&&!S&&!O&&Object(a.b)(v.c,Object.assign({css:{marginLeft:".3em"},isOrg:z,badge:h.badgeV2||h.badge,linkify:!0,enableTooltip:!0},w)),U&&C&&!O&&D&&D.vipIcon&&Object(a.b)(g.a,{vipIcon:D.vipIcon,zaViewName:k})]})};O.propTypes={user:o.a.object.isRequired,avatar:o.a.bool,avatarProps:o.a.object,noBadge:o.a.bool,noHoverCard:o.a.bool,showVipIcon:o.a.bool,style:o.a.object,className:o.a.string,children:o.a.node,isPinProfile:o.a.bool,isPinDaily:o.a.bool},O.defaultProps={avatar:!1,noBadge:!1,showVipIcon:!1},t.a=O},822:function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return k})),n.d(t,"d",(function(){return S})),n.d(t,"c",(function(){return N}));var r=n(14),a=n(15),c=n(16),o=n(17),i=n(8),l=n(31),s=n(1),u=n(3),d=n.n(u),f=n(2),p=n(10),h=n.n(p),b=n(93),m=n.n(b),v=n(813),g=n(197),y=n(905);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}function j(e){return!!e&&!(Array.isArray(e)&&!e.some(Boolean))}function C(e){var t=e.onRef,n=e.listClassName,r=e.itemClassName,a=e.className,c=e.children,o=Object(l.a)(e,["onRef","listClassName","itemClassName","className","children"]);return Object(s.b)("div",Object.assign({ref:t,className:h()(n,a)},o,{children:f.Children.map(c,(function(e){return"string"==typeof e?Object(s.b)("span",{className:r,children:e}):e?Object(f.cloneElement)(e,{className:h()(r,e.props.className)}):e}))}))}var k=function(e){return Object(s.b)(C,Object.assign({listClassName:"ContentItem-cells",itemClassName:"ContentItem-cell"},e))},w=function(e){return Object(s.b)(C,Object.assign({listClassName:"ContentItem-actions",itemClassName:"ContentItem-action"},e))},S=function(e){return Object(s.b)(C,Object.assign({listClassName:"ContentItem-status",itemClassName:"ContentItem-statusItem"},e))},x=function(e){Object(c.a)(n,e);var t=O(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).onRef=function(t){e.domNode=t,e.props.onRef&&e.props.onRef(t)},e.onAccessContent=function(t,n){n===document.activeElement&&window.open(e.props.link)},e}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(v.onViewedOnce)(this.domNode,(function(){var t=e.props,n=t.data,r=(n=void 0===n?{}:n).type,a=n.id,c=t.lastreadTouchable;e.context.currentUser&&c&&r&&a&&Object(y.c)("article"===r?"post":r,a,y.b)}))}},{key:"render",value:function(){var e=m()(this.props,["noTrackCardShow","lastreadTouchable","data","onRef"]),t=e.className,n=e.title,r=e.meta,a=e.children,c=e.extra,o=e.image,i=e.link,u=Object(l.a)(e,["className","title","meta","children","extra","image","link"]),d=Object(s.c)(f.Fragment,{children:[n&&Object(s.b)("h2",{className:"ContentItem-title",children:n}),j(r)&&Object(s.b)("div",{className:"ContentItem-meta",children:r})]});return Object(s.c)("div",Object.assign({ref:this.onRef,className:h()("ContentItem",t)},u,{children:[i&&Object(s.b)(g.c,{keyMap:{ACCESS:"enter"},handlers:{ACCESS:this.onAccessContent}}),o||c?Object(s.c)("div",{className:"ContentItem-main",children:[o&&Object(s.b)("div",{className:"ContentItem-image",children:o}),Object(s.b)("div",{className:"ContentItem-head",children:d}),c&&Object(s.b)("div",{className:"ContentItem-extra",children:c})]}):d,a]}))}}]),n}(f.Component);x.contextTypes={currentUser:d.a.object};var N={plain:"plain",default:"default",interactive:"interactive"};t.e=x},825:function(e,t,n){"use strict";n.d(t,"b",(function(){return D})),n.d(t,"a",(function(){return P}));var r=n(20),a=n.n(r),c=n(21),o=n.n(c),i=n(22),l=n.n(i),s=n(23),u=n.n(s),d=n(13),f=n.n(d),p=n(3),h=n.n(p),b=n(2),m=n(10),v=n.n(m),g=n(42),y=n.n(g),O=n(71),j=n.n(O),C=n(307),k=n(1104),w=n(867),S=n(5);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return u()(this,n)}}var N=function(e){l()(n,e);var t=x(n);function n(){var e;a()(this,n);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={isInputing:!1,value:e.props.value||""},e.handleChange=function(t){e.setState({value:Object(C.cutStringWidth)(t.target.value,30)})},e}return o()(n,[{key:"componentWillReceiveProps",value:function(e){e.value&&e.value!==this.state.value&&this.setState({value:e.value})}},{key:"render",value:function(){var e=this,t=this.state,n=t.isInputing,r=t.value,a=this.props.onChange,c=!n&&!r,o=!n&&r;return Object(S.g)("div",{className:"Editable-VideoTitleInput-container"},Object(S.g)(w.a,null,Object(S.g)("div",{className:v()("Editable-VideoTitleInput-innerContainer",{"Editable-VideoTitleInput-innerContainer--isBeforeIconShown":c}),onClick:function(){return e.setState({isInputing:!0})}},c&&Object(S.g)(k.a,{className:"Editable-VideoTitleInput-beforeIcon",center:!0}),!n&&Object(S.g)("div",{className:v()("Editable-VideoTitleInput-value",{"Editable-VideoTitleInput-value--noContent":!r})},r||"好的标题可以获得更多的推荐及关注者"),n&&Object(S.g)("input",{className:"Editable-VideoTitleInput",value:r,ref:function(e){e&&e.focus()},placeholder:"标题长度不超过 15 个字",onChange:this.handleChange,onBlur:function(t){e.setState({isInputing:!1}),a(t.target.value)}}),o&&Object(S.g)(k.a,{className:"Editable-VideoTitleInput-afterIcon",center:!0}))))}}]),n}(b.Component),R=n(864),E=n(1204),T=n(936),I=n.n(T),P=function(e){var t=e.className;return Object(S.g)("svg",{viewBox:"0 0 72 72",className:t},Object(S.g)("circle",{cx:"36",cy:"36",fill:"#fff",fillOpacity:".95",r:"36"}),Object(S.g)("path",{d:"M50.835 37.06L29.477 49.97a1.203 1.203 0 0 1-1.664-.43 1.25 1.25 0 0 1-.17-.631V23.091c0-.682.543-1.234 1.213-1.234.219 0 .433.06.62.173l21.359 12.91a1.245 1.245 0 0 1 0 2.12z",fill:"#444",fillRule:"nonzero"}))},L=function(){return Object(S.g)("div",{className:"VideoCardPlayButton"},Object(S.g)(P,{className:"VideoCardPlayButton-icon"}))},A=function(e){var t=e.fileSize;return Object(S.g)("div",{className:"VideoCardPlayButton-withFileSize--outer"},Object(S.g)("span",{className:"VideoCardPlayButton-withFileSize"},Object(S.g)(E.a,{center:!0,size:14}),t?I()(t,{decimalPlaces:1,unit:"MB"}):"流量播放"))};function _(e){var t=e.thumbnail,n=e.isLens,r=e.canPlay;return n||r?t&&"string"==typeof t?Object(S.g)("img",{src:t,alt:"视频封面"}):t||null:Object(S.g)(P,{className:"VideoCard-playIcon VideoCard-playIcon--nonLens"})}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return u()(this,n)}}var z=function(e){l()(n,e);var t=M(n);function n(){var e;a()(this,n);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={isMobile:!1,playerShown:!1,playerLoading:!1},e.handlePlay=function(t){t.preventDefault();var n=e.props,r=n.interactive,a=n.isConverting,c=n.isLens,o=n.playerUrl,i=n.onPlayFailed,l=n.onLensPlay,s=n.onBeforePlay;r&&!a&&(o||!i?s?Promise.resolve(s()).then((function(t){!1!==t&&e.play()})):c&&l&&l()||e.play():i())},e.handlePlayerLoad=function(){e.loadingCount--,0===e.loadingCount&&e.setState({playerLoading:!1})},e}return o()(n,[{key:"componentDidMount",value:function(){this.setState({isMobile:j()(navigator.userAgent).Mobile})}},{key:"canPlay",value:function(){return this.props.isLens}},{key:"inlinePlayer",value:function(){var e=this.props,t=e.interactive,n=e.isLens,r=e.onLensPlay,a=e.onBeforePlay;return t&&n&&!(r||a)}},{key:"showContent",value:function(){var e=this.props,t=e.content,n=e.isLens,r=e.title;return!e.isVideoTitleEditable&&(!n||Boolean(t||r))}},{key:"showDescription",value:function(){var e=this.props.isLens;return this.showContent()&&!e}},{key:"play",value:function(){var e=this.props.onPlay;this.loadingCount=2,this.setState({playerShown:!0,playerLoading:!0}),setTimeout(this.handlePlayerLoad,1e3),e&&e()}},{key:"renderContent",value:function(){var e=this.props,t=e.interactive,n=e.isLens,r=e.title,a=e.thumbnail,c=e.source,o=e.url,i=e.showPlayButton,l=e.usePlayButtonWithFileSize,s=e.fileSize,u=e.rightBottomButton,d=e.isVideoTitleEditable,f=e.onVideoTitleChange,p=e.isConverting,h=e.content,b=this.canPlay(),m=this.inlinePlayer(),g=Object(S.g)(_,{thumbnail:a,isLens:n,canPlay:b}),y=i&&!p&&(l?Object(S.g)(A,{fileSize:s}):Object(S.g)(L,null)),O=Object(S.g)("div",{className:"VideoCard-layout"},b?Object(S.g)("div",{className:"VideoCard-video"},Object(S.g)("div",{className:"VideoCard-video-content"},m?this.renderPlayer():Object(S.g)("div",{className:v()("VideoCard-thumbnail",{"VideoCard-thumbnail--placeholder":!a}),onClick:this.handlePlay},g,y,u))):Object(S.g)("div",{className:"VideoCard-poster"},g),this.showContent()&&(h||Object(S.g)("div",{className:"VideoCard-content"},Object(S.g)("div",{className:"VideoCard-title"},r),this.showDescription()&&Object(S.g)("div",{className:"VideoCard-description"},c&&Object(S.g)("span",{className:"VideoCard-source"},c),Object(S.g)("span",{className:"VideoCard-badge"},"视频")))),d&&Object(S.g)(N,{value:r,onChange:f}));return n?O:t?Object(S.g)("a",{className:"VideoCard-link",href:o,target:"_blank",rel:"noopener noreferrer"},O):Object(S.g)("div",{className:"VideoCard-link"},O)}},{key:"renderPlayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props,n=t.source,r=t.playerUrl,a=t.onIframeRef,c=t.useMSE,o=y.a.stringify({autoplay:e&&"lens"===n,useMSE:c});return Object(S.g)(R.a,{placeholder:Object(S.g)("div",{className:"VideoCard-player"})},Object(S.g)("div",{className:"VideoCard-player"},Object(S.g)("iframe",{ref:a,frameBorder:0,allowFullScreen:!0,src:"".concat(r,"?").concat(o),onLoad:this.handlePlayerLoad})))}},{key:"render",value:function(){var e=this.props,t=e.interactive,n=e.isConverting,r=this.state,a=r.isMobile,c=r.playerShown,o=r.playerLoading;return Object(S.g)("div",{className:v()("VideoCard",{"VideoCard--converting":n,"VideoCard--interactive":t,"VideoCard--mobile":a})},this.renderContent(),c&&Object(S.g)("div",{className:v()("VideoCard-overlay",{"is-loading":o})},this.renderPlayer(!0)),Object(S.g)("div",{className:v()("VideoCard-mask",{"is-shown":o})}))}}]),n}(b.Component);z.propTypes={interactive:h.a.bool,showPlayButton:h.a.bool,usePlayButtonWithFileSize:h.a.bool,fileSize:h.a.number,onPlay:h.a.func,onPlayFailed:h.a.func,onLensPlay:h.a.func,onBeforePlay:h.a.func,rightBottomButton:h.a.oneOfType([h.a.element,h.a.string]),thumbnail:h.a.oneOfType([h.a.element,h.a.string]),content:h.a.object},z.defaultProps={interactive:!0,showPlayButton:!0};var D=z},828:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r={question:"问题",answer:"回答",comment:"评论",article:"文章",message:"私信",member:"用户",people:"用户",collection:"收藏",activity:"编辑",pin:"想法",ebook:"电子书",column:"专栏",roundtable:"圆桌",promotion:"文章",topic:"话题",live:"live",live_course:"live 课程",book_review:"书评",club_mask:"圈子用户",club_post:"帖子",zvideo:"视频"},a=Object.keys(r)},830:function(e,t,n){"use strict";e.exports=n(953)},831:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(14),a=n(15),c=n(16),o=n(17),i=n(8),l=n(1),s=n(2),u=n(25),d=n(170),f=n(168),p=n(872);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var b=function(){return n.e(28).then(n.bind(null,2413)).then((function(e){return e.ReportModal}))};var m=function(e){Object(c.a)(n,e);var t=h(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return Object(l.b)(d.a,Object.assign({getComponent:b},this.props))}}]),n}(s.Component),v=Object(u.connect)(null,(function(e,t){return{loadProfile:function(t){e(Object(f.h)(t))},updateUserBlocking:function(t,n){e(Object(f.n)(t,n))},doReport:function(n,r,a,c){return e(Object(p.b)(n,r,a,c,void 0,{NOTIFICATION:t.notification})).then((function(e){return e.payload.sarcasmRecommend&&t.showWalle(),e}))}}}))(m);n(835)},832:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return s}));var r={general:"general",live:"live",publication:"publication",album:"album",special:"special",manga:"manga"},a=(Object.assign({},r,{album_chapter:r.album,album_video_chapter:r.album,album_paid_column:r.album,paid_column_chapter:r.album,training:r.album,training_bundle:r.album,training_chapter:r.album,web_literature:r.publication,instabook:r.publication,ebook_audio:r.publication,publication_chapter:r.publication,publication_paid_magazine:r.publication,magazine_section:r.publication,paid_answer:r.album,assessment:r.album}),{live:"Live 讲座",album:"盐选专栏",album_paid_column:"盐选专栏",album_chapter:"盐选专栏",album_video_chapter:"盐选专栏",paid_column_chapter:"盐选专栏",publication:"电子书",publication_chapter:"电子书章节",instabook:"讲书",ebook_audio:"有声书",publication_paid_magazine:"盐选杂志",special:"专题",training:"训练营",training_bundle:"训练营",training_chapter:"训练营",web_literature:"网络文学",magazine_section:"杂志文章",manga:"漫画"}),c={live:"Live 讲座",album:"盐选专栏",album_chapter:"盐选专栏",album_video_chapter:"盐选专栏",album_paid_column:"盐选专栏",paid_column_chapter:"盐选专栏",assessment:"盐选专栏",training:"盐选专栏",training_bundle:"盐选专栏",training_chapter:"盐选专栏",publication:"电子书",publication_chapter:"电子书",instabook:"电子书",ebook_audio:"电子书",publication_paid_magazine:"电子书",special:"电子书",web_literature:"电子书",magazine_section:"电子书",manga:"电子书"},o={live:r.live,album:r.album,album_chapter:r.album,album_paid_column:r.album,album_video_chapter:r.album,training:r.album,training_bundle:r.album,training_chapter:r.album,paid_column_chapter:r.album,assessment:r.album,publication:r.publication,publication_chapter:r.publication,instabook:r.publication,ebook_audio:r.publication,publication_paid_magazine:r.publication,special:r.publication,web_literature:r.publication,magazine_section:r.publication,manga:r.publication},i=["live","album","album_chapter","album_video_chapter","paid_column_chapter","publication_chapter","magazine_section","album_paid_column","assessment","special"],l={paidAnswer:"PaidAnswer",paidPost:"PaidPost"},s={paid_magazine:"PaidMagazine",paid_column:"PaidColumn",album:"RemixAlbum",ebook:"EBook",instabook:"InstaBook",literature:"Literature",training:"Training",training_bundle:"TrainingBundle",special:"Special",ebook_audio:"AudioBook",live:"Live",publication:"EBook",web_literature:"EBook",album_chapter:"RemixAlbum",album_paid_column:"RemixAlbum",album_video_chapter:"RemixAlbum",manga:"Manga",free_conversation:"FreeConversation",event:"Event"}},835:function(e,t,n){"use strict";var r=n(31),a=n(14),c=n(15),o=n(16),i=n(17),l=n(8),s=n(1),u=n(3),d=n.n(u),f=n(2),p=n(304),h=n.n(p),b=n(93),m=n.n(b),v=n(29),g=n(1102),y=n(28),O=n(828),j=n(831),C=n(164),k=n(119),w=function(e){var t=e.onClose,n=e.shown;return Object(s.b)(C.b,{wrapperClassName:"WalleModal",className:"WalleModal",title:"举报成功",onClose:t,children:n&&Object(s.c)("div",{className:"WalleModal-wrapper",children:[Object(s.b)("p",{className:"WalleModal-des",children:"你的举报我们已经收到，处理完成后将会私信告知处理结果。"}),Object(s.b)("img",{className:"WalleModal-img",src:"https://zhstatic.zhihu.com/heifetz/wall-E.png",alt:"walle"}),Object(s.c)("div",{className:"WalleModal-open",children:[Object(s.c)("div",{className:"WalleModal-content",children:[Object(s.b)("div",{className:"WalleModal-title",children:"遇到阴阳怪气的评论了？"}),Object(s.b)("div",{className:"WalleModal-intro",children:"手动开启瓦力算法识别功能，自动折叠阴阳怪气的评论！"})]}),Object(s.b)(k.a,{className:"WalleModal-btn",preset:"primary",color:"blue",to:"/settings/preference",children:"立即开启"})]})]})})},S=n(24);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var N=function(e){Object(o.a)(n,e);var t=x(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={shown:!1,walleModalShown:!1},e.handleShow=e.context.authRequired((function(t){var n=e.props.zaReportId;e.setState({shown:!0}),e.props.onModalShown(!0),y.a.trackEvent(t.target,Object.assign({action:"Report",element:"Button",is_intent:!0},n&&{id:n}))}),S.U.report),e.handleHide=function(){e.setState({shown:!1}),e.props.onModalShown(!1)},e.handleWalleShow=function(){e.setState({walleModalShown:!0}),e.props.onModalShown(!0)},e.handleWalleClose=function(){e.setState({walleModalShown:!1}),e.props.onModalShown(!1)},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.state,t=e.shown,n=e.walleModalShown,a=this.props,c=a.id,o=a.resourceType,i=a.type,l=Object(r.a)(a,["id","resourceType","type"]);return Object(s.c)(f.Fragment,{children:[Object(s.c)(v.c,Object.assign({preset:"plain",onClick:this.handleShow},m()(l,["zaReportId"]),{children:[Object(s.b)(g.a,{size:14,center:!0})," 举报"]})),Object(s.b)(j.a,{resourceType:o,type:i,urlToken:c,shown:t,onClose:this.handleHide,showWalle:this.handleWalleShow,zaEnabled:!0}),Object(s.b)(w,{shown:n,onClose:this.handleWalleClose})]})}}]),n}(f.Component);N.contextTypes={authRequired:d.a.func},N.propTypes={type:d.a.oneOf(O.a).isRequired,id:d.a.oneOfType([d.a.number,d.a.string]).isRequired,zaReportId:d.a.number,onModalShown:d.a.func},N.defaultProps={onModalShown:h.a};t.a=N},836:function(e,t,n){"use strict";var r=n(14),a=n(15),c=n(16),o=n(17),i=n(8),l=n(1),s=n(3),u=n.n(s),d=n(2),f=n(19),p=n(25),h=n(10),b=n.n(h),m=n(888),v=n.n(m),g=n(787),y=n(29),O=n(28),j=n(222),C=n(828),k=n(60),w=n(966),S=n(113),x=n(99),N=n(175),R=n(308),E=n(367),T=n(146),I=n(365),P=n(24);function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var A={default:"default",primary:"primary"},_=function(e){Object(c.a)(n,e);var t=L(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).zaRef=Object(d.createRef)(),e.state={hovered:!1,isFetching:!1},e.handleMouseEnter=function(){e.setState({hovered:!0})},e.handleMouseLeave=function(){e.setState({hovered:!1})},e.toggleFollow=function(t){var n=e.props,r=n.isFollowing,a=n.type,c=n.id,o=n.zaId,i=n.useCustomZa,l=n.onFollowButtonClick,s=!r;i||(O.a.trackEvent(t.target,Object.assign({action:s?"Follow":"UnFollow",element:"Button",element_name:P.Y[a]},o&&{id:o})),e.zaRef.current.trackEvent({action:s?"Follow":"UnFollow",eventType:"Click",elementLocation:{type:"Button"}}));var u="toggleFollow".concat(a.slice(0,1).toUpperCase()).concat(a.slice(1)),d=e.props[u](c,s);v()(d)&&(e.setState({isFetching:!0}),d.then((function(){e.setState({isFetching:!1}),l&&l()})).catch((function(){return e.setState({isFetching:!1})})))},e.handleToggleFollow=function(t){e.props.authRequired?e.props.authRequired(e.toggleFollow,P.U.follow,!0)(t):e.props.ua.Zhihu?e.toggleFollow(t):e.context.authRequired(e.toggleFollow,P.U.follow)(t)},e.handleClick=function(t){var n=e.props.onClick;n&&!n(t)||(e.handleToggleFollow(t),t.stopPropagation())},e}return Object(a.a)(n,[{key:"render",value:function(){var e,t,n,r=this.state.hovered,a=this.props,c=a.onRef,o=a.preset,i=a.entityHidden,s=a.type,u=a.isFollowing,d=a.gender,f=a.className,p=a.children,h=a.isMobile,m=a.disabled;u?(e="primary",n=r?"取消关注":"已关注",t={color:"grey"}):(e=o,t={color:"blue"},n=p||("people"===s||"rewardPeople"===s?[Object(l.b)(g.a,{className:"FollowButton-icon",text:!0,center:!0},"icon"),"关注".concat("number"==typeof d&&-1!==d?P.M[d]:"")]:"关注".concat(i?"":C.b[s])));var v=this.state.isFetching;return Object(l.c)(y.c,Object.assign({onRef:c,preset:e,onClick:this.handleClick,className:b()("FollowButton",f)},t,!h&&{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},{disabled:m||v,children:[Object(l.b)(j.d,{ref:this.zaRef}),n]}))}}]),n}(d.Component);_.contextTypes={authRequired:u.a.func},_.propTypes={preset:u.a.oneOf(Object.values(A)),type:u.a.oneOf(C.a).isRequired,id:u.a.oneOfType([u.a.number,u.a.string]).isRequired,zaId:u.a.number,useCustomZa:u.a.bool},_.defaultTypes={preset:A.default},_.PRESETS=A;t.a=Object(f.compose)(Object(p.connect)((function(e){return{ua:e.env.userAgent,isMobile:Object(k.d)(e,{includeTablet:!0})}}),{toggleFollowQuestion:x.mb,toggleFollowCollection:N.d,toggleFollowColumn:R.e,toggleFollowRoundtable:E.m,toggleFollowTopic:T.M,toggleFollowPeople:S.a,toggleFollowRewardPeople:I.o,toggleFollowClub_mask:w.a}))(_)},837:function(e,t,n){"use strict";var r=n(14),a=n(15),c=n(16),o=n(17),i=n(8),l=n(1),s=n(3),u=n.n(s),d=n(2),f=n(19),p=n(25),h=n(34),b=n(10),m=n.n(b),v=(n(198),n(28)),g=n(60),y=n(892),O=n(820);n(840);function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var C=function(e){Object(c.a)(n,e);var t=j(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).handleClick=function(t){var n=e.props,r=n.zaId,a=n.zaExtra,c=n.author.urlToken,o=n.isSpecialQuestionOrAnswer;if(n.preventOpenUrl)t.preventDefault();else if(r&&v.a.trackEvent(null,{id:r,action:"OpenUrl",element_name:"User"},a),o)return location.href="zhihu://people/".concat(c,"?utm_app_name=zhihu_check"),t.preventDefault(),void t.stopPropagation()},e}return Object(a.a)(n,[{key:"render",value:function(){var e="plain"===this.props.preset,t=this.props,n=t.author,r=t.noLink,a=t.avatarSize,c=void 0===a?e?24:38:a,o=t.children,i=t.className,s=t.extra,u=t.itemProp,d=t.roundAvatar,f=t.isMobile,p=t.target,h=t.noDetail,b=t.noHoverCard,v=t.noHeadline,g=e&&s||Object(l.b)("div",{className:"AuthorInfo-badge",children:o||Object(l.b)(y.a,{className:"AuthorInfo-badgeText",user:n,noHeadline:v})});return Object(l.c)("div",{className:m()("AuthorInfo",i,{"AuthorInfo--plain":e}),itemProp:u,itemScope:!0,itemType:"http://schema.org/Person",children:[Object(l.b)("meta",{itemProp:"name",content:n.name}),Object(l.b)("meta",{itemProp:"image",content:n.avatarUrl}),Object(l.b)("meta",{itemProp:"url",content:"https://www.zhihu.com/people/".concat(n.urlToken)}),Object(l.b)("meta",{itemProp:"zhihu:followerCount",content:n.followerCount}),Object(l.b)(O.a,Object.assign({onClick:this.handleClick,noHoverCard:f||b,noLink:r,className:"AuthorInfo-avatarWrapper",user:n,avatar:!0,avatarProps:{className:"AuthorInfo-avatar",size:c,round:d}},p&&{target:p})),Object(l.c)("div",{className:"AuthorInfo-content",children:[Object(l.c)("div",{className:"AuthorInfo-head",children:[Object(l.b)(O.a,Object.assign({noHoverCard:f||b,onClick:this.handleClick,className:"AuthorInfo-name",noLink:r,user:n},p&&{target:p})),!e&&s]}),!h&&Object(l.b)("div",{className:"AuthorInfo-detail",children:g})]})]})}}]),n}(d.Component);C.propTypes={author:u.a.object.isRequired,noLink:u.a.bool,avatarSize:u.a.number,preset:u.a.oneOf(["plain","default"]),className:u.a.string,itemProp:u.a.string,roundAvatar:u.a.bool,isMobile:u.a.bool,noDetail:u.a.bool,relatedTo:u.a.string,zaId:u.a.number,zaExtra:u.a.object,noHoverCard:u.a.bool,noHeadline:u.a.bool,preventOpenUrl:u.a.bool},C.defaultProps={noLink:!1,roundAvatar:!1,itemProp:"author",noHoverCard:!1,noHeadline:!1,preventOpenUrl:!1};t.a=Object(f.compose)(h.withRouter,Object(p.connect)((function(e,t){var n=t.relatedTo,r=t.params,a=["question","answer"].includes(n);return{isHuman:Object(g.c)(e),shouldOia:Object(g.h)(e)&&a,isMobile:Object(g.d)(e,{includeTablet:!0}),isSpecialQuestionOrAnswer:Object(g.j)(e,{type:a&&n,id:a?"question"===n?null==r?void 0:r.id:null==r?void 0:r.answerId:""})}})))(C)},839:function(e,t,n){"use strict";var r=n(33),a=n.n(r),c=n(45),o=n.n(c),i=(n(2),n(10)),l=n.n(i),s=(n(855),n(5));t.a=function(e){var t=e.className,n=e.onRef,r=o()(e,["className","onRef"]);return Object(s.g)("div",a()({ref:n,className:l()("Card",t)},r))}},840:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(41);var r=n(42),a=n.n(r),c=function(e){var t=e||{},n=t.type,r=t.id,c=t.urlToken,o=t.q;switch(n){case"question":return"/questions/".concat(r);case"answer":return"/answers/".concat(r);case"article":case"p":return"/articles/".concat(r);case"column":return"/columns/".concat(r);case"live":return"/lives/".concat(r);case"ebook":case"book":return"/pub/book/".concat(r);case"feed":return"/feed";case"topic":return"/topics/".concat(r);case"people":return"/people/".concat(c||r);case"search":return"/search?".concat(a.a.stringify({q:o}));case"video":return"video_topic/".concat(r);case"zvideo":return"/zvideo/".concat(r);case"zvideo_answer":case"zvideo_article":var i=n.replace("zvideo_","");return"/".concat(i,"s/").concat(r);default:return null}},o=function(e,t){var n=t?"?".concat(a.a.stringify(t)):"",r="string"==typeof e?e:c(e);if(r){var o=r.startsWith("/")?r.slice(1):r;return"zhihu://".concat(o).concat(n)}return"zhihu://".concat(n)}},844:function(e,t,n){var r=n(563),a=n(845);function c(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}c.prototype=r(a.prototype),c.prototype.constructor=c,e.exports=c},845:function(e,t){e.exports=function(){}},846:function(e,t,n){var r=n(563),a=n(845);function c(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}c.prototype=r(a.prototype),c.prototype.constructor=c,e.exports=c},847:function(e,t,n){"use strict";var r=n(20),a=n.n(r),c=n(21),o=n.n(c),i=n(22),l=n.n(i),s=n(23),u=n.n(s),d=n(13),f=n.n(d),p=n(3),h=n.n(p),b=n(2),m=n.n(b),v=n(10),g=n.n(v),y=n(894),O=n(196),j=n(71),C=n.n(j),k=n(136),w=n(5);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return u()(this,n)}}var x={top:10,left:20},N={top:0,left:0};var R=function(e){l()(n,e);var t=S(n);function n(){var e;a()(this,n);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).scrollerRef=m.a.createRef(),e.state={transEnded:!1,rect:null,translate:null,scale:null},e.getBoundingClientRect=function(){var t=e.props,n=t.img,r=t.data,a=n.getBoundingClientRect(),c=a.left,o=a.top,i=a.width,l=a.height,s=r.width,u=r.height,d={left:c,top:o,width:i,height:l},f=1;return s>u?(d.height=l,f=l/u,d.width=s*f,d.left=c+(i-d.width)/2,d.top=o+(l-d.height)/2):s<u&&(d.width=i,f=i/s,d.height=u*f,d.left=c+(i-d.width)/2,d.top=o+(l-d.height)/2),d},e.handleClick=function(t){t.stopPropagation(),e.setState({translate:null,scale:null})},e.handleTransitionEnd=function(){var t=e.state,n=t.translate,r=t.scale,a=e.props.onClose;n&&r?(e.setState({transEnded:!0}),e.scrollerRef.current.style.overflow="auto"):a()},e}return o()(n,[{key:"componentWillMount",value:function(){var e=this.props,t=e.img,n=e.isOriginalUrl;this.originalSrc!==this.currentSrc&&((new Image).src=this.originalSrc);this.setState({rect:!1===n?this.getBoundingClientRect():t.getBoundingClientRect()})}},{key:"componentDidMount",value:function(){var e=this;Object(y.disableBodyScroll)(this.scrollerRef.current);var t=this.props.img;setTimeout((function(){return e.setState(Object.assign({},e.computeTransition(e.state.rect,{width:t.dataset.rawwidth||t.naturalWidth})))}))}},{key:"componentWillUnmount",value:function(){Object(y.enableBodyScroll)(this.scrollerRef.current)}},{key:"computeTransition",value:function(e,t){var n,r=this.props,a=r.transitionType,c=r.data,o=C()(navigator.userAgent).Mobile?N:x,i=o.top,l=o.left,s=window,u={left:0,top:0,width:s.innerWidth,height:s.innerHeight},d=function(e){return{x:e.left+e.width/2,y:e.top+e.height/2}}(u),f={width:u.width-2*l,height:u.height-2*i},p={},h={};return 1===a?(p.width=f.width>c.width?c.width:f.width,n=p.width/c.width,p.height=c.height*n,h={x:(f.width-p.width)/2+l,y:p.height<f.height?(f.height-p.height)/2+i:x.top}):(p.width=f.width>t.width?t.width:f.width,n=p.width/e.width,p.height=e.height*n,h={x:d.x-e.width/2,y:(p.height<f.height?d.y:x.top+p.height/2)-e.height/2}),{translate:h,scale:n}}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.img,a=n.isOriginalUrl,c=n.data,o=n.transitionType,i=n.className,l=this.state,s=l.translate,u=l.scale,d=l.rect,f=l.transEnded,p=s&&u,h=1,b="";if(1===o){var m=(C()(navigator.userAgent).Mobile?N:x).left;e=Math.min(window.innerWidth-2*m,c.width);var v=d.width/e;b=p?"translate(".concat(s.x,"px, ").concat(s.y,"px) scale(1) "):"translate(".concat(d.left,"px, ").concat(d.top,"px) scale(").concat(v,") "),h=p?1:0}else b=p?"translate(".concat(s.x,"px ,").concat(s.y,"px) scale(").concat(u,") "):"translate(".concat(d.left,"px,").concat(d.top,"px)");return Object(w.g)(k.a,null,Object(w.g)("div",{className:g()("ImageView",i,{"is-active":p}),style:{paddingBottom:x.top},onClick:this.handleClick},Object(w.g)("div",{className:"ImageView-inner",ref:this.scrollerRef},Object(w.g)("img",{ref:function(e){t.imgEl=e},src:!1===a?Object(O.imgUrl)(r.dataset.original,"r"):f&&this.originalSrc||this.currentSrc,className:g()("ImageView-img",{"ImageView-transformOrigin":1===o}),style:{width:e||d.width,transform:b,opacity:h},onTransitionEnd:this.handleTransitionEnd,alt:"preview"}))))}},{key:"originalSrc",get:function(){return this.props.img.dataset.original}},{key:"currentSrc",get:function(){var e=this.props.img;return e.currentSrc||e.src}}]),n}(b.Component);R.propTypes={img:h.a.object.isRequired,onClose:h.a.func.isRequired};t.a=R},850:function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));n(2);var r=n(830),a=n(819),c=n(950),o=n(5),i=/<sup\b([^>]*data-draft-type="reference"[^>]*)>(.*?)<\/sup>/g;t.a=function(e){return function(t){return function(e,t){if(!e)return e;var n=e,l=[];return n=n.replace(i,(function(e,n){var c=Object(a.d)(n,{decodeValue:!0}),i=c["data-text"],s=void 0===i?"":i,u=c["data-url"],d=void 0===u?"":u,f=c["data-numero"],p=t?"ref_".concat(t,"_").concat(f):"ref_".concat(f),h=l.filter((function(e){return e.refKey===p})),b="".concat(p,"_").concat(h.length);l.push({refKey:p,text:s,url:d,numero:f});var m=[s,d].filter(Boolean).join(" ");return Object(r.renderToStaticMarkup)(Object(o.g)("sup",{"data-text":s,"data-url":d,"data-numero":f,"data-draft-node":"inline","data-draft-type":"reference","data-tooltip":m,"data-tooltip-preset":"white","data-tooltip-classname":"ztext-referene-tooltip"},Object(o.g)("a",{id:b,href:"#".concat(p),"data-reference-link":!0,"aria-labelledby":p},"[",f,"]")))})),l.length?n=n.concat(Object(r.renderToStaticMarkup)(Object(o.g)(c.a,{referenceList:l}))):n}(t,e)}}},852:function(e,t,n){},853:function(e,t,n){"use strict";var r=n(14),a=n(15),c=n(16),o=n(17),i=n(8),l=n(1),s=n(3),u=n.n(s),d=n(2),f=n(164),p=n(988);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var b=function(e){Object(c.a)(n,e);var t=h(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).handlePackup=function(){var t=e.props.onClose;window.scrollTo(0,e.originPageYOffset),t&&t()},e}return Object(a.a)(n,[{key:"componentWillReceiveProps",value:function(e){"bottom"===e.commentPattern&&e.shown&&!this.props.shown&&(this.originPageYOffset=window.pageYOffset)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.containerClassName,r=e.shown,a=e.showPackupButton,c=e.parent,o=e.commentPattern,i=e.commentInputPosition,s=e.onClose,u=e.byComment,d=e.needLoadCommentPermission,h=e.isMobile,b=e.onOrderChange,m=e.onItemLike,v=e.onPaginationClick,g=e.autoFocus,y=e.onMount,O=e.zaInfo;return r?"bottom"===o?Object(l.b)(p.a,{className:t,containerClassName:n,autoFocus:g,parent:c,commentPattern:o,commentInputPosition:i,showPackupButton:a,handlePackupButton:this.handlePackup,needLoadCommentPermission:d,isMobile:h,onOrderChange:b,onItemLike:m,onPaginationClick:v,onMount:y,zaInfo:O}):Object(l.b)(f.b,{size:"fullPage",onClose:s,maskClosable:!1,children:r&&"fixed"===o&&Object(l.b)(p.a,{className:t,containerClassName:n,parent:c,commentPattern:o,byComment:u,needLoadCommentPermission:d,onOrderChange:b,onItemLike:m,onPaginationClick:v,onMount:y,zaInfo:O})}):null}}]),n}(d.Component);b.propTypes={className:u.a.string,containerClassName:u.a.string,byComment:u.a.oneOfType([u.a.number,u.a.string]),parent:u.a.object,shown:u.a.bool,showPackupButton:u.a.bool,commentPattern:u.a.string,commentInputPosition:u.a.oneOf(["top","bottom"]),onClose:u.a.func,needLoadCommentPermission:u.a.bool,isMobile:u.a.bool,onOrderChange:u.a.func,onItemLike:u.a.func,onPaginationClick:u.a.func,autoFocus:u.a.bool,onMount:u.a.func,zaInfo:u.a.object},b.defaultProps={commentPattern:"fixed",showPackupButton:!0,commentInputPosition:"bottom"},t.a=b},854:function(e,t,n){"use strict";var r=n(14),a=n(15),c=n(16),o=n(17),i=n(8),l=n(1),s=n(3),u=n.n(s),d=n(2),f=n.n(d),p=n(25),h=n(10),b=n.n(h),m=n(1212),v=n.n(m),g=n(304),y=n.n(g),O=n(802),j=n(1268),C=n(1267),k=n(18),w=function(e){return f.a.createElement(k.a,e,f.a.createElement("path",{d:"M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z",fillRule:"evenodd"}))};w.defaultProps={name:"Share"};var S=w,x=n(85),N=n(29),R=n(28),E=n(222),T=n(124),I=n(828),P=n(197),L=n(422),A=n(26),_=n(24);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}function z(e){return e&&e.startsWith("//")?"https:".concat(e):e}function D(e){return Object.keys(e).map((function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))})).join("&")}var B=function(e){Object(c.a)(n,e);var t=M(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={qrCodeUrl:"",url:""},e.togglerRef=Object(d.createRef)(),e.shouldShowMenu=function(){var t=e.props,n=t.onTogglerClick,r=t.disabled;return!1!==n()&&!r},e.handleTogglerClick=function(t){e.shouldShowMenu()?(e.loadQrcodeImage(),e.onShare(t)):t.preventDefault()},e.handleMouseEnter=function(t){e.shouldShowMenu()?(e.loadQrcodeImage(),e.onShare(t)):t.preventDefault()},e.open=function(t){e.shouldShowMenu()&&(e.loadQrcodeImage(),e.menu.popover.open(),e.onShare(t))},e.onShare=function(){var t=e.props,n=t.id,r=t.type,a=t.getShareText,c=t.zaShareId;"live"!==r&&"club"!==r&&a(n,r),R.a.trackEvent(e.togglerRef.current,Object.assign({action:"Share",element:"Button",is_intent:!0,element_name:_.Y[r]},c&&{id:c}))},e.copyLink=function(){var t=e.props,n=t.type,r=t.title,a=t.authorName,c=t.href,o=t.showNotification,i=I.b[n]||"",l=r?"".concat(r," - "):"",s=a&&"匿名用户"!==a&&i?"".concat(a,"的").concat(i," - "):"",u=c?Object(T.toAbsoluteUrl)(c):e.url();v()("".concat(l).concat(s,"知乎\n").concat(z(u))),o("链接复制成功！")},e.url=function(){var t=e.props,n=t.id,r=t.type;return z(Object(T.toAbsoluteUrl)(e.props.url))||"".concat(location.origin,"/").concat(r,"/").concat(n)},e.loadQrcodeImage=function(){var t=e.state.qrCodeUrl;if(!t){var n="".concat(location.protocol,"//www.zhihu.com/"),r=e.url();t="".concat(n,"qrcode?").concat(D({url:"".concat(r).concat("#showWechatShareTip")})),e.setState({qrCodeUrl:t,url:r})}},e.shareToWeibo=function(){var t={appKey:"3063806388"},n=e.props.shareText;n&&(t.title=n);var r="http://service.weibo.com/share/share.php?".concat(D(t));window.open(r,"_blank","width=615,height=505")||(location.href=r)},e}return Object(a.a)(n,[{key:"componentDidUpdate",value:function(e){this.props.positionStatus!==e.positionStatus&&this.menu.popover.close()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.togglerClassName,a=t.positionStatus,c=t.toggler,o=t.type,i=t.disabled,s=t.placement,u=t.toggleEvent,f=t.stickHover,p=t.children,h=this.state.qrCodeUrl,m=Object(l.c)("div",{className:b()("ShareMenu-toggler",r),children:[h&&Object(l.b)("img",{className:"ShareMenu-fakeQRCode",src:h,alt:"微信二维码"}),Object(d.cloneElement)(c,{onMouseEnter:this.loadQrcodeImage,disabled:i,ref:this.togglerRef})]}),v="hover"===u?{onMouseEnter:this.handleMouseEnter}:{onClick:this.handleTogglerClick};return Object(l.c)(d.Fragment,{children:[Object(l.b)(P.c,{keyMap:{SHARE:"f x"},handlers:{SHARE:this.open}}),Object(l.c)(x.c,Object.assign({className:b()("ShareMenu",n),positionStatus:a,ref:function(t){e.menu=t},toggler:m,placement:s,toggleEvent:u,stickHover:f},v,{children:[Object(l.c)(E.a,{as:x.b,zaType:"Button",zaAction:"Share",zaText:!0,className:"ShareMenu-button",onClick:this.copyLink,children:[Object(l.b)(O.a,{size:20,className:"ShareMenu-Icon--normal",color:"#9FADC7"}),"复制链接"]}),"live"===o||Object(l.c)(E.a,{as:x.b,zaType:"Button",zaAction:"Share",zaText:!0,className:"ShareMenu-button",onClick:this.shareToWeibo,children:[Object(l.b)(j.a,{size:17,className:"ShareMenu-Icon--small"}),"新浪微博"]}),Object(l.c)(x.b,{tag:"div",className:"ShareMenu-wechat",noActive:!0,children:[Object(l.c)(N.c,{className:"ShareMenu-button",preset:"plain",children:[Object(l.b)(C.a,{size:17,className:"ShareMenu-Icon--small",color:"#60C84D"}),"微信扫一扫"]}),Object(l.b)("img",{className:"ShareMenu-qrCode",src:h,alt:"微信二维码"})]}),p]}))]})}}]),n}(d.Component);B.propTypes={toggler:u.a.node,onTogglerClick:u.a.func,zaShareId:u.a.number},B.defaultProps={toggler:Object(l.b)(N.c,{preset:"plain",icon:S,label:"分享"}),onTogglerClick:y.a};t.a=Object(p.connect)((function(e,t){var n=t.id,r=t.type;return{shareText:e.shareTexts["".concat(r).concat(n)]||t.shareText}}),{showNotification:A.h,getShareText:L.b})(B)},855:function(e,t,n){},856:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(31),a=n(14),c=n(15),o=n(16),i=n(17),l=n(8),s=n(1),u=n(2),d=n(870),f=n(197);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var h=function(e){Object(o.a)(n,e);var t=p(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={ref:null},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.tabIndex,a=t.children,c=Object(r.a)(t,["tabIndex","children"]),o=this.state.ref;return Object(s.b)(d.a,Object.assign({tabIndex:n,onRef:function(t){return!e.state.ref&&e.setState({ref:t})}},c,{children:Object(s.b)(f.d.Provider,{value:o,children:a})}))}}]),n}(u.Component);h.defaultProps={tabIndex:0};var b=h},857:function(e,t,n){"use strict";var r=n(14),a=n(15),c=n(16),o=n(17),i=n(8),l=n(1),s=n(3),u=n.n(s),d=n(2),f=n(1327),p=n(29),h=n(28),b=n(356),m=n(197);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var g=function(e){Object(c.a)(n,e);var t=v(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).buttonRef=Object(d.createRef)(),e.handleClick=function(t){var n=e.props,r=n.zaInfos,a=r.toggleComment,c=r.getCommentAction,o=n.positionStatus,i=n.onClick,l=n.commentsShown;if(h.a.trackEvent(e.buttonRef.current,Object.assign({action:c?c(!l):"Comment",element:"Button",is_intent:!0},a&&{id:a})),i){var s="fixed"===o?"fixed":"bottom",u={commentsShown:!e.props.commentsShown,commentsAutoFocus:!(t instanceof KeyboardEvent),commentPattern:s};t instanceof KeyboardEvent&&"bottom"===s&&e.buttonRef.current.focus(),i(t,u)}},e}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.props.onInstance(this)}},{key:"componentWillUnmount",value:function(){this.props.onInstance(null)}},{key:"render",value:function(){var e,t=this.props,n=t.className,r=t.count,a=t.commentsShown,c=t.commentClosed;a?e="收起评论":e=r&&!c?"".concat(Object(b.formatNumber)(r)," 条评论"):"添加评论";return Object(l.c)(d.Fragment,{children:[Object(l.b)(m.c,{keyMap:{COMMENT:"c"},handlers:{COMMENT:this.handleClick}}),Object(l.b)(p.c,{onRef:this.buttonRef,preset:"plain",className:n,onClick:this.handleClick,icon:f.a,label:e})]})}}]),n}(d.Component);g.propTypes={commentsShown:u.a.bool,count:u.a.number,zaInfos:u.a.shape({id:u.a.number,getCommentAction:u.a.func}),onInstance:u.a.func},g.defaultProps={zaInfos:{},onInstance:function(){return null}};t.a=g},862:function(e,t,n){"use strict";n.d(t,"a",(function(){return ge}));var r=n(31),a=n(14),c=n(15),o=n(16),i=n(17),l=n(8),s=n(1),u=n(3),d=n.n(u),f=n(2),p=n(25),h=n(10),b=n.n(h),m=n(29),v=n(825),g=n(1232),y=n(847),O=n(225),j=n(1044),C=n(944),k=n(364),w=n(813),S=n(973),x=n(196),N=n(28),R=n(197),E=n(890),T=n(19),I=n(36),P=n.n(I),L=n(53),A=n(800);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var M=function(e){Object(o.a)(n,e);var t=_(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.visible,n=e.top,r=e.onSelect,a=e.content,c=this.hintInfo,o=c&&"danger"===c.type;return Object(s.c)("div",{className:b()("SharePopover",{"SharePopover--show":t}),style:{top:n},disabled:o,children:[Object(s.b)("span",{className:"SharePopover-arrow"}),Object(s.c)("div",{className:b()("SharePopover-content",{"SharePopover-content--danger":o}),onClick:function(){o||r(a)},children:[Object(s.b)(A.a,{className:"SharePopover-quote",size:24}),Object(s.b)("span",{className:"SharePopover-main",children:"发送到百科下的摘录"}),c&&Object(s.b)("span",{className:"SharePopover-hint",children:c.text})]})]})}},{key:"hintInfo",get:function(){var e=this.props,t=e.content;if(!e.isCopyable)return{type:"danger",text:"该内容限制转载"};var n=t.length;return n<100?{type:"danger",text:"最少摘录 100 字"}:n>450&&n<=500?{type:"warning",text:"还可以摘录 ".concat(500-n," 字")}:n>500&&{type:"danger",text:"已经超出 ".concat(n-500," 字")}}}]),n}(f.Component);M.propTypes={content:d.a.string,top:d.a.number,visible:d.a.bool};var z=M,D=n(41),B=n(164),V=n(1067),F=n(379);function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var U=function(e){Object(o.a)(n,e);var t=H(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={topics:[],actived:!1},e.handleChange=function(t){(0,e.props.onChange)(t),e.setState((function(e){return Object.assign({},e,{actived:!1,topics:t})}))},e.deactived=function(){e.setState({actived:!1})},e.toggleActived=function(){e.setState((function(e){return Object.assign({},e,{actived:!e.actived})}))},e.focus=function(){return e.topicsInput&&e.topicsInput.focus()},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.topics,r=t.actived;return Object(s.b)("div",{className:"TopicSelect",children:Object(s.b)(F.a,{actived:r,placeholderNote:" ",max:1,inputProps:{className:"".concat("TopicSelect","-topicInput")},onRef:function(t){e.topicsInput=t},value:n,onChange:this.handleChange,onBlur:this.handleBlur,onToggleActived:this.toggleActived})})}}]),n}(f.Component);function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var W=function(e){Object(o.a)(n,e);var t=q(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={topics:[]},e.handleChangeTopics=function(t){e.setState((function(e){return Object.assign({},e,{topics:t})}))},e.handleSubmit=function(){var t=Object(D.a)(e.state.topics,1)[0].urlToken;(0,e.props.onSubmit)(t)},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.author,r=e.currentUser,a=e.title,c=e.url,o=e.onClose,i=e.content,l=e.visible;return Object(s.b)(B.b,{onClose:o,size:"large",title:"发送摘录到百科",className:"AbstractForm",children:l&&Object(s.c)(f.Fragment,{children:[Object(s.b)(V.a,{type:t,author:n,member:r,title:a,url:c,content:i,theme:"scroll"}),Object(s.b)(U,{onChange:this.handleChangeTopics}),Object(s.b)("div",{className:"AbstractForm-footer",children:Object(s.b)(m.c,{preset:"primary",color:"blue",disabled:this.disabled,onClick:this.handleSubmit,children:"确定"})})]})})}},{key:"disabled",get:function(){var e=this.state.topics,t=this.props.content;return 0===e.length||""===t}}]),n}(f.Component);W.propTypes={type:d.a.string.isRequired,author:d.a.object,currentUser:d.a.object,title:d.a.string.isRequired,content:d.a.string.isRequired,url:d.a.string.isRequired,visible:d.a.bool.isRequired,onClose:d.a.func.isRequired,onSubmit:d.a.func.isRequired};var K=n(146),G=n(940),Q=n(234);function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var J=function(e){Object(o.a)(n,e);var t=Z(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={popoverVisible:!1,top:0,content:"",abstractModalVisible:!1},e.handlePopoverShow=function(t,n){if(!e.hasAddBaikeSummaryPermission)return null;N.a.trackCardShow(null,{id:6115}),e.setState((function(e){return Object.assign({},e,{top:n,content:t,popoverVisible:!0})}))},e.handlePopoverClose=function(){if(!e.hasAddBaikeSummaryPermission)return null;e.setState((function(e){return Object.assign({},e,{popoverVisible:!1})}))},e.handleAbstractModalClose=function(){e.setState((function(e){return Object.assign({},e,{abstractModalVisible:!1})}))},e.handleAbstractSelected=function(t){N.a.trackEvent(null,{id:6116,action:"Send"}),e.setState((function(e){return Object.assign({},e,{content:t,popoverVisible:!1,abstractModalVisible:!0})}))},e.handleCreateAbstract=function(t){var n=e.props,r=n.type,a=n.objectId,c=n.createAbstract,o=e.state.content;N.a.trackEvent(null,{id:6117,action:"Submit"}),c({type:r,token:a,topicId:t,content:o}).then((function(){e.setState((function(e){return Object.assign({},e,{content:o,popoverVisible:!1,abstractModalVisible:!1})}))}))},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e,t,n;e=this.richContainer,t=this.handlePopoverShow,n=this.handlePopoverClose,e.onmouseup=function(){var r=Object(L.a)(P.a.mark((function r(a){var c,o;return P.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,new Promise((function(e){setTimeout((function(){var t="";t=document.selection?document.selection.createRange().text:document.getSelection(),e(t.toString())}),0)}));case 2:(c=r.sent)?(o=a.target===e?a.offsetY:a.offsetY+a.target.offsetTop+30,t(c,o)):n();case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}},{key:"render",value:function(){var e=this.state,t=e.popoverVisible,n=e.top,r=e.content,a=e.abstractModalVisible,c=this.props,o=c.type,i=c.author,l=c.currentUser,u=c.title,d=c.url,p=c.isCopyable;return this.hasAddBaikeSummaryPermission?Object(s.c)(f.Fragment,{children:[Object(s.b)(z,{top:n,visible:t,content:r,isCopyable:this.isAuthor||p,onBlur:this.handlePopoverClose,onSelect:this.handleAbstractSelected}),Object(s.b)(W,{type:o,onSubmit:this.handleCreateAbstract,author:i,visible:a,onClose:this.handleAbstractModalClose,currentUser:l,title:u,url:d,content:r})]}):null}},{key:"isAuthor",get:function(){var e=this.props,t=e.currentUser,n=e.author;return Object(G.a)(t,n)}},{key:"hasAddBaikeSummaryPermission",get:function(){var e=this.props.currentUser;return e&&e.hasAddBaikeSummaryPermission}},{key:"richContainer",get:function(){var e=this.props,t=e.type,n=e.objectId;return"article"===t?document.querySelector(".Post-RichText"):document.querySelector(".AnswerItem[name='".concat(n,"'] .RichContent-inner"))}}]),n}(f.Component);J.propTypes={type:d.a.string.isRequired,author:d.a.object.isRequired,currentUser:d.a.object,title:d.a.string.isRequired,url:d.a.string.isRequired,objectId:d.a.number.isRequired,isCopyable:d.a.bool},J.defaultProps={isCopyable:!0};var Y=Object(T.compose)(Object(Q.b)(),Object(p.connect)(null,{createAbstract:K.d}))(J);function X(e,t){return"https://www.zhihu.com/vessay/editor?type=".concat(e,"&id=").concat(t)}var $=n(822),ee=n(69),te=n(406),ne=n(37),re=n(891);function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var ce=function(e){Object(o.a)(n,e);var t=ae(n);function n(){var e;return Object(a.a)(this,n),(e=t.call(this)).state={tipShown:!1,tipContent:"",tipX:0,tipY:0,tipPosition:"bottom"},e.handleMouseDown=e.handleMouseDown.bind(Object(ee.a)(e)),e.handleCopy=e.handleCopy.bind(Object(ee.a)(e)),e.handleTipClose=e.handleTipClose.bind(Object(ee.a)(e)),e.rightClickX=-1,e.rightClickY=-1,e}return Object(c.a)(n,[{key:"getRange",value:function(e){if(e&&e.rangeCount>0)return e.getRangeAt(0)}},{key:"getExtraCopyright",value:function(e,t,n){var r=["作者：".concat(t),"链接：".concat(e),"来源：知乎","著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"],a=["",""];return r=n?r.concat(a):a.concat(r)}},{key:"getCopyText",value:function(e,t,n,r){var a=this.getExtraCopyright(t,n,r).join("\n");return r?a+e:e+a}},{key:"getRangeHtml",value:function(e){var t=document.createElement("div");return t.appendChild(e.cloneContents()),t.outerHTML}},{key:"getCopyHtml",value:function(e,t,n,r){var a=this.getExtraCopyright(t,n,r).join("<br />");return"<div>".concat(r?a+e:e+a,"</div>")}},{key:"randomRange",value:function(e,t){return Math.floor(Math.random()*(t-e)+e)}},{key:"addCopyright",value:function(e,t,n){if(window.getSelection){var r=window.getSelection(),a=this.getRange(r),c=a.toString().trim(),o=this.getRangeHtml(a);if(c&&!(c.length<128)){var i=c.length>=512,l=this.getCopyHtml(o,t,n,i),s=this.getCopyText(c,t,n,i),u=e.nativeEvent.clipboardData;if("object"==typeof u){if(u.setData("text/html",'<meta charset="utf-8">'+l),u.setData("text/plain",s),u.getData("text/plain")&&u.getData("text/plain").length>0)return void e.preventDefault()}var d=document.createElement("div");d.innerHTML=l;var f=d.firstChild;f.style.position="fixed",f.style.left="-9999px",document.body.appendChild(f),r.selectAllChildren(f),setTimeout((function(){document.body.removeChild(f),r.removeAllRanges(),r.addRange(a)}),200)}}}},{key:"showTip",value:function(e,t){if(window.getSelection){var n=window.getSelection(),r=this.getRange(n),a=r.toString().trim(),c=this.randomRange(44,66);if(!(a.length<=c)){e.preventDefault(),e.stopPropagation();var o,i=r.getBoundingClientRect(),l=window.pageYOffset,s=this.rightClickX,u=this.rightClickY,d="bottom";if(-1!==u)o=u+3;else{var f=this.props.viewPort,p=i.top+l,h=i.bottom+l,b=l+f.top+52,m=l+f.bottom-52;h<b?o=b-52:h<m?o=h:(d="top",o=p>b&&p<m?p:m+52)}var v=-1!==s?s+3:i.left+(i.right-i.left)/2-12;this.setState({tipShown:!0,tipContent:t,tipX:v,tipY:o,tipPosition:d}),this.rightClickX=-1,this.rightClickY=-1}}}},{key:"handleTipClose",value:function(){this.setState({tipShown:!1})}},{key:"handleCopy",value:function(e){var t=this.props,n=t.data,r=n.author,a=n.type,c=n.id,o=n.question,i=n.reshipmentSettings,l=n.relationship,u=(l=void 0===l?{}:l).isAuthor,d=l.isAuthorized,f=t.isCurrentUser,p="";if("article"===a?p="https://zhuanlan.zhihu.com/p/".concat(c):"answer"===a&&(p="https://www.zhihu.com/question/".concat(o.id,"/answer/").concat(c)),!f&&!u)switch(i){case"disallowed":this.showTip(e,Object(s.b)("a",{href:"https://www.zhihu.com/term/zhihu-terms#sec-licence-6",children:"禁止转载"}));break;case"need_payment":if(!d){this.showTip(e,Object(s.b)("a",{href:"https://www.zhihu.com/copyright/apply?answer=".concat(c),children:"申请转载"}));break}this.showTip(e,"已获授权，复制成功");default:this.addCopyright(e,p,r.name)}}},{key:"handleMouseDown",value:function(e){3===e.nativeEvent.which&&(this.rightClickX=e.pageX,this.rightClickY=e.pageY)}},{key:"render",value:function(){var e=this.props,t=e.onRef,n=e.data,r=e.tag,a=e.html,c=e.children,o=e.onClick,i=e.className,l=e.itemProp,u=e.style,d=e.prefix,f=e.ecommerce,p=e.shouldUseArticleCard,h=e.shouldShowCatalog,b=e.richContentKey,m=this.state,v=m.tipShown,g=m.tipContent,y=m.tipX,O=m.tipY,j=m.tipPosition;return Object(s.c)("div",{ref:t,onClick:o,className:i,style:u,children:[d,Object(s.b)(re.a,{richContentKey:b,sourceId:n.id,sourceType:n.type,itemProp:l,tag:r,html:a,onCopy:this.handleCopy,onMouseDown:this.handleMouseDown,className:"CopyrightRichText-richText",ecommerce:f,shouldUseArticleCard:p,shouldShowCatalog:h}),c,Object(s.b)(te.a,{shown:v,timeout:1e4,hideOnClick:!0,onClose:this.handleTipClose,x:y,y:O,position:j,content:g,className:"CopyrightRichText-tooltip"})]})}}]),n}(f.Component);ce.propTypes={onRef:d.a.func,viewPort:d.a.object};var oe=Object(T.compose)(Object(p.connect)((function(e,t){return{isCurrentUser:Object(ne.h)(e,t.data.author)}})))(ce),ie=n(880),le=n(817),se=n(34),ue=n(358),de=n.n(ue),fe=n(166);function pe(){var e=Object(le.a)(["发布于",""]);return pe=function(){return e},e}function he(){var e=Object(le.a)(["编辑于",""]);return he=function(){return e},e}function be(){var e=Object(le.a)(["发布于",""]);return be=function(){return e},e}function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var ve=function(e){Object(o.a)(n,e);var t=me(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.href,n=e.created,r=e.updated,a=e.onClick;return Object(s.b)("div",{className:"ContentItem-time",children:Object(s.b)(se.Link,{to:t,target:"_blank",onClick:a,children:Object(s.b)("span",{"data-tooltip":de()(be(),Object(fe.toAbsoluteDateTimeString)(n)),children:r!==n?de()(he(),Object(fe.toSmartString)(r)):de()(pe(),Object(fe.toSmartString)(n))})})})}}]),n}(f.Component);ve.propTypes={href:d.a.string,created:d.a.number,updated:d.a.number,onClick:d.a.func};var ge=ve,ye=n(60),Oe=n(414),je=n(905),Ce=n(1092),ke=n.n(Ce);function we(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var Se=/.*?(class="link-box")/;var xe=function(e){Object(o.a)(n,e);var t=we(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state=Object.assign({},e.getInitTruncatedState(e.props),{shouldSticky:!1,offset:0}),e.richContentRef=Object(f.createRef)(),e.truncateContent=function(){var t=e.props.isMobile?400:800,n=e.props.expandedHeight||t;(!e.content||e.content.scrollHeight<n)&&e.setState({isTruncated:!1,isExpanded:!1}),e.content&&e.content.scrollHeight>e.content.offsetHeight&&e.setState({contentCollapsed:!0})},e.updateStateInBrowser=function(){var t=e.props,n=t.excerpt,r=t.allowCollapseWithEmptyExcerpt,a=t.html,c=t.expanded,o=t.cover,i=t.unescapable,l=t.limit,s=t.limitWithImage,u=t.truncateHTMLOptions,d=t.truncateDisabled,f=!0,p=e.state.truncatedContent;if((n||r)&&(Se.test(n)||d))p=n;else if(!i){var h=o?s:l,b=e.truncate(a,h,u);f=b.isTruncated,p=b.content}return{isTruncated:f,isExpanded:a&&c,truncatedContent:p,previewImg:null}},e.checkOpenInAppStyle=function(e){},e.toggle=function(t){e.isCollapsed()?e.handleExpand(t):e.handleCollapse(t)},e.handleExpand=function(t){var n,r,a=e.props.zaIds.expand;(null==t?void 0:t.target)&&(((null===(r=n=t.target.textContent)||void 0===r?void 0:r.length)>10||t.target.classList.contains("RichContent-inner")||t.target.classList.contains("List-item"))&&(n=null));N.a.trackEvent(e.richContentRef.current,Object.assign({action:"Expand"},n&&{name:n},a&&{id:a}));var c=e.props.onExpand;if(c)c(t);else{var o=e.props,i=o.onToggleExpend,l=o.data,s=l.type,u=l.id;e.context.currentUser&&Object(je.c)("article"===s?"post":s,u,je.a);i&&i(!0),e.setState({isExpanded:!0},(function(){"article"===s&&Object(w.onViewedOnce)(e.richContentRef.current,(function(){N.a.trackEvent(e.richContentRef.current,{action:"ReadFinish"})}))}))}},e.handleCollapse=function(){var t=e.props.onToggleExpend;N.a.trackEvent(e.richContentRef.current,{action:"Collapse",element:"Button"});t&&t(!1),e.setState({isExpanded:!1},(function(){return e.checkOpenInAppStyle(!1)}))},e.handlePreview=function(t){var n=e.state,r=n.isExpanded,a=n.isTruncated&&!r,c=t.target;a||"IMG"!==c.tagName||!c.classList.contains("zh-lightbox-thumb")&&!c.classList.contains("Slideshow-swiperImage")||e.setState({previewImg:c})},e.handlePositionStatusChange=function(t){var n=e.props.onPositionStatusChange;n&&(n(t),e.checkOpenInAppStyle("fixed"===t))},e.handleObserve=function(t){var n=t[0].intersectionRatio;if(n||!document.querySelector("#root").style.position){var r=n>0;r!==e.state.shouldSticky&&(e.setState({shouldSticky:r}),r||e.checkOpenInAppStyle(!1))}},e.handleTrunObserve=function(t){var n=e.props,r=n.data,a=(r.type,r.id,n.updateReadStatus,t[0]),c=a.intersectionRatio,o=a.isIntersecting;e.truncateComputed||(c>0||o)&&(setTimeout((function(){return e.truncateContent()})),e.truncateComputed=!0)},e.isCollapsed=function(){var t=e.props,n=t.after,r=t.before,a=t.unescapable,c=e.state,o=c.isExpanded,i=c.isTruncated;return!r&&!n||a?i&&!o:!o},e.handleConvertVideo=function(){var t=e.props.data.id;window.open(X("answer",t))},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState(Object.assign({},this.updateStateInBrowser(),{viewPort:{top:148,bottom:window.innerHeight-56}})),Object(w.onViewedOnce)(this.richContentRef.current,(function(){var t=e.props,n=t.data,r=n.type,a=n.id,c=t.expanded;e.context.currentUser&&c&&Object(je.c)("article"===r?"post":r,a,je.a)})),this.props.imperativeRef&&(this.props.imperativeRef.current={handleExpand:this.handleExpand.bind(this)})}},{key:"componentWillReceiveProps",value:function(e){this.props.data.id!==e.data.id&&this.setState(this.getInitTruncatedState(e))}},{key:"componentWillUpdate",value:function(e,t){if(this.state.isExpanded&&!t.isExpanded){var n=this.richContentRef.current.getBoundingClientRect();n.top<this.props.topExcludedHeight&&(this.rect=n,this.scroll=window.pageYOffset)}}},{key:"componentDidUpdate",value:function(e,t){if(t.isExpanded&&!this.state.isExpanded&&this.rect){var n=this.rect,r=n.top,a=n.bottom,c=n.height,o=this.richContentRef.current.offsetHeight,i=window.innerHeight,l=a<i?o-c:r-(i-o);window.scrollTo(0,this.scroll+l),this.rect=null,this.scroll=null}}},{key:"componentWillUnmount",value:function(){this.props.imperativeRef&&(this.props.imperativeRef.current=null)}},{key:"getInitTruncatedState",value:function(e){var t=e.excerpt,n=e.html,r=e.expanded,a=e.unescapable;return{isTruncated:t.length<=n.length,isExpanded:r,truncatedContent:a?n:t,previewImg:null}}},{key:"truncate",value:function(e,t,n){var r=Object(S.truncateHTML)(e,t,n);return{isTruncated:r.isTruncated,content:r.content}}},{key:"renderActions",value:function(){var e=this,t=this.props,n=t.children,r=t.unescapable,a=t.noCollapsed,c=t.expandText,o=void 0===c?"展开阅读全文":c,i=t.onClick,l=t.videoData,u=t.enableConvert,d=t.needExpandArrow,f=void 0===d||d,p=t.data,h=Object(G.a)(this.context.currentUser,null==p?void 0:p.author),b=this.state,v=b.isExpanded,y=b.isTruncated,j=b.shouldSticky,C=b.offset,k=u&&h&&Object(s.c)(m.c,{preset:"plain",onClick:this.handleConvertVideo,className:"ContentItem-convertVideoButton",children:[Object(s.b)(ke.a,{fill:"#8590A6"}),Object(s.b)("span",{children:"生成视频"})]});if(!v)return[r&&y&&!l&&Object(s.c)(m.c,{preset:"plain",className:"ContentItem-rightButton ContentItem-expandButton",onClick:i||this.handleExpand,children:[o,f&&Object(s.b)(g.a,{className:"ContentItem-arrowIcon",center:!0})]},"expand-button"),n&&Object(s.c)($.a,{children:[n,k]},"actions")];var w=(n||!a)&&Object(s.c)($.a,{className:"RichContent-actions",children:[n,k,!a&&Object(s.c)(m.c,{"data-zop-retract-question":!0,preset:"plain",className:"ContentItem-rightButton",onClick:this.handleCollapse,children:[Object(s.b)("span",{className:"RichContent-collapsedText",children:"收起"}),Object(s.b)(g.a,{className:"ContentItem-arrowIcon is-active",center:!0})]})]});return j&&w?Object(s.b)(O.a,{offset:C,bottom:!0,container:function(){return e.richContentRef.current.parentNode},onPositionStatusChange:this.handlePositionStatusChange,children:w}):w}},{key:"renderText",value:function(){var e=this,t=this.props,n=t.html,r=t.excerpt,a=t.data,c=t.itemProp,o=void 0===c?"text":c,i=t.expandText,l=void 0===i?"阅读全文":i,u=t.onClick,d=t.prefix,f=t.unescapable,p=(t.isSearchContent,t.collapsedHeight),h=t.ecommerce,v=t.canAbstract,O=t.shouldUseArticleCard,C=t.richContentKey,w=this.state,S=w.truncatedContent,x=w.previewImg,N=w.viewPort,R=w.contentCollapsed,T=w.isExpanded,I=this.isCollapsed(),P=S||r,L="answer"===a.type?Object(j.a)(n):n,A=I?P:L,_={},M=Object(s.c)(oe,Object.assign({richContentKey:C&&String([C,I]),itemProp:o,className:b()("RichContent-inner",{"RichContent-inner--collapsed":R}),style:I&&f?{maxHeight:p}:null,tag:"span",onRef:function(t){e.content=t},data:a,html:A,viewPort:N,prefix:d},I&&{onClick:u||this.handleExpand},_,{ecommerce:h,shouldUseArticleCard:O,shouldShowCatalog:Object(E.a)(a)&&(T||f&&!I),children:[v&&Object(s.b)(Y,Object.assign({},this.abstractProps)),!f&&I&&Object(s.c)(m.c,{preset:"plain",className:"ContentItem-more",children:[l,Object(s.b)(g.a,{className:"ContentItem-arrowIcon",center:!0})]}),x&&Object(s.b)(y.a,{img:x,onClose:function(){return e.setState({previewImg:null})}})]}),I);return f?Object(s.b)(k.a,{rootMargin:"200px 0px 200px 0px",onObserve:this.handleTrunObserve,children:M}):M}},{key:"render",value:function(){var e=this.props,t=e.unescapable,r=e.after,a=e.before,c=e.extra,o=e.cover,i=e.hasVideo,l=e.renderCanExpandExtra,u=e.className,d=e.videoData,p=e.handleClickVideoMoreButton,h=this.state.isExpanded,m=this.isCollapsed(),v=d?Object(s.c)(f.Fragment,{children:[Object(s.b)(ie.a,{data:d}),Object(s.b)("p",{className:"RichContent-videoMore",onClick:p,children:"点击查看全文"})]}):this.renderText(),g=h?Object(s.b)(k.a,{rootMargin:"-".concat(240,"px 0px"),onObserve:this.handleObserve,children:v}):v;return Object(s.c)("div",{className:b()("RichContent",u,{"is-collapsed":m,"RichContent--unescapable":t}),ref:this.richContentRef,onClick:this.handlePreview,children:[Object(s.b)(R.c,{keyMap:{TOGGLE_EXPAND:"o"},handlers:{TOGGLE_EXPAND:this.toggle}}),!m&&a,!t&&m&&o&&Object(s.b)(n.Cover,{url:o,hasVideo:i,onClick:this.handleExpand}),g,c||"function"==typeof l&&l(h,this.handleExpand),!m&&r,this.renderActions()]})}},{key:"abstractProps",get:function(){var e=this.props.data;return{objectId:e.id,type:e.type,author:e.author,title:e.question.title,url:e.url,isCopyable:e.isCopyable}}}]),n}(f.Component);xe.contextTypes={currentUser:d.a.object},xe.propTypes={enableConvert:d.a.bool,unescapable:d.a.bool,expanded:d.a.bool,noCollapsed:d.a.bool,limit:d.a.number,limitWithImage:d.a.number,collapsedHeight:d.a.number,html:d.a.string,excerpt:d.a.string,allowCollapseWithEmptyExcerpt:d.a.bool,truncateDisabled:d.a.bool,before:d.a.node,after:d.a.node,prefix:d.a.node,extra:d.a.node,renderCanExpandExtra:d.a.func,topExcludedHeight:d.a.number,onPositionStatusChange:d.a.func,type:d.a.string,data:d.a.object,canAbstract:d.a.bool,cover:d.a.string,hasVideo:d.a.bool,truncateHTMLOptions:d.a.object,expandText:d.a.string,onToggleExpend:d.a.func,videoData:d.a.object,handleClickVideoMoreButton:d.a.func,zaIds:d.a.shape({expand:d.a.number})},xe.defaultProps={limit:160,limitWithImage:100,expanded:!1,unescapable:!1,topExcludedHeight:60,excerpt:"",allowCollapseWithEmptyExcerpt:!1,hasVideo:!1,data:{},collapsedHeight:400,zaIds:{}},xe.Cover=function(e){var t=e.url,n=e.hasVideo,a=Object(r.a)(e,["url","hasVideo"]);return Object(s.c)("div",Object.assign({className:b()("RichContent-cover",{"RichContent-cover--mobile":!1})},a,{children:[Object(s.b)("div",{className:"RichContent-cover-inner",children:Object(s.b)(C.a,{thumbnail:Object(x.imgUrl)(t,"60w"),url:Object(x.imgUrl)(t,"400x224"),alt:"cover"})}),n&&Object(s.b)(v.a,{className:"RichContent-cover-play"})]}))};t.b=Object(p.connect)((function(e){return{isMobile:Object(ye.d)(e)}}),{updateReadStatus:Oe.b})(xe)},864:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n(20),a=n.n(r),c=n(21),o=n.n(c),i=n(22),l=n.n(i),s=n(23),u=n.n(s),d=n(13),f=n.n(d),p=n(3),h=n.n(p),b=n(2),m=n(364),v=n(5);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return u()(this,n)}}var y=function(e){l()(n,e);var t=g(n);function n(){var e;a()(this,n);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={shown:!1},e.handleObserve=function(t){(t[0].isIntersecting||t[0].intersectionRatio>0)&&e.setState({shown:!0})},e}return o()(n,[{key:"render",value:function(){var e=this.props,t=e.placeholder,n=e.rootMargin,r=e.children;return this.state.shown?r:Object(v.g)(m.a,{rootMargin:n,onObserve:this.handleObserve,threshold:[0,.1]},t||Object(v.g)("div",{style:{height:"1px"}}))}}]),n}(b.Component);y.propTypes={placeholder:h.a.element,rootMargin:h.a.string},y.defaultProps={rootMargin:"200px"};var O=y},865:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.onViewedOnce=t.isViewed=void 0;var a=r(n(199));t.isViewed=function(e){if(!document.body||!document.body.contains(e))return!1;var t=e.getBoundingClientRect(),n=document.documentElement;return t.bottom<(window.innerHeight||n.clientHeight)};var c=function(){};t.onViewedOnce=function(e,n,r){if(t.isViewed(e))return n.call(r,e),c;var o=a.default((function(){t.isViewed(e)&&(n.call(r,e),i())}),250);function i(){window.removeEventListener("scroll",o),window.removeEventListener("resize",o)}return window.addEventListener("scroll",o),window.addEventListener("resize",o),i}},866:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.onFullyViewedOnce=t.isFullyViewed=void 0;var a=r(n(199)),c=r(n(304));t.isFullyViewed=function(e,t){var n=e.getBoundingClientRect(),r=n.right,a=n.bottom,c=t.getBoundingClientRect(),o=c.right;return a<=c.bottom&&r<=o},t.onFullyViewedOnce=function(e,n,r,o){if(t.isFullyViewed(e,n))return r.call(o,e),c.default;var i=a.default((function(){t.isFullyViewed(e,n)&&(r.call(o,e),l())}),250);n.addEventListener("scroll",i),n.addEventListener("resize",i);var l=function(){n.removeEventListener("scroll",i),n.removeEventListener("resize",i)};return l}},867:function(e,t,n){"use strict";var r=n(2),a=n(5);function c(e){var t=e.className,n=e.children,c=e.onEvent,o=Object(r.useCallback)((function(e){c(e)||e.stopPropagation()}),[c]);return Object(a.g)("div",{className:t,onBeforeInput:o,onBlur:o,onCompositionEnd:o,onCompositionStart:o,onCopy:o,onCut:o,onDragEnd:o,onDragEnter:o,onDragLeave:o,onDragOver:o,onDragStart:o,onDrop:o,onFocus:o,onInput:o,onKeyDown:o,onKeyPress:o,onKeyUp:o,onMouseUp:o,onPaste:o,onSelect:o,onClick:o},n)}c.defaultProps={onEvent:function(){return!1}},t.a=c},870:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return w}));var r=n(33),a=n.n(r),c=n(45),o=n.n(c),i=n(2),l=n.n(i),s=n(10),u=n.n(s),d=n(5),f=function(e){var t=e.className,n=e.title,r=e.options,c=e.children,i=o()(e,["className","title","options","children"]);return Object(d.g)("div",a()({className:u()("List",t)},i),(n||r)&&Object(d.g)("div",{className:"List-header"},Object(d.g)("h4",{className:"List-headerText"},n),Object(d.g)("div",{className:"List-headerOptions"},r)),c)},p=n(20),h=n.n(p),b=n(21),m=n.n(b),v=n(22),g=n.n(v),y=n(23),O=n.n(y),j=n(13),C=n.n(j);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C()(e);if(t){var a=C()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return O()(this,n)}}var w=function(e){g()(n,e);var t=k(n);function n(){return h()(this,n),t.apply(this,arguments)}return m()(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.tabIndex,r=e.meta,a=e.children,c=e.onRef;return Object(d.g)("div",{className:u()("List-item",t),tabIndex:n,ref:c},r&&Object(d.g)("div",{className:"List-itemMeta"},r),a)}}]),n}(l.a.Component);n(914)},871:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return p}));n(2);var r=n(147),a=n(830),c=n(850),o=n(946),i=n(5),l=/<(h2|h3)[^>]*>(.*?)<\/\1>/g,s={h2:1,h3:2},u=function(e,t){return"h_".concat(e||"editor","_").concat(t)},d=function(e){return e.replace(c.b,"").replace(/<[^>]*>/g,"")},f=function(e){return s[e]},p=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!e)return{catalog:[],html:e};var r=[];return t=t||"editor",n="function"==typeof n?n:function(){return String(n)},e=e.replace(l,(function(e,a){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=d(c),i=f(a),l=u(t,r.length);return r.push({text:o,titleLevel:i,Tag:a,targetId:l}),n({text:o,titleLevel:i,targetId:l,Tag:a,originText:c})})),{catalog:r,html:e}},h=function(e){var t=e.originText,n=e.targetId,r=e.Tag;return Object(a.renderToStaticMarkup)(Object(i.g)(r,{id:n,dangerouslySetInnerHTML:{__html:t}}))},b=function(e,t){var n=t.sourceId,c=t.theme,l=t.shouldShowCatalog;if(!e)return e;if(!l)return e;var s=p(e,n,h),u=s.catalog,d=s.html;return u.length?Object(a.renderToStaticMarkup)(Object(i.g)(r.a,{theme:c},Object(i.g)(o.a,{catalog:u}))).concat(d):d}},872:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u}));var r=n(7),a=n(882),c=n(26),o=n(6),i=Object(o.a)("report",["ADD"]),l=function(e){var t=e.message,n=e.code;return[103006,103007].includes(n)?t||a.a.failure:[103003,103001].includes(e.code)?a.a.duplicate:a.a.failure},s=a.a.success;function u(e,t,n,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"web",u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};return{API:{types:i.ADD,endpoint:"reports",method:"POST",body:Object(r.decamelizeKeys)({resourceId:e,type:t,reasonType:n,customReason:a,source:o})},NOTIFICATION:void 0===u.NOTIFICATION?{key:"comment"===t?c.b:c.d,success:s,failure:l}:u.NOTIFICATION}}},874:function(e,t,n){var r=n(956),a=n(304),c=r?function(e){return r.get(e)}:a;e.exports=c},875:function(e,t,n){var r=n(957),a=Object.prototype.hasOwnProperty;e.exports=function(e){for(var t=e.name+"",n=r[t],c=a.call(r,t)?n.length:0;c--;){var o=n[c],i=o.func;if(null==i||i==e)return o.name}return t}},876:function(e,t,n){"use strict";t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(e,Object.assign({credentials:"include",headers:{"X-Requested-With":"Fetch"}},t)).then((function(e){return e.json()}))}},878:function(e,t,n){"use strict";n.d(t,"b",(function(){return We})),n.d(t,"a",(function(){return Ke}));var r=n(59),a=n.n(r),c=n(2),o=n.n(c),i=n(7),l=n(813),s=n(71),u=n.n(s),d=n(1085),f=n(807),p=n(222),h=n(28),b=n(304),m=n.n(b),v=n(10),g=n.n(v),y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(e,Object.assign({credentials:"include",headers:{"X-Requested-With":"Fetch"}},t)).then((function(e){return e.json()}))},O=n(33),j=n.n(O),C=n(45),k=n.n(C),w=n(20),S=n.n(w),x=n(21),N=n.n(x),R=n(22),E=n.n(R),T=n(23),I=n.n(T),P=n(13),L=n.n(P),A=n(5);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=L()(e);if(t){var a=L()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return I()(this,n)}}var M=function(e){E()(n,e);var t=_(n);function n(){return S()(this,n),t.apply(this,arguments)}return N()(n,[{key:"render",value:function(){return Object(A.g)("svg",{width:"30",height:"30",viewBox:"0 0 66 66",xmlns:"http://www.w3.org/2000/svg",className:"CircleLoadingBar","aria-hidden":"true"},Object(A.g)("g",null,Object(A.g)("circle",{className:"path",fill:"none",strokeWidth:"6",strokeLinecap:"round",cx:"33",cy:"33",r:"30"})))}}]),n}(c.Component),z=n(3),D=n.n(z),B=n(43),V=n.n(B),F=n(772),H=n(306),U=9,q=27,W=n(90),K=n.n(W),G=n(392),Q=n.n(G);function Z(e,t){e&&(e.focus(t),e instanceof HTMLInputElement&&e.select())}function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},r=n(Q()(t)),a=r.length;if(a){var c=r.indexOf(document.activeElement);-1===c?("prev"===e&&Z(r[a-1]),"next"===e&&Z(r[0])):("prev"===e&&Z(r[(c-1+a)%a]),"next"===e&&Z(r[(c+1)%a]))}}var Y=Z;function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=L()(e);if(t){var a=L()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return I()(this,n)}}var $=[],ee=function(e){E()(n,e);var t=X(n);function n(){var e;S()(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).handleKeyDown=function(t){if(e.isTopLayer()){var n=e.props.onKeyDown;if(n&&n(t),!t.defaultPrevented&&t.keyCode===U){t.preventDefault();var r=Object(B.findDOMNode)(K()(e));J(t.shiftKey?"prev":"next",r,(function(e){return e.filter((function(e){return"true"===e.contentEditable||!e.closest("[contentEditable]")}))}))}}},e}return N()(n,[{key:"componentDidMount",value:function(){$.push(this),window.addEventListener("keydown",this.handleKeyDown,!0),this.enterFocusZone()}},{key:"componentWillUnmount",value:function(){$.splice($.indexOf(this),1),window.removeEventListener("keydown",this.handleKeyDown,!0),this.leaveFocusZone()}},{key:"enterFocusZone",value:function(){var e=this;this.prevActiveElement=document.activeElement,this.timeout=window.setTimeout((function(){var t=Object(B.findDOMNode)(e);t&&!t.contains(document.activeElement)&&function(e){J("next",e)}(t)}),100)}},{key:"leaveFocusZone",value:function(){clearTimeout(this.timeout),this.prevActiveElement&&!this.prevActiveElement.closest("[contentEditable]")&&Y(this.prevActiveElement)}},{key:"isTopLayer",value:function(){return $[$.length-1]===this}},{key:"render",value:function(){return c.Children.only(this.props.children)}}]),n}(o.a.Component),te=n(169),ne=n(134),re=n(135);function ae(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var ce=!1,oe=o.a.createContext(null),ie=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var a,c=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?c?(a="exited",r.appearStatus="entering"):a="entered":a=t.unmountOnExit||t.mountOnEnter?"unmounted":"exited",r.state={status:a},r.nextCallback=null,r}Object(re.a)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&"unmounted"===t.status?{status:"exited"}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?"entering"!==n&&"entered"!==n&&(t="entering"):"entering"!==n&&"entered"!==n||(t="exiting")}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),"entering"===t?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&"exited"===this.state.status&&this.setState({status:"unmounted"})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,a=this.props.nodeRef?[r]:[V.a.findDOMNode(this),r],c=a[0],o=a[1],i=this.getTimeouts(),l=r?i.appear:i.enter;!e&&!n||ce?this.safeSetState({status:"entered"},(function(){t.props.onEntered(c)})):(this.props.onEnter(c,o),this.safeSetState({status:"entering"},(function(){t.props.onEntering(c,o),t.onTransitionEnd(l,(function(){t.safeSetState({status:"entered"},(function(){t.props.onEntered(c,o)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:V.a.findDOMNode(this);t&&!ce?(this.props.onExit(r),this.safeSetState({status:"exiting"},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:"exited"},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:"exited"},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:V.a.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],c=a[0],o=a[1];this.props.addEndListener(c,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if("unmounted"===e)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,Object(ne.default)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return o.a.createElement(oe.Provider,{value:null},"function"==typeof n?n(e,r):o.a.cloneElement(o.a.Children.only(n),r))},t}(o.a.Component);function le(){}ie.contextType=oe,ie.propTypes={},ie.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:le,onEntering:le,onEntered:le,onExit:le,onExiting:le,onExited:le},ie.UNMOUNTED="unmounted",ie.EXITED="exited",ie.ENTERING="entering",ie.ENTERED="entered",ie.EXITING="exiting";var se=ie,ue=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.remove(r):"string"==typeof n.className?n.className=ae(n.className,r):n.setAttribute("class",ae(n.className&&n.className.baseVal||"",r)));var n,r}))},de=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var r=t.resolveArguments(e,n),a=r[0],c=r[1];t.removeClasses(a,"exit"),t.addClass(a,c?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.resolveArguments(e,n),a=r[0],c=r[1]?"appear":"enter";t.addClass(a,c,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.resolveArguments(e,n),a=r[0],c=r[1]?"appear":"enter";t.removeClasses(a,c),t.addClass(a,c,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,r="string"==typeof n,a=r?""+(r&&n?n+"-":"")+e:n[e];return{baseClassName:a,activeClassName:r?a+"-active":n[e+"Active"],doneClassName:r?a+"-done":n[e+"Done"]}},t}Object(re.a)(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var r=this.getClassNames(t)[n+"ClassName"],a=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&a&&(r+=" "+a),"active"===n&&e&&e.scrollTop,r&&(this.appliedClasses[t][n]=r,function(e,t){e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"==typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)));var n,r}))}(e,r))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],r=n.base,a=n.active,c=n.done;this.appliedClasses[t]={},r&&ue(e,r),a&&ue(e,a),c&&ue(e,c)},n.render=function(){var e=this.props,t=(e.classNames,Object(ne.default)(e,["classNames"]));return o.a.createElement(se,Object(te.default)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(o.a.Component);de.defaultProps={classNames:""},de.propTypes={};var fe=de,pe=n(69);function he(e,t){var n=Object.create(null);return e&&c.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&Object(c.isValidElement)(e)?t(e):e}(e)})),n}function be(e,t,n){return null!=n[t]?n[t]:e.props[t]}function me(e,t,n){var r=he(e.children),a=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,a=Object.create(null),c=[];for(var o in e)o in t?c.length&&(a[o]=c,c=[]):c.push(o);var i={};for(var l in t){if(a[l])for(r=0;r<a[l].length;r++){var s=a[l][r];i[a[l][r]]=n(s)}i[l]=n(l)}for(r=0;r<c.length;r++)i[c[r]]=n(c[r]);return i}(t,r);return Object.keys(a).forEach((function(o){var i=a[o];if(Object(c.isValidElement)(i)){var l=o in t,s=o in r,u=t[o],d=Object(c.isValidElement)(u)&&!u.props.in;!s||l&&!d?s||!l||d?s&&l&&Object(c.isValidElement)(u)&&(a[o]=Object(c.cloneElement)(i,{onExited:n.bind(null,i),in:u.props.in,exit:be(i,"exit",e),enter:be(i,"enter",e)})):a[o]=Object(c.cloneElement)(i,{in:!1}):a[o]=Object(c.cloneElement)(i,{onExited:n.bind(null,i),in:!0,exit:be(i,"exit",e),enter:be(i,"enter",e)})}})),a}var ve=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},ge=function(e){function t(t,n){var r,a=(r=e.call(this,t,n)||this).handleExited.bind(Object(pe.a)(r));return r.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},r}Object(re.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,a=t.children,o=t.handleExited;return{children:t.firstRender?(n=e,r=o,he(n.children,(function(e){return Object(c.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:be(e,"appear",n),enter:be(e,"enter",n),exit:be(e,"exit",n)})}))):me(e,a,o),firstRender:!1}},n.handleExited=function(e,t){var n=he(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=Object(te.default)({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=Object(ne.default)(e,["component","childFactory"]),a=this.state.contextValue,c=ve(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?o.a.createElement(oe.Provider,{value:a},c):o.a.createElement(oe.Provider,{value:a},o.a.createElement(t,r,c))},t}(o.a.Component);ge.propTypes={},ge.defaultProps={component:"div",childFactory:function(e){return e}};var ye=ge;function Oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=L()(e);if(t){var a=L()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return I()(this,n)}}var je=function(e){E()(n,e);var t=Oe(n);function n(e){var r;return S()(this,n),r=t.call(this,e),"undefined"!=typeof document&&(r.element=document.createElement("div")),r}return N()(n,[{key:"componentDidMount",value:function(){document.body.appendChild(this.element)}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.element),delete this.element}},{key:"render",value:function(){if(this.element){var e=this.props,t=e.onRef,n=k()(e,["onRef"]);return Object(B.createPortal)(Object(A.g)("div",j()({ref:t},n)),this.element)}return null}}]),n}(c.Component);function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=L()(e);if(t){var a=L()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return I()(this,n)}}var ke=function(e,t){e.addEventListener("transitionend",t,!1),e.addEventListener("transitioncancel",t,!1)},we=function(e){E()(n,e);var t=Ce(n);function n(){var e;S()(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={shouldMountPortal:!1,hasChildren:!1},e.handleExited=function(){e.setState((function(e){e.hasChildren}))},e}return N()(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.portalClassName,r=t.transitionName,a=t.onAfterEnter,o=t.timeout,i=t.children,l=this.state,s=l.shouldMountPortal,u=l.hasChildren,d={appear:"".concat(r,"-enter"),appearActive:"".concat(r,"-enter-active"),enter:"".concat(r,"-enter"),enterActive:"".concat(r,"-enter-active"),enterDone:"".concat(r,"-enter-done"),exit:"".concat(r,"-leave"),exitActive:"".concat(r,"-leave-active"),exitDone:"".concat(r,"-leave-done")};return s&&Object(A.g)(je,{className:n},Object(A.g)(ye,null,u&&c.Children.map(i,(function(t,n){return t&&Object(A.g)(fe,{key:n,timeout:o,classNames:d,appear:!0,onExited:e.handleExited,onEntering:a,addEndListener:ke},t)}))))}}]),n}(c.Component);we.getDerivedStateFromProps=function(e,t){var n=c.Children.toArray(e.children).some(Boolean),r=t.hasChildren;return!r&&n?{shouldMountPortal:!0,hasChildren:n}:r&&!n?{hasChildren:n}:null};var Se=we,xe=function(e){var t=e.children,n=e.className,r=e.direction,a=k()(e,["children","className","direction"]);return Object(A.g)("div",j()({className:g()("ModalButtonGroup",n,"ModalButtonGroup--".concat(r))},a),t)};xe.defaultProps={direction:"vertical"},xe.propTypes={children:D.a.node,direction:D.a.oneOf(["vertical","horizontal"])};function Ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=L()(e);if(t){var a=L()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return I()(this,n)}}var Re,Ee=[],Te=function(e){E()(n,e);var t=Ne(n);function n(){var e;S()(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={transparent:!1},e.handleKeydown=function(t){var n=e.props,r=n.hotKeyClosable,a=n.onClose;t.keyCode===q&&r&&a&&a(t)},e.handleBackdropClick=function(t){var n=e.props,r=n.maskClosable,a=n.onClose;r&&a&&a(t)},e.handleButtonClick=function(t){var n=e.props.onClose;n&&n(t)},e}return N()(n,[{key:"componentDidMount",value:function(){this.props.children&&this.handleShow()}},{key:"componentDidUpdate",value:function(e){var t=e.children,n=this.props.children;!t&&n?this.handleShow():t&&!n&&this.handleHide()}},{key:"componentWillUnmount",value:function(){this.props.children&&this.handleHide()}},{key:"handleShow",value:function(){var e=Ee[Ee.length-1];e&&e.setState({transparent:!0}),Ee.push(this),Ee.length>0&&(clearTimeout(Re),H.hide())}},{key:"handleHide",value:function(){Ee.pop();var e=Ee[Ee.length-1];e&&e.setState({transparent:!1}),Ee.length<=0&&(Re=setTimeout((function(){H.show()}),300))}},{key:"render",value:function(){var e=this.props,t=e.size,n=e.spread,r=e.title,a=e.subtitle,c=e.footer,o=e.closeButton,i=void 0===o?Object(A.g)("div",{className:"ModalWindow-closeButton",onClick:this.handleButtonClick},Object(A.g)(F.a,{className:"ModalWindow-closeIcon"})):o,l=e.buttonGroupOnly,s=e.className,u=e.children,d=e.onScroll,f=e.contentClassName,p=void 0===f?"":f,h=e.backDropClassName,b=void 0===h?"":h,m=this.state.transparent;return Object(A.g)(Se,{transitionName:"ModalWindow",timeout:300},u&&Object(A.g)(ee,{onKeyDown:this.handleKeydown},Object(A.g)("div",{className:g()("ModalWindow-wrapper",{"ModalWindow-wrapper--transparent":m})},Object(A.g)("div",{className:g()("ModalWindow-backdrop",b),onClick:this.handleBackdropClick}),Object(A.g)("div",{className:g()("ModalWindow","ModalWindow--".concat(t),s),tabIndex:0},Object(A.g)("div",{className:"ModalWindow-inner",onScroll:d},r&&Object(A.g)("h3",{className:g()("ModalWindow-title",{"ModalWindow-title--simple":!a&&l})},r),a&&Object(A.g)("div",{className:"ModalWindow-subtitle"},a),Object(A.g)("div",{className:g()("ModalWindow-content",{"ModalWindow-content--spread":n||"fullPage"===t&&!r&&!a},p)},u),c&&Object(A.g)("div",{className:"ModalWindow-footer"},c)),i))))}}]),n}(c.Component);Te.propTypes={size:D.a.oneOf(["default","large","fullPage","small"]),spread:D.a.bool,title:D.a.node,subtitle:D.a.node,footer:D.a.node,closeButton:D.a.node,buttonGroupOnly:D.a.bool,hotKeyClosable:D.a.bool,maskClosable:D.a.bool,onClose:D.a.func,onScroll:D.a.func,contentClassName:D.a.string},Te.defaultProps={size:"default",spread:!1,buttonGroupOnly:!1,hotKeyClosable:!0,maskClosable:!0},Te.open=function(e){var t=document.createElement("div");document.body.appendChild(t);var n=!1,r=function(){n||(n=!0,a())};"function"==typeof e&&(e=e(r));var a=function(){Object(B.render)(Object(c.cloneElement)(e,{children:null}),t),setTimeout((function(){Object(B.unmountComponentAtNode)(t),t.parentNode.removeChild(t)}),300)};Object(B.render)(e.props.onClose?e:Object(c.cloneElement)(e,{onClose:r}),t)};var Ie=Te;var Pe=function(e){var t=e.className,n=e.url,r=e.source,a=k()(e,["className","url","source"]),c="苏宁"===r?"拼购":"",o="目前".concat(r,"暂不支持在电脑端购买").concat(c,"商品");return Object(A.g)(Ie,j()({className:g()("QRCodeModal",t)},a),Object(A.g)("div",{className:"QRCodeModal-title"},"用知乎 App 扫码查看"),Object(A.g)("div",{className:"QRCodeModal-tip"},o),Object(A.g)("div",{className:"QRCodeModal-qrcode"},Object(A.g)(M,null),Object(A.g)("img",{src:"https://www.zhihu.com/qrcode?url=".concat(encodeURIComponent(n))})))},Le=n(172),Ae=n(165);var _e=function(e){return Object(A.g)("svg",j()({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 12",fill:"currentColor"},e),Object(A.g)("path",{d:"M5,0 C7.7615,0 10,2.074 10,4.632 C10,8 8.681,9.6805 6.043,11.657 C5.463,12.0915 4.6455,12.1135 4.041,11.722 L3.952,11.66 L3.766,11.5195 C1.2555,9.5815 0,8 0,4.632 C0,2.074 2.2385,0 5,0 Z M5,1.5 C3.0425,1.5 1.5,2.929 1.5,4.632 C1.5,7.1075 2.159,8.3245 4.368,10.0855 L4.672,10.3235 L4.8565,10.463 C4.926,10.508 5.033,10.5115 5.109,10.4765 L5.144,10.4565 C7.708,8.535 8.5,7.2275 8.5,4.631 C8.5,2.9295 6.9575,1.5 5,1.5 Z M5,3 C5.82842712,3 6.5,3.67157288 6.5,4.5 C6.5,5.32842712 5.82842712,6 5,6 C4.17157288,6 3.5,5.32842712 3.5,4.5 C3.5,3.67157288 4.17157288,3 5,3 Z"}))};var Me={hotel:"酒店",ticket:"门票"},ze=Object.keys(Me);var De={name:"1rguia",styles:"display:flex;padding:14px;"},Be={name:"1c8iba8",styles:"flex:1;margin-left:12px;overflow:hidden;"},Ve={name:"gg4vpm",styles:"display:flex;justify-content:space-between;"},Fe={name:"zjqrkl",styles:"font-size:12px;line-height:1;vertical-align:1px;"},He={name:"1q27zj9",styles:"flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"};function Ue(e){var t,n,r,a=e.onRef,c=e.data,o=e.titleRightArea,i=c.imgUrl,l=c.title,s=c.priceText,u=c.areaName,d=Object(Ae.e)();return Object(A.g)("div",{css:De,ref:a},Object(A.g)("img",{src:i,css:Object(Le.a)([{width:75,height:100,borderRadius:6,flexShrink:0,objectFit:"cover"},d],"")}),Object(A.g)("div",{css:Be},Object(A.g)("div",{css:Ve},Object(A.g)("div",{css:function(e){return Object.assign({color:e.colors.GBK02A,fontSize:15,fontWeight:e.fontWeights.bold,lineHeight:1.2,height:36},Object(Ae.d)(2))}},l),o),Object(A.g)("div",{css:function(e){return{color:e.colors.GBK05A,fontSize:12,marginTop:4,fontWeight:e.fontWeights.bold,height:16,lineHeight:"16px"}}},(n=(t=c).source,r=t.productTypeName,[n,Me[r]].filter(Boolean).join(" · "))),Object(A.g)("div",{css:function(e){return{display:"flex",alignItems:"center",color:e.colors.GRD08A,marginTop:8,height:18,lineHeight:"18px"}}},Object(A.g)("div",{css:function(e){return{fontSize:15,fontWeight:e.fontWeights.bold}}},s," ",Object(A.g)("span",{css:Fe},"起")),Object(A.g)("div",{role:"button",css:function(e){return{marginLeft:"auto",cursor:"pointer",fontSize:13,fontWeight:e.fontWeights.bold}}},"去购买 ",Object(A.g)(f.a,{size:16,center:!0}))),Object(A.g)("div",{css:function(e){return{display:"flex",alignItems:"center",marginTop:2,height:18,lineHeight:1,fontSize:12,color:e.colors.GBK06A,fontWeight:e.fontWeights.bold,overflow:"hidden",transform:"scale(0.92)",transformOrigin:"left"}}},Object(A.g)(_e,{width:"12",height:"12",css:Object(Le.a)({flexShrink:0,marginTop:-1,marginRight:2},"")}),Object(A.g)("span",{css:He},u))))}var qe=Object(c.forwardRef)((function(e,t){return Object(A.g)(Ue,j()({onRef:t},e))})),We={CONTENT:0,MENTION_IN_CONTENT:1,SHOWCASE:2,LIVING_THEATER:3},Ke={EDITOR:"editor",CONTENT:"content"},Ge=1;function Qe(e){var t=e.source,n=e.producer,r=e.price,a=e.zhihuVipText,c=e.isInvalidCard;if(null===r)return null;var o="¥ ".concat(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.trimZero,r=void 0!==n&&n,a=String(e).padStart(2,"0").slice(-2);return r&&"00"===a?"".concat(Math.floor(e/100)):"".concat(Math.floor(e/100),".").concat(a)}(r)).concat("网络文学"===n?"/千字":"");return a?Object(A.g)("div",{className:"MCNLinkCard-VIPPrice"},Object(A.g)("span",{className:"MCNLinkCard-VIPPriceHint"},a),Object(A.g)("span",{className:"MCNLinkCard-originalPrice"},o)):Object(A.g)("div",{className:g()("MCNLinkCard-price",{"MCNLinkCard-price--invalid":c})},"拼多多"===t&&Object(A.g)("span",{className:"MCNLinkCard-pricePrefix"},"拼团价"),Object(A.g)("span",null,o))}function Ze(e,t){var n=Object(c.useState)(null),r=a()(n,2),s=r[0],b=r[1],v=Object(c.useState)(!1),O=a()(v,2),j=O[0],C=O[1],k=e.component,w=void 0===k?"a":k,S=e.id,x=e.scenes,N=void 0===x?We.CONTENT:x,R=e.className,E=e.onClick,T=e.onMouseDown,I=e.refetchKey,P=e.onData,L=void 0===P?m.a:P,_=e.processResponse,M=e.getUrl,z=e.buttonText,D=e.fetcher,B=void 0===D?y:D,V=e.fetcherOptions,F=e.cardShowHandler,H=e.disableZa,U=e.titleRightArea,q=e.position,W=void 0===q?Ke.CONTENT:q,K=e.zaBlock,G=Object(c.useRef)(null);if(Object(c.useEffect)((function(){if(null!==I){var e=M?M(S):"https://www.zhihu.com/api/v4/mcn/linkcard/".concat(S,"?scenes=").concat(N);B(e,V).then((function(e){var t=_?_(e):Object(i.camelizeKeys)(e.data);b(t),L(t)})).catch((function(){}))}}),[S,N,b,L,I,M,_,B,V]),Object(c.useEffect)((function(){G.current&&!H&&Object(l.onViewedOnce)(G.current.parentNode,(function(){h.a.trackCardShow(G.current.parentNode,{id:6108},{button:{text:G.current.parentNode.dataset.zaExtraButtonText}})}))}),[F,s,H]),!s)return Object(A.g)(w,{ref:t,className:g()("MCNLinkCard","MCNLinkCard-placeholder",R),"data-draft-node":"block","data-draft-type":"mcn-link-card"});var Q,Z=s.url,J=s.title,Y=s.imgUrl,X=s.price,$=s.source,ee=s.productTypeName,te=s.goodsType,ne=s.producer,re=s.authorText,ae=s.zhihuButtonText,ce=s.zhihuVipText,oe=s.appSchemaAndroid,ie=s.appSchemaIos,le=s.subtitle,se=s.status,ue=s.banClick,de=s.description,fe=null,pe="square",he=z||"去购买",be=!0,me=!1,ve=!1;(W===Ke.EDITOR&&se===Ge||"red_packet"===ee&&ue)&&(me=!0),"知乎"===$&&(fe=ne,pe="rectangle",he=ae||"去查看",Q=re);var ge=$;Q&&(ge=Q),"有赞"===$&&"store"===ee&&(be=!1,he="去浏览"),"red_packet"===ee&&(he="去领取",be=!1,ve=!0);var ye=["天猫","京东自营"].includes(ge)?"1":void 0,Oe=ze.includes(ee)?Object(A.g)(qe,{data:s,ref:G,titleRightArea:U}):Object(A.g)("div",{className:"MCNLinkCard-card",ref:G},Object(A.g)("div",{className:"MCNLinkCard-cardContainer"},Object(A.g)("div",{className:g()("MCNLinkCard-imageContainer","MCNLinkCard-imageContainer--".concat(pe),{"MCNLinkCard-imageContainer--invalid":me,"MCNLinkCard-redPacketImageContainer":ve})},Object(A.g)("img",{className:"MCNLinkCard-image",src:Y,alt:""}),fe&&Object(A.g)("div",{className:"MCNLinkCard-tagInImage"},fe)),Object(A.g)("div",{className:"MCNLinkCard-info"},Object(A.g)("div",{className:"MCNLinkCard-titleContainer"},Object(A.g)("div",{className:g()("MCNLinkCard-title",{"MCNLinkCard-title--invalid":me,"MCNLinkCard-redPacketTitle":ve})},J),U),ve&&de&&Object(A.g)("div",{className:"MCNLinkCard-desc"},de),!ve&&Object(A.g)("div",{className:g()("MCNLinkCard-source",{"MCNLinkCard-source--invalid":me})},le||ge),Object(A.g)("div",{className:"MCNLinkCard-tool"},Object(A.g)("div",{className:"MCNLinkCard-toolLeft"},ve&&Object(A.g)("div",{className:"MCNLinkCard-redEvenlope-time"},le),be&&Object(A.g)(Qe,{source:$,producer:ne,price:X,zhihuVipText:ce,isInvalidCard:me})),me?Object(A.g)("div",{className:"MCNLinkCard-invalidButton",role:"button"},Object(A.g)(d.a,{size:17,center:!0}),Object(A.g)("span",null,"已失效")):Object(A.g)("div",{className:"MCNLinkCard-button",role:"button"},he,Object(A.g)(f.a,{size:17,center:!0}))))));return Object(A.g)(o.a.Fragment,null,j&&Object(A.g)(Pe,{url:Z,source:$,onClose:function(){return C(!1)}}),Object(A.g)(p.c,{shouldTrackShow:!0,shouldTrackClick:!0,extra:{link:{url:Z}},zaAction:"OpenUrl",zaBlock:K||"ZTextMCNLinkCard",zaType:"Button",zaEventType:"Click",as:w,ref:t,className:g()("MCNLinkCard",R),"data-draft-node":"block","data-draft-type":"mcn-link-card","data-mcn-id":s.id,"data-mcn-skuid":s.skuid,"data-mcn-source":s.source,"data-mcn-goods-type":s.goodsType,"data-mcn-app-schema-android":oe,"data-mcn-app-schema-ios":ie,"data-za-detail-view-name":s.id,"data-za-extra-button-text":ye,"data-za-not-track-link":!0,href:Z,target:"_blank",rel:"noopener noreferrer",onClick:function(e){if(!H&&h.a.trackEvent(e.currentTarget,{id:6208,action:"Click"},{button:{text:e.currentTarget.dataset.zaExtraButtonText}}),ve&&me)e.preventDefault();else if(E&&E(e),!e.defaultPrevented){var t=u()(navigator.userAgent),n=t.Tablet,r=t.Mobile;"拼多多"!==$||n||r||(e.preventDefault(),C(!0)),"苏宁"!==$||"苏宁拼购"!==te||n||r||(e.preventDefault(),C(!0))}},onMouseDown:T},Oe))}Ze.prototype={component:D.a.element,id:D.a.number,className:D.a.string,onClick:D.a.func};t.c=o.a.forwardRef(Ze)},880:function(e,t,n){"use strict";var r=n(14),a=n(15),c=n(69),o=n(16),i=n(17),l=n(8),s=n(1),u=n(2),d=n(19),f=n(25),p=n(364),h=n(825),b=n(972),m=n(28),v=n(969),g=n(26),y=n(201),O=n(355),j=n(305),C=n.n(j),k=function(e,t){return e+(t?Date.now()-t:0)},w=function(e,t){return Math.abs(e-t)<.01},S={auto:"Auto",ld:"LD",sd:"SD",hd:"HD"},x={auto:"自动",ld:"低清",sd:"标清",hd:"超清"},N=[1,2,3,5,8,13];function R(e){var t,n="sd",r=0,a=null,c=0,o=null,i=!1,l=0,s=0;function u(t,i){e(t,Object.assign({play_event_identifier:a,duration:1e3*r,elapsed:k(c,o),video_quality:S[n]},i))}function d(){(++s<15?N.includes(s):s%15==0)&&u({action:"Playing"})}function f(){clearInterval(t)}return{handlePlayEvent:function(e){var n=e.currentTime,i=e.duration;r=i,w(n,0)&&(a=C()(),c=0),o=Date.now(),w(n,0)?u({action:"Play"}):u({action:"ResumePlay"}),s=0,f(),t=setInterval(d,1e3)},handlePauseEvent:function(e){var t=e.currentTime,n=e.duration;o&&(c+=Date.now()-o,o=null),w(t,n)?u({action:"EndPlay"}):u({action:"Pause"}),f()},handleQualityChangeEvent:function(e){var t=e.quality;u({action:"Switch",name:x[t]}),n=t},handleFragmentLoading:function(){i||(l=Date.now())},handleFragmentLoaded:function(){i||(i=!0,u({action:"Load"},{video_load_time:Date.now()-l}))},clearTick:f}}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var T=function(e){Object(o.a)(n,e);var t=E(n);function n(e){var a;Object(r.a)(this,n),(a=t.call(this,e)).pauseVideoInIframe=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.messageHelper.dispatchMessage(e.contentWindow,v.a.PLAYER.PAUSE,{dontApplyOnFullScreen:t})},a.pauseAllOtherVideos=function(){Array.from(document.querySelectorAll("iframe")).filter((function(e){return e!==a.iframe})).forEach((function(e){return a.pauseVideoInIframe(e)}))},a.handleMessage=function(e,t){var n=a.videoTracker,r=n.handlePlayEvent,c=n.handlePauseEvent,o=n.handleQualityChangeEvent,i=n.handleFragmentLoading,l=n.handleFragmentLoaded;switch(e){case v.b.DOM.PLAY:a.pauseAllOtherVideos(),r(t);break;case v.b.DOM.PAUSE:c(t);break;case v.b.PLAYER.QUALITY_CHANGE:o(t);break;case"fragment-loading":i(t);break;case"fragment-loaded":l(t)}},a.handleObserve=function(e){e[0].intersectionRatio<=0&&a.iframe&&a.pauseVideoInIframe(a.iframe,!0)},a.handlePlay=function(){a.props.trackEvent(Object(c.a)(a),{id:5500,action:"Play",element:"Video"})},a.handlePlayFailed=function(){(0,a.props.showNotification)("视频加载失败，请刷新页面重试","red")};var o=e.data;return a.messageHelper=Object(v.c)(o.id,"*",!0),a.videoTracker=R((function(e,t){m.a.trackEvent(Object(c.a)(a),e,{play:t})})),a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.data,n=t.isLens,r=t.id,a=t.playerUrl,c=t.flvPlayerUrl,o=e.loadVideo;n||!r||a||c||o(r);var i=this.messageHelper.subscribeMessage;this.messageSubscription=i(this.handleMessage)}},{key:"componentWillUnmount",value:function(){this.messageSubscription.unsubscribe(),this.videoTracker.clearTick()}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,r=t.data.error,a=t.onBeforePlay;return Object(s.b)("div",{className:"RichText-video",children:r?Object(s.b)(b.a,Object.assign({},n)):Object(s.b)(p.a,{onObserve:this.handleObserve,children:Object(s.b)(h.b,Object.assign({},n,{onIframeRef:function(t){return e.iframe=t},onPlay:this.handlePlay,onPlayFailed:this.handlePlayFailed,onBeforePlay:a}))})})}}]),n}(u.Component);t.a=Object(d.compose)(Object(f.connect)((function(e,t){var n=t.data,r=n.isLens,a=n.id;return r?{data:Object.assign({},t.data,{source:"lens",playerUrl:"https://www.zhihu.com/video/".concat(a)})}:{data:e.video.data[a]||t.data}}),{showNotification:g.h,loadVideo:y.d}),Object(O.b)((function(e){var t=e.data,n=t.isLens,r=t.id,a=t.isPlayable;return{module:"VideoItem",content:{type:"Video",sub_type:n?"SelfHosted":"Embedded",video_id:r,is_playable:Boolean(a)},trackCardShow:!0,view:{id:174}}})))(T)},881:function(e,t,n){"use strict";var r=n(78),a=n.n(r),c=n(20),o=n.n(c),i=n(21),l=n.n(i),s=n(90),u=n.n(s),d=n(22),f=n.n(d),p=n(23),h=n.n(p),b=n(13),m=n.n(b),v=n(3),g=n.n(v),y=n(2),O=n.n(y),j=n(43),C=n(73),k=n.n(C),w=n(382),S=n.n(w),x=n(28),N=n(1040),R=n.n(N);var E=function(e,t){return function(n){var r=t(n);return R()(r,n),r.displayName="".concat(e,"(").concat(function(e){return e.displayName||e.name||"Component"}(n),")"),r}};function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var a=m()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=k()((function(){var e=new IntersectionObserver((function(t){t.forEach((function(t){if(0!==t.intersectionRatio){var n=t.target;e.unobserve(n),n.handleChange&&(n.handleChange(),n.handleChange=null)}}))}),{threshold:[.1]});return e})),L=function(e,t,n,r){return E("track",(function(a){return function(c){f()(s,c);var i=T(s);function s(){var e;o()(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=i.call.apply(i,[this].concat(n)),I(u()(e),"values_",{}),I(u()(e),"trackCardShow",(function(){var t=e.values,n=t.viewInfo,r=t.extraInfo;x.a.trackCardShow(e.element,n,r)})),e}return l()(s,[{key:"parseValues",value:function(){var a,c=this,o=function(e){return"function"==typeof e?e(c.props):e};this.values={viewLocation:e,moduleInfo:(a=o(t),a?a.type||a.sub_type?{card:{card_type:"Content",content:a}}:a:null),viewInfo:o(n),extraInfo:o(r)}}},{key:"setModule",value:function(){var e=this.values,t=e.viewLocation,n=e.moduleInfo;x.a.setModule(this.element,t,n)}},{key:"componentDidMount",value:function(){this.element=Object(j.findDOMNode)(this),this.parseValues(),this.values.viewInfo&&(this.element.handleChange=this.trackCardShow,P().observe(this.element))}},{key:"componentDidUpdate",value:function(){this.parseValues()}},{key:"componentWillUnmount",value:function(){this.values.viewInfo&&(P().unobserve(this.element),this.element.handleChange=null),this.element=null}},{key:"render",value:function(){return O.a.createElement(a,this.props)}},{key:"values",get:function(){return this.values_},set:function(e){S()(e,this.values_)||(this.values_=e,this.setModule())}}]),s}(y.Component)}))},A=function(e){f()(n,e);var t=T(n);function n(){var e;o()(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return e=t.call.apply(t,[this].concat(c)),I(u()(e),"Component",L.apply(void 0,a()(e.props.options))((function(){return e.props.children}))),e}return l()(n,[{key:"render",value:function(){return"undefined"!=typeof window&&window.IntersectionObserver?O.a.createElement(this.Component,null):this.props.children}}]),n}(y.Component);I(A,"propTypes",{children:g.a.element.isRequired,options:g.a.array.isRequired});t.a=A},882:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r={unfriendly:"其他不友善行为",untruth:"不实信息",provoke:"引战争议等非真实问题",subjective:"包含主观判断",abuse:"辱骂、人身攻击等不友善行为",spam:"垃圾广告信息",illegality:"违法违规",politics:"政治敏感",repost:"不规范转载",privacy:"泄露了我的隐私",enterprise:"企业侵权",oneself:"个人侵权",copy:"抄袭了我的内容",defamation:"诽谤我",temptation:"诱导赞同、关注等行为",intention:"骚扰我",mention:"提到我，但是我不想被讨论",personal:"寻人、征友、作业等个人任务",ambiguity:"不构成提问",worthless:"征友、裸露照片征集等非真实类问题",rumour:"缺乏可信来源",suicide:"有人意图自杀或自残",medicine:"针对具体病情的求医问药",superstition:"涉及封建迷信活动",harassment:"骚扰",imitation:"冒充我或他人",profile:"个人信息不符合规范",direction:"不符合专栏写作方向",tipjar:"滥用专栏赞赏功能",edit:"发生编辑战",porn:"色情低俗",minor:"未成年人",uncivilized_behavior:"驾驶/吸烟/纹身",atmosphere:"破坏弹幕区友好氛围",irrelevant:"弹幕与视频无关"};var a={success:"你的举报我们已经收到，处理结果会通过站务通知进行告知。",duplicate:"你已经举报过啦。管理员正在处理中，请耐心等待~",contentIllegal:"请提交正确的举报说明",contentTooLong:"举报说明不能超过 150 字",failure:"举报失败"}},888:function(e,t){function n(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}e.exports=n,e.exports.default=n},890:function(e,t,n){"use strict";t.a=function(e,t){return!!e&&(!!(t=t||e.type)&&("answer"===t&&((null===(n=e.settings)||void 0===n||null===(r=n.tableOfContents)||void 0===r?void 0:r.enabled)||(null===(a=e.settings)||void 0===a||null===(c=a.tableOfContent)||void 0===c?void 0:c.enabled))));var n,r,a,c}},891:function(e,t,n){"use strict";var r=n(31),a=n(41),c=n(1),o=n(2),i=n.n(o),l=n(977),s=n(59),u=n.n(s),d=n(33),f=n.n(d),p=n(45),h=n.n(p),b=n(43),m=n(576),v=n.n(m),g=n(28),y=n(304),O=n.n(y),j=n(61),C=n(44),k=n.n(C),w=n(813),S=n(42),x=n.n(S),N=n(897),R=n(230),E=function(e){return fetch("https://api.zhihu.com/gif2mp4/".concat(e),{credentials:"include",headers:{"X-Requested-With":"Fetch"}}).then((function(e){return e.json()}))},T=n(901),I=n(20),P=n.n(I),L=n(21),A=n.n(L),_=n(22),M=n.n(_),z=n(23),D=n.n(z),B=n(13),V=n.n(B),F=n(196),H=n(10),U=n.n(H),q=n(39),W=n.n(q),K=n(941),G=n.n(K),Q=n(86),Z=n.n(Q),J=n(5);function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=V()(e);if(t){var a=V()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return D()(this,n)}}var X,$=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z.a;return function(n){return G()(function(r){M()(c,r);var a=Y(c);function c(){var e;P()(this,c);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).key=t(),e}return A()(c,[{key:"render",value:function(){return Object(J.g)(n,f()({},this.props,W()({},e,this.key)))}}]),c}(i.a.Component),n)}},ee=n(1017),te=n(205),ne=n.n(te),re=function(e,t){return function(n){var r,a=(r=[],{value:{},listen:function(e){r.push(e)},unlisten:function(e){r=r.filter((function(t){return t!==e}))},emit:function(e){this.value=e,r.forEach((function(t){return t(e)}))}}),c=Object(ee.createSubscription)({getCurrentValue:function(e){return e.value},subscribe:function(e,t){return e.listen(t),function(){return e.unlisten(t)}}}),o=function(e,t){return e?ne()(e,(function(e){return function(){return t(e.apply(void 0,arguments))}})):{dispatch:t}}(t,(function(e){return a.emit(e(a.value))})),i=Object.assign((function(t){return Object(J.g)(c,{source:a},(function(r){return Object(J.g)(n,f()({},t,e({value:r,source:a},t),o))}))}),{source:a});return G()(i,n)}};!function(e){e[e.Initial=0]="Initial",e[e.Loading=1]="Loading",e[e.Ok=2]="Ok",e[e.Failed=3]="Failed"}(X||(X={}));var ae=function(e){return Object(J.g)("svg",f()({width:60,height:60,viewBox:"0 0 60 60"},e),Object(J.g)("g",{fill:"none",fillRule:"evenodd"},Object(J.g)("ellipse",{fill:"#000",opacity:.45,cx:30,cy:30,rx:30,ry:30}),Object(J.g)("ellipse",{stroke:"#FFF",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"4,1,4",cx:30,cy:30,rx:26,ry:26}),Object(J.g)("svg",f()({x:16,y:18.5},e),Object(J.g)("path",{d:"M12.842 12.981V11.4H7.64v1.653h3.27v.272c-.018 1.881-1.442 3.147-3.516 3.147-2.382 0-3.876-1.846-3.876-4.834 0-2.936 1.485-4.79 3.832-4.79 1.732 0 2.936.835 3.428 2.364h1.977c-.43-2.566-2.522-4.201-5.405-4.201-3.55 0-5.845 2.601-5.845 6.644 0 4.096 2.268 6.654 5.863 6.654 3.322 0 5.475-2.083 5.475-5.327zM17.518 18V5.317H15.55V18h1.97zm5.142 0v-5.256h5.449v-1.74h-5.45V7.11h5.95V5.317h-7.918V18h1.969z",fill:"#fff"}))))},ce=function(e){return Object(J.g)("svg",f()({width:"60px",height:"60px",viewBox:"0 0 60 60",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},e),Object(J.g)("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},Object(J.g)("ellipse",{fill:"#000000",opacity:"0.45",cx:"30",cy:"30",rx:"30",ry:"30"}),Object(J.g)("ellipse",{stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.5",cx:"30",cy:"30",rx:"26",ry:"26"}),Object(J.g)("ellipse",{stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"4,1,4",cx:"30",cy:"30",rx:"26",ry:"26"},Object(J.g)("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 30 30",to:"90 30 30",dur:"0.3s"}),Object(J.g)("animate",{attributeName:"opacity",from:"1",to:"0",dur:"0.3",fill:"freeze"}))),Object(J.g)("svg",{x:"16",y:"18.5"},Object(J.g)("g",{fill:"#ffffff"},Object(J.g)("path",{x:"100",y:"100",d:"M12.8422852,12.9814453 L12.8422852,11.3994141 L7.63916016,11.3994141 L7.63916016,13.0517578 L10.9086914,13.0517578 L10.9086914,13.3242188 C10.8911133,15.2050781 9.46728516,16.4707031 7.39306641,16.4707031 C5.01123047,16.4707031 3.51708984,14.625 3.51708984,11.6367188 C3.51708984,8.70117188 5.00244141,6.84667969 7.34912109,6.84667969 C9.08056641,6.84667969 10.284668,7.68164062 10.7768555,9.2109375 L12.7543945,9.2109375 C12.3237305,6.64453125 10.2319336,5.00976562 7.34912109,5.00976562 C3.79833984,5.00976562 1.50439453,7.61132812 1.50439453,11.6542969 C1.50439453,15.75 3.77197266,18.3076172 7.36669922,18.3076172 C10.6889648,18.3076172 12.8422852,16.2246094 12.8422852,12.9814453 Z M17.5180664,18 L17.5180664,5.31738281 L15.5493164,5.31738281 L15.5493164,18 L17.5180664,18 Z M22.659668,18 L22.659668,12.7441406 L28.1088867,12.7441406 L28.1088867,11.0039062 L22.659668,11.0039062 L22.659668,7.11035156 L28.6098633,7.11035156 L28.6098633,5.31738281 L20.690918,5.31738281 L20.690918,18 L22.659668,18 Z"}))),Object(J.g)("path",{d:"M56,30 C56,15.6405965 44.3594035,4 30,4",stroke:"#FFFFFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0",fill:"none"},Object(J.g)("animate",{attributeName:"opacity",from:"0",to:"1",dur:".6",fill:"freeze"}),Object(J.g)("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 30 30",to:"360 30 30",dur:"1.625s",repeatCount:"indefinite"})))},oe=function(e){return Object(J.g)("svg",f()({width:60,height:60,viewBox:"0 0 60 60"},e),Object(J.g)("g",{fill:"none",fillRule:"evenodd"},Object(J.g)("ellipse",{fill:"#282828",opacity:.45,cx:30,cy:30,rx:30,ry:30}),Object(J.g)("path",{d:"M41.552 18.93A15.954 15.954 0 0 0 30 14c-8.837 0-16 7.163-16 16s7.163 16 16 16c7.811 0 14.315-5.597 15.72-13",stroke:"#FFF",strokeWidth:2,strokeLinecap:"round"}),Object(J.g)("path",{d:"M45.108 16.236c.44-.33.797-.151.797.4v7.005c0 .55-.358.73-.797.4L40.7 20.736c-.44-.33-.439-.866 0-1.195l4.407-3.305z",fill:"#FFF"})))};function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=V()(e);if(t){var a=V()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return D()(this,n)}}var le=function(){return new Promise(requestAnimationFrame)},se=function(e){M()(n,e);var t=ie(n);function n(){var e;P()(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).videoEle=null,e.onPlay=function(){var t=e.props.onSuccess;t&&t()},e.onError=function(t){var n=e.props,r=n.onFailed,a=n.gifKey;r&&r(t.target.error),e.props.updateGif({gifKey:a,loadState:X.Failed})},e.handleClick=function(t){var n=e.props,r=n.gifKey,a=n.src,c=n.onLoadStart,o=n.onSuccess,i=n.onFailed,l=n.onClick,s=n.onPlayChange,u=n.loadState,d=n.isPlaying,f=n.videoUrl;if(l&&l(t),s&&s(d),f)return e.videoEle&&(d?e.videoEle.pause():(u===X.Failed&&(e.videoEle.src=e.videoEle.src),e.videoEle.play(),c&&c())),void e.props.updateGif({gifKey:r,isPlaying:!d});e.canPlay?e.props.updateGif({gifKey:r,isPlaying:!d}):u!==X.Loading&&(e.props.updateGif({gifKey:r,loadState:X.Loading}),c&&c(),Promise.all([Object(F.loadImage)(a),le().then(le)]).then((function(){o&&o(),e.props.updateGif({gifKey:r,isPlaying:!0,loadState:X.Ok})})).catch((function(t){i&&i(t),e.props.updateGif({gifKey:r,loadState:X.Failed})})))},e}return A()(n,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isPlaying,r=t.videoUrl;this.videoEle&&n&&r!==e.videoUrl&&this.videoEle.play(),this.videoEle&&!n&&(this.videoEle.currentTime=0,this.videoEle.controls=!1,this.videoEle.pause())}},{key:"componentWillUnmount",value:function(){this.props.removeGif({gifKey:this.props.gifKey})}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.poster,a=n.src,c=n.size,o=n.loadState,i=n.isPlaying,l=n.onRef,s=n.videoUrl,u=this.canPlay&&i,d=o===X.Loading,f=o===X.Failed;return d?e=Object(J.g)(ce,{className:"GifPlayer-icon"}):f?e=Object(J.g)(oe,{className:"GifPlayer-icon"}):i||(e=Object(J.g)(ae,{className:"GifPlayer-icon"})),e&&(this.lastIcon=e),Object(J.g)("div",{className:U()("GifPlayer",{isPlaying:i}),"data-size":c,onClick:this.handleClick,ref:l},s&&Object(J.g)("video",{ref:function(e){t.videoEle=e},className:"ztext-gif GifPlayer-gif2mp4",src:s,"data-thumbnail":r,poster:r,"data-size":c,controls:!1,preload:"metadata",loop:!0,muted:!0,onPlay:this.onPlay,onError:this.onError,playsInline:!0}),Object(J.g)("img",{className:U()("ztext-gif",{"GifPlayer-gif2mp4Image":s}),role:"presentation",src:u?a:r,"data-thumbnail":r,"data-size":c}),e||this.lastIcon)}},{key:"canPlay",get:function(){return this.props.loadState===X.Ok}}]),n}(i.a.Component);se.defaultProps={isPlaying:!1,loadState:X.Initial};var ue=$("gifKey")(re((function(e,t){return e.value[t.gifKey]}),{updateGif:function(e){return function(t){var n=e.gifKey,r=e.isPlaying,a=h()(e,["gifKey","isPlaying"]),c=Object.assign({},t);if(r)for(var o=0,i=Object.keys(c);o<i.length;o++){var l=i[o],s=c[l];l!==n&&s.isPlaying&&(c[l]=Object.assign({},s,{isPlaying:!1}))}return Object.assign({},c,W()({},n,Object.assign({},t[n],{isPlaying:r},a)))}},removeGif:function(e){return function(t){var n=Object.assign({},t);return delete n[e.gifKey],n}}})(se)),de=function(e,t){g.a.trackEvent(e,{action:"StatusReport",element:"Card"},{status:{result:t}})},fe=function(e,t){var n,r,a;null===(n=window)||void 0===n||null===(r=n.Raven)||void 0===r||null===(a=r.captureException)||void 0===a||a.call(r,e,{fingerprint:["gif2mp4"],extra:t})},pe=function(e){var t=e.src,n=e.useWebP,r=void 0===n?"auto":n,a=e.useMp4,c=void 0!==a&&a,i=e.onRef,l=e.onLoadStateChange,s=h()(e,["src","useWebP","useMp4","onRef","onLoadStateChange"]),d=Object(o.useState)(""),p=u()(d,2),b=p[0],y=p[1],C=Object(o.useState)(null),S=u()(C,2),I=S[0],P=S[1],L=Object(o.useState)(Date.now()),A=u()(L,2),_=A[0],M=A[1],z=Object(o.useState)(!1),D=u()(z,2),B=D[0],V=D[1],F=Object(o.useState)(null),H=u()(F,2),U=H[0],q=H[1],W=Object(T.a)("animation"),K=Object(o.useCallback)((function(){var e=(Object(m.imgPathParse)(t)||{}).hash;c&&Object(w.onViewedOnce)(I,(function(){E(e).then((function(e){var t,n,r=e.playlist,a=(null==r||null===(t=r.SD)||void 0===t?void 0:t.play_url)||(null==r||null===(n=r.LD)||void 0===n?void 0:n.play_url);a&&k.a.increment("Gif2Mp4Player.mp4.fetch.success.count"),y(a)})).catch(O.a)}))}),[I,t,c]);Object(o.useEffect)(K,[t,c,I]),Object(o.useEffect)((function(){I&&g.a.setModule(I,{module:"GifItem"})}),[I]),Object(N.a)(I,(function(){g.a.trackCardShow(I,{element:"Card"})})),Object(j.i)((function(){k.a.increment("Gif2Mp4Player.mp4.play.failure.count"),fe(new Error("Gif2Mp4 play timeout"),{src:t,videoUrl:b}),V(!1)}),B?2e3:null),Object(j.i)((function(){k.a.increment("Gif2Mp4Player.mp4.play.success.count"),k.a.timing("Gif2Mp4Player.mp4.first_frame_time",Date.now()-_-100),V(!1),q(null)}),U);var G=v()(t,{extension:("auto"===r?W:r)?"webp":"gif"});return Object(J.g)(ue,f()({videoUrl:b,src:G,onRef:Object(o.useCallback)(Object(R.a)(i,P),[]),onPlayChange:function(e){e||(M(Date.now()),b&&(k.a.increment("Gif2Mp4Player.mp4.click.count"),V(!0)),g.a.trackEvent(I,{action:"Click",element:"Image"}))},onLoadStart:function(){if(b){var e=x.a.parse(b).expiration;e&&Number(e)<Date.now()/1e3+900&&K()}M(Date.now()),l&&l("loadstart",G)},onSuccess:function(){de(I,"Success"),b?B&&q(100):k.a.timing("Gif2Mp4Player.gif.first_frame_time",Date.now()-_),l&&l("load",G)},onFailed:function(e){de(I,"Fail"),b&&(B&&(k.a.increment("Gif2Mp4Player.mp4.play.failure.count"),V(!1),q(null)),fe(e,{videoUrl:b,src:t})),l&&l("error",G)}},s))},he=function(e){var t=e.dataset,n=t.thumbnail,r={src:n,poster:n,size:t.size},a=document.createElement("div");return a.className="RichText-gifPlaceholder",e.parentNode.replaceChild(a,e),{data:r,target:a}},be=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.Component,r=void 0===n?pe:n,a=Object(o.useState)(null),c=u()(a,2),i=c[0],l=c[1];return Object(o.useEffect)((function(){if(e){var t=Array.from(e.querySelectorAll("img.origin_image[data-thumbnail],img.content_image[data-thumbnail]"));if(t.length){var n=t.map((function(e){return he(e)})).map((function(e,t){var n=e.data,a=e.target;return Object(b.createPortal)(Object(J.g)(r,f()({key:t},n)),a)}));l(n)}}}),[e]),i},me=n(366),ve=n(60),ge=n(36),ye=n.n(ge),Oe=n(53),je=n(25),Ce=n(388),ke=n(82),we=n(312),Se=n(71),xe=n.n(Se),Ne={"京东":"jingdong","淘宝":"taobao","知乎":"zhihu","拼多多":"pinduoduo","美团酒旅":"meituanhotel","苏宁":"suning","天猫":"taobao"},Re=function(e,t){var n=e.id,r=e.url,a=e.source,c=e.scenes,o=e.fallbackUrl,i=Ne[a],l=xe()(navigator.userAgent);l.ZhihuHybrid?ke.a.supportsAction("mcn/openURL").then((function(e){var t=e;if(n&&r&&a&&(Object(we.versionControl)(l,{IOS:"6.15",ANDROID:"6.15"})||"taobao"!==i)&&(Object(we.versionControl)(l,{IOS:"6.25",ANDROID:"6.25"})||"zhihu"!==i)&&(Object(we.versionControl)(l,{IOS:"6.28",ANDROID:"6.29"})||"pinduoduo"!==i)&&(Object(we.versionControl)(l,{IOS:"6.37",ANDROID:"6.37"})||"meituanhotel"!==i)&&(Object(we.versionControl)(l,{IOS:"6.51",ANDROID:"6.51"})||"suning"!==i)&&(Object(we.versionControl)(l,{ANDROID:"6.63"})||"0"!==n)||(t=!1),t){var s=Object.assign({id:n,url:r,type:i,fallbackUrl:o||r},c?{scenes:c}:{});ke.a.dispatch("mcn/openURL",s)}else ke.a.dispatch("base/openURL",{url:r})})):l.Mobile?location.href=r:t?t.location.href=r:window.open(r)};var Ee=n(357),Te=function(e){var t=Object(Ee.b)(),n=Object(o.useCallback)((function(n){t.ZhihuHybrid&&function(e,t){var n=t.root;if(!e.defaultPrevented){var r=e.target;if("img"===r.tagName.toLowerCase()&&(r.src.includes("zhimg")||!r.src.includes("equation"))&&(!r.classList.contains("ztext-gif")||r.parentNode.classList.contains("isPlaying"))){var a=Array.from(n.querySelectorAll(["img"])).filter((function(e){return e.src.includes("zhimg")&&!e.src.includes("equation")})),c=a.indexOf(r);if(-1!==c){e.preventDefault();var o=a.map((function(e){return e.dataset.thumbnail&&e.src.replace(/\.jpg|\.webp/,".gif")||e.dataset.src||e.src||""})).map((function(e){return Object(F.imgUrl)(e,Object.assign({quality:""},e.endsWith("webp")&&{extension:"jpg"}))}));ke.a.dispatch("base/openImage",{images:o,index:c})}}}}(n,{root:e})}),[e,t.ZhihuHybrid]);Object(o.useEffect)((function(){if(e)return e.addEventListener("click",n),function(){e.removeEventListener("click",n)}}),[e,n])},Ie=n(820),Pe=function(e){var t=e.getAttribute("data-hash"),n=e.textContent.replace(/^@/,""),r=document.createElement("span");return e.parentNode.replaceChild(r,e),{target:r,data:{id:t,name:n}}},Le=function(e){var t=Object(o.useState)(null),n=Object(a.a)(t,2),r=n[0],i=n[1];return Object(o.useEffect)((function(){if(e){var t=Array.from(e.querySelectorAll(".member_mention"));if(t.length){var n=t.map(Pe).map((function(e,t){var n=e.data,r=e.target;return Object(b.createPortal)(Object(c.c)(Ie.a,{user:n,children:["@",n.name]},t),r)}));i(n)}}}),[e]),r},Ae=n(880),_e=function(e){var t=e.getAttribute("data-poster"),n="data:,"===t?"":t,r={title:e.getAttribute("data-name"),thumbnail:n,url:e.getAttribute("href"),src:e.getAttribute("data-src")};r=e.getAttribute("data-lens-id")?Object.assign({},r,{isLens:!0,id:e.getAttribute("data-lens-id"),isPlayable:!0}):Object.assign({},r,{isLens:!1,id:e.getAttribute("data-video-id"),isPlayable:"true"===e.getAttribute("data-video-playable")}),e.hasAttribute("data-lens-status")&&(r=Object.assign({},r,{error:{status:e.getAttribute("data-lens-status"),message:e.getAttribute("data-description")}}));var a=document.createElement("div");return e.parentNode.replaceChild(a,e),{target:a,data:r}},Me=function(e){var t=Object(o.useState)(null),n=Object(a.a)(t,2),r=n[0],i=n[1];return Object(o.useEffect)((function(){if(e){var t=Array.from(e.querySelectorAll(".video-box, .video-link, .unprocessable_video"));if(t.length){var n=t.map(_e).map((function(e,t){var n=e.data,r=e.target;return Object(b.createPortal)(Object(c.b)(Ae.a,{data:n},t),r)}));i(n)}}}),[e]),r},ze={},De=function(e,t){var n=function(e){return e.split("/").reverse()[0]}(t),r=n.split("."),c=Object(a.a)(r,2),o=c[0],i=c[1],l=o.split("_"),s=Object(a.a)(l,2)[1],u="webp"===i||"gif"===i?i:"image",d=Object(C.statGenerator)({appName:"heifetz"})("".concat(u,".").concat(s,".unknown.RichText"));switch(e){case"loadstart":ze[n]=Date.now();break;case"load":if(ze[n]){var f="".concat(d,".success");k.a.increment({raw:"".concat(f,".cnt")}),k.a.timing(f,Date.now()-ze[n]),delete ze[n]}break;case"timeout":if(ze[n]){var p="".concat(d,".timeout.cnt");k.a.increment({raw:p}),delete ze[n]}break;case"error":if(ze[n]){var h="".concat(d,".failure.cnt");k.a.increment({raw:h}),delete ze[n]}}},Be=function(e){return Object(c.b)(pe,Object.assign({onLoadStateChange:De},e,{useMp4:!0}))};t.a=function(e){var t=e.ecommerce,i=e.html,s=e.shouldUseArticleCard,u=e.shouldShowCatalog,d=e.sourceId,f=e.sourceType,p=Object(r.a)(e,["ecommerce","html","shouldUseArticleCard","shouldShowCatalog","sourceId","sourceType"]),h=Object(o.useState)(null),b=Object(a.a)(h,2),m=b[0],v=b[1],g=!Object(ve.o)({includeTablet:!0});Te(m);var y,O=(y=Object(je.useDispatch)(),Object(o.useCallback)(function(){var e=Object(Oe.a)(ye.a.mark((function e(t){var n,r,a,c;return ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t,r=null,"京东"!==t.source&&"苏宁"!==t.source){e.next=9;break}return xe()(navigator.userAgent).Safari&&"苏宁拼购"!==t.goodsType&&(r=window.open()),e.next=7,y(Object(Ce.b)(t.id,0)).catch((function(){return null}));case 7:c=e.sent,n=Object.assign({},t,null==c||null===(a=c.payload)||void 0===a?void 0:a.data);case 9:"苏宁拼购"!==t.goodsType&&Re(n,r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[y]));return Object(c.c)(c.a,{children:[Object(c.b)(l.a,Object.assign({},p,{html:i,onRef:v,lazyLoadImageProps:{onLoadStateChange:De,useWebP:!1},adLinkCardProps:{parentId:d,parentType:f},mcnLinkCardProps:{onClick:function(e){var t=e.currentTarget,n=t.href,r=t.dataset,a=r.mcnId,c=r.mcnSource,o=r.mcnAppSchemaIos,i=r.mcnAppSchemaAndroid,l=r.mcnGoodsType;g&&("拼多多"===c||"苏宁"===c&&"苏宁拼购"===l)||(e.preventDefault(),O({id:a,source:c,goodsType:l,url:n,appSchemaIos:o,appSchemaAndroid:i}))}},mkSkuLinkCardProps:{cardSize:"large",enableBackdrop:!1,sourceConvert:!1,tagPreset:"plain",enableMetaTag:!1,enableButton:!0,buttonPreset:"plain",buttonColor:"orange",enableHint:!1},zvideoLinkCardProps:{enableInlinePlay:!0},articleLinkCardProps:{enableZa:!0,useOpenArticleButton:!0},shouldUseArticleCard:s,shouldShowCatalog:u,sourceId:d})),be(m,{Component:Be}),Me(m),Le(m),Object(me.d)(m,{ecommerce:t,getComponent:function(){return n.e(2).then(n.bind(null,1440))}})]})}},892:function(e,t,n){"use strict";var r=n(31),a=n(1),c=n(2),o=n(3),i=n.n(o),l=n(361),s=n(359),u=n(902);function d(e){var t,n=e.user,o=e.noHeadline,i=Object(r.a)(e,["user","noHeadline"]),d=n.headline,f=n.isOrg,p=Object(c.useMemo)((function(){return Object(s.e)(n.badgeV2||n.badge)}),[n]),h=p.identity,b=p.bestAnswerer,m=p.baike,v=p.title;return v?Object(a.b)(l.a,Object.assign({html:v},i)):!f&&(null==b||null===(t=b.topics)||void 0===t?void 0:t.length)?Object(a.c)("div",Object.assign({},i,{children:[Object(a.b)(u.a,{topics:b.topics,user:n}),"的优秀答主"]})):h?Object(a.b)("div",Object.assign({},i,{children:h[0].description})):m?Object(a.b)("div",Object.assign({},i,{children:m.description})):d&&!o?Object(a.b)(l.a,Object.assign({html:d},i)):null}d.propTypes={user:i.a.object.isRequired,noHeadline:i.a.bool},t.a=Object(c.memo)(d)},893:function(e,t,n){"use strict";var r=n(14),a=n(15),c=n(16),o=n(17),i=n(8),l=n(1),s=n(3),u=n.n(s),d=n(2),f=n(25),p=n(813),h=n(28);n(852);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var m=function(e){Object(c.a)(n,e);var t=b(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.zaViewName;Object(p.onViewedOnce)(this.node,(function(){h.a.trackCardShow(null,{id:3613,name:e})}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.theme,r=t.zaViewName,a=t.vipIcon,c=a.nightModeUrl,o=a.url,i="light"===n?o:c;return Object(l.b)("a",{className:"UserLink-vipIcon",href:"https://www.zhihu.com/vip",target:"_blank",rel:"noopener noreferrer",ref:function(t){return e.node=t},"data-za-detail-view-id":3612,"data-za-detail-view-name":r,children:Object(l.b)("img",{src:i,alt:"zhihu vip"})})}}]),n}(d.Component);m.propTypes={vipIcon:u.a.shape({nightModeUrl:u.a.string,url:u.a.string}).isRequired,zaViewName:u.a.string},t.a=Object(f.connect)((function(e){return{theme:e.env.theme}}))(m)},894:function(e,t,n){var r,a,c;a=[t],void 0===(c="function"==typeof(r=function(e){"use strict";function t(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(e,"__esModule",{value:!0});var n=!1;if("undefined"!=typeof window){var r={get passive(){n=!0}};window.addEventListener("testPassive",null,r),window.removeEventListener("testPassive",null,r)}function a(e){return l.some((function(t){return!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))}))}function c(e){var t=e||window.event;return!!a(t.target)||1<t.touches.length||(t.preventDefault&&t.preventDefault(),!1)}function o(){setTimeout((function(){void 0!==f&&(document.body.style.paddingRight=f,f=void 0),void 0!==d&&(document.body.style.overflow=d,d=void 0)}))}var i="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&1<window.navigator.maxTouchPoints),l=[],s=!1,u=-1,d=void 0,f=void 0;e.disableBodyScroll=function(e,r){if(i){if(!e)return void console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");if(e&&!l.some((function(t){return t.targetElement===e}))){var o={targetElement:e,options:r||{}};l=[].concat(t(l),[o]),e.ontouchstart=function(e){1===e.targetTouches.length&&(u=e.targetTouches[0].clientY)},e.ontouchmove=function(t){var n,r,o,i;1===t.targetTouches.length&&(r=e,i=(n=t).targetTouches[0].clientY-u,a(n.target)||(r&&0===r.scrollTop&&0<i||(o=r)&&o.scrollHeight-o.scrollTop<=o.clientHeight&&i<0?c(n):n.stopPropagation()))},s||(document.addEventListener("touchmove",c,n?{passive:!1}:void 0),s=!0)}}else{h=r,setTimeout((function(){if(void 0===f){var e=!!h&&!0===h.reserveScrollBarGap,t=window.innerWidth-document.documentElement.clientWidth;e&&0<t&&(f=document.body.style.paddingRight,document.body.style.paddingRight=t+"px")}void 0===d&&(d=document.body.style.overflow,document.body.style.overflow="hidden")}));var p={targetElement:e,options:r||{}};l=[].concat(t(l),[p])}var h},e.clearAllBodyScrollLocks=function(){i?(l.forEach((function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null})),s&&(document.removeEventListener("touchmove",c,n?{passive:!1}:void 0),s=!1),l=[],u=-1):(o(),l=[])},e.enableBodyScroll=function(e){if(i){if(!e)return void console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");e.ontouchstart=null,e.ontouchmove=null,l=l.filter((function(t){return t.targetElement!==e})),s&&0===l.length&&(document.removeEventListener("touchmove",c,n?{passive:!1}:void 0),s=!1)}else(l=l.filter((function(t){return t.targetElement!==e}))).length||o()}})?r.apply(t,a):r)||(e.exports=c)},896:function(e,t,n){var r=n(844),a=n(389),c=n(874),o=n(875),i=n(100),l=n(958);e.exports=function(e){return a((function(t){var n=t.length,a=n,s=r.prototype.thru;for(e&&t.reverse();a--;){var u=t[a];if("function"!=typeof u)throw new TypeError("Expected a function");if(s&&!d&&"wrapper"==o(u))var d=new r([],!0)}for(a=d?a:n;++a<n;){u=t[a];var f=o(u),p="wrapper"==f?c(u):void 0;d=p&&l(p[0])&&424==p[1]&&!p[4].length&&1==p[9]?d[o(p[0])].apply(d,p[3]):1==u.length&&l(u)?d[f]():d.thru(u)}return function(){var e=arguments,r=e[0];if(d&&1==e.length&&i(r))return d.plant(r).value();for(var a=0,c=n?t[a].apply(this,e):r;++a<n;)c=t[a].call(this,c);return c}}))}},897:function(e,t,n){"use strict";var r=n(2),a=n(61);t.a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=n.rootMargin,o=n.threshold,i=n.once,l=void 0===i||i;e=Array.isArray(e)?e:e?[e]:[];var s=Object(r.useRef)(null),u=Object(a.c)(t);Object(r.useEffect)((function(){if(e.length)return s.current&&e.forEach((function(e){return s.current.unobserve(e)})),s.current=new IntersectionObserver((function(e){e.forEach((function(e){e.intersectionRatio>0&&(u(e),l&&s.current.unobserve(e.target))}))}),{rootMargin:c,threshold:o}),e.forEach((function(e){return s.current.observe(e)})),function(){e.forEach((function(e){return s.current.unobserve(e)}))}}),[e,c,JSON.stringify(o),l])}},899:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var r=n(0),a=n(14),c=n(15),o=n(16),i=n(17),l=n(8),s=n(31),u=n(1),d=n(3),f=n.n(d),p=n(2),h=n(19),b=n(25),m=n(32),v=n(170),g=n(419),y=n(154),O=n(115);var j=n(103),C=n(412),k=function(e,t){var n=t.urlToken;return e.people.allFavlistsByUser[n]||{}},w=function(e){return e.currentUser},S=(Object(j.a)(y.a.GET_ALL_FAVLISTS,(function(e,t,n){return function(r,a){var c=a();if(e=e||w(c),!t){var o=k(c,{urlToken:e}),i=o.offset,l=void 0===i?0:i,s=o.limit;t={offset:l,limit:void 0===s?10:s}}return{action:Object.assign({urlToken:e,paging:t},O.a.enableSchema&&{schema:C.b},{extra:n}),fetcher:function(e,t){var n=t.next,r=t.offset,a=void 0===r?0:r,c=t.limit,o=void 0===c?10:c;return n?O.a.http(n):O.a.http("/api/v4/people/".concat(e,"/collections"),{query:{include:"data[*].updated_time,answer_count,follower_count,creator,is_public",offset:a,limit:o}})}(e,t)}}})),Object(j.a)(y.a.GET_ALL_FAVLISTS_WITH_RELATIONS,(function(e,t,n,r,a){return function(c,o){var i=o();if(e=e||w(i),!r){var l=k(i,{urlToken:e}),s=l.offset,u=void 0===s?0:s,d=l.limit;r={offset:u,limit:void 0===d?10:d}}var f=Object.assign({contentType:t,contentId:n,urlToken:e,paging:r},O.a.enableSchema&&{schema:C.b},{extra:a});return{action:f,fetcher:function(e){var t=e.contentType,n=e.contentId,r=e.paging,a=(r=void 0===r?{}:r).next,c=r.offset,o=void 0===c?0:c,i=r.limit,l=void 0===i?10:i;return a?O.a.http(a):O.a.http("/api/v4/collections/contents/".concat(t,"/").concat(n),{query:{offset:o,limit:l}})}(f)}}})));function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var N=function(){return n.e(28).then(n.bind(null,1337)).then((function(e){return e.FavlistsModal}))},R={ids:[],isFetching:!1,isDrained:!1},E=Object(m.createSelector)((function(e){return e.people.allFavlistsByUser[e.currentUser]||R}),(function(e){return e.entities.favlists}),(function(e,t){var n=e.ids,r=Object(s.a)(e,["ids"]);return Object.assign({},r,{items:n.map((function(e){return t[e]}))})}));var T=function(e){Object(o.a)(n,e);var t=x(n);function n(){var e;Object(a.a)(this,n);for(var c=arguments.length,o=new Array(c),i=0;i<c;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).onFavlistAdd=function(){for(var t=e.props,n=t.urlToken,r=t.onFavlistAdd,a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return r.apply(void 0,c.concat([{urlToken:n}]))},e.onLoad=function(){for(var t=e.props,n=t.onLoad,a=t.type,c=t.id,o=t.urlToken,i=t.onUpdateReaction,l=arguments.length,s=new Array(l),u=0;u<l;u++)s[u]=arguments[u];return n.apply(void 0,[o,a,c].concat(s)).then((function(e){i({contentType:a,contentId:c,relations:e.payload.data.reduce((function(e,t){return Object.assign({},e,Object(r.a)({},t.id,t.isFavorited))}),{})})}))},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.context.currentUser||{};return Object(u.b)(v.a,Object.assign({getComponent:N},this.props,{authRequired:this.context.authRequired,isUserActive:Boolean(e.isActive),onLoad:this.onLoad,onFavlistAdd:this.onFavlistAdd}))}}]),n}(p.Component);T.contextTypes={authRequired:f.a.func,currentUser:f.a.object};var I=Object(h.compose)(Object(b.connect)((function(e,t){var n=t.id,r=t.type,a=e.favlists.relations,c=e.currentUser,o=E(e);return{isFetching:o.isFetching,isDrained:o.isDrained,items:o.items,relations:a["".concat(r,"_").concat(n)],zaEnabled:!0,urlToken:c}}),(function(e,t){return{onUpdateFav:function(){return e(g.b.apply(void 0,arguments))},onFavlistAdd:t.onFavlistAdd||function(){return e(g.a.apply(void 0,arguments))},onLoad:function(){return e(S.apply(void 0,arguments))},onUpdateReaction:function(){return e(g.c.apply(void 0,arguments))}}})))(T)},900:function(e,t,n){"use strict";var r=n(20),a=n.n(r),c=n(21),o=n.n(c),i=n(22),l=n.n(i),s=n(23),u=n.n(s),d=n(13),f=n.n(d),p=n(33),h=n.n(p),b=n(45),m=n.n(b),v=n(3),g=n.n(v),y=n(2),O=n(10),j=n.n(O),C=n(356),k=n(29),w=n(5);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return u()(this,n)}}function x(e){var t=e.className,n=e.tag,r=e.name,a=e.value,c=m()(e,["className","tag","name","value"]),o="div";return n?o=n:c.href?o="a":c.onClick&&(o=k.c),Object(w.g)(o,h()({className:j()("NumberBoard-item",t)},c),Object(w.g)("div",{className:"NumberBoard-itemInner"},Object(w.g)("div",{className:"NumberBoard-itemName"},r),Object(w.g)("strong",{className:"NumberBoard-itemValue",title:a},Object(C.formatNumber)(a))))}var N=function(e){l()(n,e);var t=S(n);function n(){return a()(this,n),t.apply(this,arguments)}return o()(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.divider,r=e.children,a=e.items,c=m()(e,["className","divider","children","items"]);return Object(w.g)("div",h()({className:j()("NumberBoard",t,{"NumberBoard--divider":n})},c),r||a.map((function(e){return Object(w.g)(x,h()({key:e.name},e))})))}}]),n}(y.Component);N.propTypes={divider:g.a.bool},N.defaultProps={divider:!1},N.Item=x;var R=N;t.a=R},901:function(e,t,n){"use strict";var r=n(59),a=n.n(r),c=n(2),o=n(111);var i="function"==typeof Image,l={},s=i?o((function(e){return new Promise((function(t){return n=e,r=function(e,n){l[e]=n,t(n)},(a=new Image).onload=function(){var e=a.width>0&&a.height>0;r(n,e)},a.onerror=function(){r(n,!1)},void(a.src="data:image/webp;base64,"+{lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"}[n]);var n,r,a}))})):function(){return Promise.resolve(!1)};t.a=function(e){var t=l[e],n=Object(c.useState)(t),r=a()(n,2),o=r[0],u=r[1];return i&&void 0===t&&s(e).then(u),o}},902:function(e,t,n){"use strict";var r=n(14),a=n(15),c=n(69),o=n(16),i=n(17),l=n(8),s=n(1),u=n(3),d=n.n(u),f=n(2),p=n(34),h=n(29),b=n(903),m=n(24);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var g=function(e){Object(o.a)(n,e);var t=v(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).state={expanded:!1},e.onExpand=e.handleExpand.bind(Object(c.a)(e)),e}return Object(a.a)(n,[{key:"handleExpand",value:function(){this.setState({expanded:!0})}},{key:"render",value:function(){var e=this.props,t=e.topics,n=e.user,r=e.ellipsisLength,a=e.expandable,c=e.privacyEnabled,o=e.showPrivacyPage,i=this.state.expanded,l="等 ".concat(t.length," 个"),u=t;return i||(u=t.slice(0,r)),Object(s.c)("span",{children:[u.map((function(e,t){return Object(s.c)("span",{children:[Object(s.b)(b.a,{showPrivacyPage:c&&o,authWrapperClassName:"ProfileMainPrivacy-authWrapper",authChild:Object(s.b)("span",{className:"ProfileMainPrivacy-pointerWrapper",children:e.name}),children:Object(s.b)(p.Link,{to:"".concat(m.D,"/").concat(n.isOrg?"org":"people","/").concat(n.urlToken,"/creations/").concat(e.id),children:e.name})}),t<u.length-1?"、":" "]},t)})),!i&&t.length>r&&(a?Object(s.b)(h.c,{preset:"plain",onClick:this.onExpand,children:l}):l),"话题"]})}}]),n}(f.Component);g.propTypes={topics:d.a.array.isRequired,user:d.a.object,ellipsisLength:d.a.number,expandable:d.a.bool,noHoverCard:d.a.bool,privacyEnabled:d.a.bool,showPrivacyPage:d.a.bool},g.defaultProps={ellipsisLength:3,expandable:!0,noHoverCard:!1},t.a=g},903:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(1),a=n(2),c=n(380),o=function(e){var t=e.children,n=e.showPrivacyPage,o=e.authWrapperClassName,i=e.authChild,l=a.Children.only(t),s=i?a.Children.only(i):l;return n?Object(r.b)(c.a,{wrapperClassName:o,loginButton:s}):l}},905:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return s}));var r=n(111),a=n.n(r),c=n(974),o=n.n(c),i=function(e,t){var n=[];return a()((function(){for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];n.push(a),setTimeout((function(){n.length&&(t(n),n.length=0)}),e)}),(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return String(t)}))}(550,(function(e){var t=new FormData;return t.append("items",JSON.stringify(e)),o()("/lastread/touch",{method:"POST",body:t})})),l="read",s="touch";t.c=i},907:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1090),a=n(82),c=n(407),o=n.n(c);function i(e,t){var n=t.router,c=t.ua,i=t.query,l=void 0===i?{}:i,s=t.oia,u=t.isSoft,d=c.ZhihuHybrid,f=c.Zhihu,p=c.Android,h=Object(r.stringify)(l),b="".concat(h?"?".concat(h):""),m="https://www.zhihu.com".concat(e).concat(b);u&&p?n.push({pathname:e,query:l}):d&&f?a.a.dispatch("base/openURL",{url:m}):s?o()(m):n?n.push({pathname:e,query:l}):location.href=m}},908:function(e,t,n){"use strict";var r=n(31),a=n(1),c=n(359),o=n(58),i=n(816),l=n(111),s=n.n(l),u=n(196),d=s()(u.findImageSpec),f=function(e,t){return Object(u.imgUrl)(e,d(t))};t.a=function(e){var t=e.user,n=e.size,l=void 0===n?38:n,s=e.noBadge,u=void 0!==s&&s,d=e.noLink,p=void 0!==d&&d,h=e.linkProps,b=Object(r.a)(e,["user","size","noBadge","noLink","linkProps"]),m=t.avatarUrl,v=t.isOrg,g=t.urlToken,y=!p&&g?"https://www.zhihu.com/".concat(v?"org":"people","/").concat(g):null,O=Object(a.b)(o.f,{loading:"lazy",src:f(m,l),srcSet:"".concat(f(m,2*l)," 2x"),size:l,display:"block",css:{borderRadius:"50%"}});return Object(a.c)(o.a,Object.assign({display:"inline-block",size:l,css:{position:"relative"}},b,{children:[y?Object(a.b)(i.a,Object.assign({href:y,target:"_blank"},h,{children:O})):O,!u&&Object(a.b)(c.c,{css:Object(c.f)(l),isOrg:v,badge:t.badgeV2||t.badge,linkify:!p,enableTooltip:!0})]}))}},911:function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var r=n(41),a=n(14),c=n(15),o=n(16),i=n(17),l=n(8),s=n(1),u=n(3),d=n.n(u),f=n(2),p=n(10),h=n.n(p),b=n(29),m=n(1234),v=n(1276),g=n(28),y=n(356),O=n(77),j=n(197),C=n(4),k=n(772),w=n(132);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var x=function(e){Object(o.a)(n,e);var t=S(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={step:0},e.containerRef=Object(f.createRef)(),e.reasonButtonRefs=[],e.toggleStep=function(){e.setState({step:0===e.state.step?1:0},(function(){e.popover.position()}))},e.handleKeyDown=function(t){var n=Number(t.key);n&&e.reasonButtonRefs[n-1]&&e.reasonButtonRefs[n-1].focus()},e.handleNeverShowVoteDownReason=function(){e.props.onSetVoteDownReason(!1),e.popover.close()},e.handleSelectReason=function(t){e.props.onSelectVoteDownReason(t),e.popover.close()},e}return Object(c.a)(n,[{key:"componentDidUpdate",value:function(){"absolute"===this.props.positionStatus&&this.popover.close()}},{key:"render",value:function(){var e=this,t=this.props,n=t.reasonList,r=t.positionStatus,a=this.state.step,c=Object(C.a)(n).sort((function(e,t){return e.sort-t.sort}));return Object(s.b)(w.a,{className:"VoteDownReasonMenu",targetClassName:"VoteDownReasonMenu-target",positionStatus:r,toggler:this.props.toggler,onOpen:function(){e.setState({step:0})},getContainer:function(){return document.querySelector(".ContentItem-actions")},onClick:this.props.onTogglerClick,ref:function(t){e.popover=t,e.props.popoverRef&&e.props.popoverRef(t)},placement:"top",arrowed:!0,preventCloseOnTarget:!0,children:Object(s.c)("div",{className:"VoteDownReasonMenu-container",onKeyDown:this.handleKeyDown,tabIndex:-1,children:[Object(s.c)("div",{className:"VoteDownReasonMenu-header",children:[0===a&&"已反对，你觉得",1===a&&"不再显示该反馈功能？"]}),Object(s.c)("div",{className:"VoteDownReasonMenu-action",children:[0===a&&Object(s.b)(b.c,{preset:"plain",className:"VoteDownReasonMenu-ignoreButton preventCloseOnTarget",onClick:this.toggleStep,children:"不再显示"}),0===a&&Object(s.b)("div",{className:"VoteDownReasonMenu-spliter"}),Object(s.b)(b.c,{preset:"plain",className:"VoteDownReasonMenu-closeButton",onClick:function(){e.popover.close()},"aria-label":"关闭",tabIndex:1,icon:k.a})]}),0===a&&Object(s.b)("div",{className:"VoteDownReasonMenu-reasonList",children:c.map((function(t,n){return Object(s.b)(b.c,{preset:"plain",className:"VoteDownReasonMenu-reason",onClick:function(){e.handleSelectReason(t)},onRef:function(t){return e.reasonButtonRefs[n]=t},children:t.name},t.reasonId)}))}),1===a&&Object(s.c)("div",{className:"VoteDownReasonMenu-disableReason",children:[Object(s.b)("div",{className:"VoteDownReasonMenu-disableReasonHint",children:"你可以在「设置」页面中的「屏蔽」开启。"}),Object(s.c)("div",{className:"VoteDownReasonMenu-disableReasonButtonList",children:[Object(s.b)(b.c,{className:"preventCloseOnTarget",onClick:this.toggleStep,children:"返回"}),Object(s.b)(b.c,{color:"blue",onClick:this.handleNeverShowVoteDownReason,children:"不再显示"})]})]})]})})}}]),n}(f.Component);x.defaultProps={reasonList:[]};var N=x,R=n(24);n(1056);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var T=function(e){Object(o.a)(n,e);var t=E(n);function n(){var e;Object(a.a)(this,n);for(var c=arguments.length,o=new Array(c),i=0;i<c;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={recognizeInfo:{showRecognizeModal:!1,action:"",voteType:"",isRecognized:e.props.isRecognized}},e.voteUpButtonRef=Object(f.createRef)(),e.voteDownButtonRef=Object(f.createRef)(),e.shouldShowMenu=function(){var t=e.props,n=t.voting,r=t.voteDownReason,a=t.onLoadVoteDownReason;return!!t.isShowVoteDownMenu&&(-1===n?(e.popover.close(),!1):!!r||(e.isPendingForVoteDownReason=!0,a(),!1))},e.onVote=e.context.authRequired((function(t){e.props.onVote(t)}),R.U.vote),e.voteUp=function(t){var n=1===e.props.voting?["UnUpvote","neutral"]:["Upvote","up"],a=Object(r.a)(n,2),c=a[0],o=a[1];e.vote(t,c,o),e.voteUpButtonRef.current.focus()},e._voteDown=function(t){var n=-1===e.props.voting?["UnDownvote","neutral"]:["Downvote","down"],a=Object(r.a)(n,2),c=a[0],o=a[1];e.vote(t,c,o),e.voteDownButtonRef.current.focus()},e.voteDown=function(t){e.shouldShowMenu()&&e.popover.open(),e._voteDown(t)},e.vote=function(t,n,r){var a=e.props,c=a.disableAuth,o=a.handleToggleGuide,i=a.onClick,l=a.type,s=a.zaIds,u=s.voteUp,d=s.voteDown,f=n.includes("Upvote")?u:d;"article"===l&&"down"===r&&g.a.trackEvent(e.voteDownButtonRef.current,{action:"Click",id:2315,name:"反对"}),g.a.trackEvent(n.includes("Upvote")?e.voteUpButtonRef.current:e.voteDownButtonRef.current,Object.assign({action:n,element:"Button"},f&&{id:f})),i?i(t,r):c?o():e.onVoteWithRecognize(n,r)},e.onVoteWithRecognize=function(t,n){var r=e.props.voting;!e.state.recognizeInfo.isRecognized||1!==r||"UnUpvote"!==t&&"Downvote"!==t?e.onVote(n):e.setState({recognizeInfo:Object.assign({},e.state.recognizeInfo,{showRecognizeModal:!0,action:t,voteType:n})})},e.handleConfirmCancelRecognize=function(){e.onVote(e.state.recognizeInfo.voteType),e.setState({recognizeInfo:Object.assign({},e.state.recognizeInfo,{isRecognized:!1,showRecognizeModal:!1})})},e.handleCloseCancelRecognizeModal=function(){return e.setState({recognizeInfo:Object.assign({},e.state.recognizeInfo,{showRecognizeModal:!1})})},e.handleTogglerClick=function(t){e.shouldShowMenu()||t.preventDefault(),e._voteDown(t)},e.renderVoteUpButton=function(){var t=e.props,n=t.isOwner,r=t.count,a=t.voting,c=t.disabled,o=t.hideDesc,i=1===a?"已赞同":"赞同",l=[i,Object(y.cnNiceNumber)(r)].join(" "),u=[!o&&i,0!==r&&Object(y.cnNiceNumber)(r).trim()].filter(Boolean).join(" ");return Object(s.c)(b.c,{className:h()("VoteButton VoteButton--up",{"is-active":1===a}),disabled:n||c,onClick:e.voteUp,"aria-label":l,onRef:e.voteUpButtonRef,children:[Object(s.b)(m.a,{center:!0,size:10,className:"VoteButton-TriangleUp"}),u]})},e.renderVoteDownButton=function(){var t=e.props,n=t.voting,r=t.disabled,a=-1===n?"已反对":"反对";return Object(s.b)(b.c,{className:h()("VoteButton VoteButton--down",{"is-active":-1===n},{"VoteButton--mobileDown":!1}),disabled:r,onClick:e._voteDown,"aria-label":a,onRef:e.voteDownButtonRef,children:Object(s.b)(v.a,{center:!0,size:10})})},e}return Object(c.a)(n,[{key:"componentWillReceiveProps",value:function(e){e.voteDownReason&&this.isPendingForVoteDownReason&&(this.isPendingForVoteDownReason=!1,this.popover.open())}},{key:"render",value:function(){var e=this,t=this.props,n=t.isOwner,r=t.positionStatus,a=t.isShowVoteDownMenu,c=t.voteDownReason,o=this.state.recognizeInfo,i=o.showRecognizeModal,l="UnUpvote"===o.action,u=a&&!0;return Object(s.c)("span",{ref:this.voteButtonRef,children:[Object(s.b)(j.c,{keyMap:{VOTE_UP:"v",VOTE_DOWN:"d"},handlers:{VOTE_UP:this.voteUp,VOTE_DOWN:this.voteDown}}),this.renderVoteUpButton(),!n&&!u&&this.renderVoteDownButton(),!n&&u&&Object(s.b)(N,{reasonList:c,toggler:this.renderVoteDownButton(),popoverRef:function(t){return e.popover=t},positionStatus:r,onTogglerClick:this.handleTogglerClick,onSelectVoteDownReason:this.props.onSelectVoteDownReason,onSetVoteDownReason:this.props.onSetVoteDownReason}),Object(s.b)(O.b,{title:"确定".concat(l?"取消赞同":"选择反对"),onClose:this.handleCloseCancelRecognizeModal,children:i&&Object(s.c)("div",{children:[Object(s.c)("div",{children:[l?"取消赞同":"选择反对","时，你赠与作者的专业徽章也会收回，并且赠与次数不会返还，是否仍要取消？"]}),Object(s.c)(O.a,{direction:"horizontal",children:[Object(s.b)(b.c,{onClick:this.handleCloseCancelRecognizeModal,children:l?"暂不取消":"暂不选择"}),Object(s.b)(b.c,{preset:"primary",color:"blue",onClick:this.handleConfirmCancelRecognize,children:l?"取消赞同":"选择反对"})]})]})})]})}}]),n}(f.Component);T.contextTypes={authRequired:d.a.func},T.propTypes={voting:d.a.oneOf([-1,0,1]).isRequired,disabled:d.a.bool,type:d.a.string,hideDesc:d.a.bool,zaIds:d.a.shape({voteUp:d.a.number,voteDown:d.a.number}),isRecognized:d.a.bool},T.defaultProps={voting:0,disabled:!1,type:"",hideDesc:!1,zaIds:{}}},914:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(2);var r=n(10),a=n.n(r),c=n(5),o=function(e){var t=e.avatar,n=e.bottom,r=e.button,o=e.className,i=e.height,l=e.icon,s=e.inline,u=e.right,d=e.style,f=void 0===d?{}:d,p=e.title,h=e.width,b=Object.assign({},f);return h&&(b.width="".concat(h,"px")),i&&(b.height="".concat(i,"px")),n&&(b.marginBottom="".concat(n,"px")),u&&(b.marginRight="".concat(u,"px")),Object(c.g)("div",{className:a()("Holder",o,{"Holder--inline":s,"Holder--title":p,"Holder--icon":l,"Holder--button":r,"Holder--avatar":t}),style:b})}},936:function(e,t,n){"use strict";
/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */e.exports=function(e,t){if("string"==typeof e)return l(e);if("number"==typeof e)return i(e,t);return null},e.exports.format=i,e.exports.parse=l;var r=/\B(?=(\d{3})+(?!\d))/g,a=/(?:\.0*|(\.[^0]+)0+)$/,c={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},o=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function i(e,t){if(!Number.isFinite(e))return null;var n=Math.abs(e),o=t&&t.thousandsSeparator||"",i=t&&t.unitSeparator||"",l=t&&void 0!==t.decimalPlaces?t.decimalPlaces:2,s=Boolean(t&&t.fixedDecimals),u=t&&t.unit||"";u&&c[u.toLowerCase()]||(u=n>=c.pb?"PB":n>=c.tb?"TB":n>=c.gb?"GB":n>=c.mb?"MB":n>=c.kb?"KB":"B");var d=(e/c[u.toLowerCase()]).toFixed(l);return s||(d=d.replace(a,"$1")),o&&(d=d.replace(r,o)),d+i+u}function l(e){if("number"==typeof e&&!isNaN(e))return e;if("string"!=typeof e)return null;var t,n=o.exec(e),r="b";return n?(t=parseFloat(n[1]),r=n[4].toLowerCase()):(t=parseInt(e,10),r="b"),Math.floor(c[r]*t)}},940:function(e,t,n){"use strict";function r(e,t){return!(!e||!t)&&(e.id===t.id&&void 0!==e.id||e.urlToken===t.urlToken&&void 0!==e.urlToken)}n.d(t,"a",(function(){return r}))},941:function(e,t,n){"use strict";var r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},c=Object.defineProperty,o=Object.getOwnPropertyNames,i=Object.getOwnPropertySymbols,l=Object.getOwnPropertyDescriptor,s=Object.getPrototypeOf,u=s&&s(Object);e.exports=function e(t,n,d){if("string"!=typeof n){if(u){var f=s(n);f&&f!==u&&e(t,f,d)}var p=o(n);i&&(p=p.concat(i(n)));for(var h=0;h<p.length;++h){var b=p[h];if(!(r[b]||a[b]||d&&d[b])){var m=l(n,b);try{c(t,b,m)}catch(e){}}}return t}return t}},943:function(e,t,n){"use strict";n.d(t,"b",(function(){return P})),n.d(t,"a",(function(){return d}));var r=n(3),a=n.n(r),c=n(2),o=n(10),i=n.n(o),l=n(167),s=n(5),u=function(e){var t=e.title,n=e.subtitle,r=e.attrInfo,a=e.coverUrl,c=e.avatarUrl,o=e.avatarFit;return Object(s.g)("div",null,a&&Object(s.g)("div",{className:"HoverCard-coverContainer"},Object(s.g)("img",{className:"HoverCard-cover",src:a,alt:"cover"})),Object(s.g)("div",{className:i()("HoverCard-titleContainer",{"HoverCard-titleContainer--noAvatar":!a})},c&&Object(s.g)(l.a,{size:68,className:"HoverCard-avatar",url:c,imgFit:o}),Object(s.g)("div",{className:i()("HoverCard-titleText",{"HoverCard-titleText--noAvatar":!c})},Object(s.g)("div",{className:"HoverCard-title"},t),n&&Object(s.g)("div",{className:"HoverCard-subtitle"},n)),r&&Object(s.g)("div",{className:"HoverCard-attrInfo"},r)))};u.propTypes={title:a.a.node,subtitle:a.a.node,attrInfo:a.a.node,coverUrl:a.a.string,avatarUrl:a.a.string,avatarFit:a.a.oneOf(["fill","contain","cover","none","scale-down"])};var d=u,f=n(20),p=n.n(f),h=n(21),b=n.n(h),m=n(22),v=n.n(m),g=n(23),y=n.n(g),O=n(13),j=n.n(O),C=n(33),k=n.n(C),w=n(45),S=n.n(w),x=n(93),N=n.n(x),R=n(362),E=n(132);function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j()(e);if(t){var a=j()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y()(this,n)}}var I=function(e){v()(n,e);var t=T(n);function n(){var e;p()(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={opened:!1,placement:null,loaderStyle:null},e.handleOpen=function(t){var n=t.arrowStyle,r=t.placement,a=e.props.onOpen;a&&a(),e.setState({opened:!0,placement:r,loaderStyle:n})},e.handleClose=function(){var t=e.props.onClose;t&&t(),e.setState({opened:!1})},e}return b()(n,[{key:"render",value:function(){var e=N()(this.props,["onOpen","onClose"]),t=e.toggler,n=e.children,r=e.isLoading,a=e.onRef,o=e.size,l=S()(e,["toggler","children","isLoading","onRef","size"]),u=this.state,d=u.opened,f=u.loaderStyle;return Object(s.g)(E.a,k()({noLayer:!0,toggler:Object(s.g)("div",null,t),toggleEvent:"hover",targetClassName:"HoverCard-popoverTarget",placement:"bottom-left",onOpen:this.handleOpen,onClose:this.handleClose},l),Object(s.g)("div",{className:i()("HoverCard-container",{"HoverCard-container--large":"large"===o}),ref:a},r&&Object(s.g)("div",{className:"HoverCard-loading",style:f},Object(s.g)(R.a,null)),Object(s.g)("div",{className:i()("HoverCard",{"HoverCard--isLoading":r||!d})},c.Children.map(n,(function(e){return e&&("string"==typeof e?Object(s.g)("div",{className:"HoverCard-item"},e):Object(c.cloneElement)(e,{className:i()("HoverCard-item",e.props.className)}))})))))}}]),n}(c.Component);I.propTypes={toggler:a.a.node.isRequired,isLoading:a.a.bool,onOpen:a.a.func,onClose:a.a.func,size:a.a.oneOf(["default","large"])},I.defaultProps={margin:16,align:"left",topExcludedHeight:60,size:"default"};var P=I},944:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var r=n(20),a=n.n(r),c=n(21),o=n.n(c),i=n(22),l=n.n(i),s=n(23),u=n.n(s),d=n(13),f=n.n(d),p=n(33),h=n.n(p),b=n(45),m=n.n(b),v=n(2),g=n(43),y=n(10),O=n.n(y),j=n(968),C=n.n(j),k=n(93),w=n.n(k),S=n(5);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return u()(this,n)}}function N(e,t,n){var r=new Image;return r.addEventListener("load",t),r.onerror=n,r.src=e,r}var R=function(e){l()(n,e);var t=x(n);function n(){var e;a()(this,n);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={thumbnailLoaded:!1,loaded:!1,vagued:!0,computedWidth:e.props.width,computedHeight:e.props.height},e.wrapperNode=null,e.hasLoaded=!1,e.loadThumbnail=function(){var t=e.props,n=t.onLoadImageFail,r=t.onLoadImageTimeout;e.thumbnail=N(e.props.thumbnail,e.handleThumbnailLoaded,(function(){n&&n({type:"thumbnail",url:e.props.thumbnail})})),r&&setTimeout((function(){e.thumbnail&&!e.thumbnail.complete&&r({type:"thumbnail",url:e.props.thumbnail})}),3e3)},e.loadImage=function(){var t=e.props,n=t.onLoadImageFail,r=t.onLoadImageTimeout;e.image=N(e.props.url,e.handleImageLoaded,(function(){n&&n({type:"image",url:e.props.url})})),r&&setTimeout((function(){e.image&&!e.image.complete&&r({type:"image",url:e.props.url})}),3e3)},e.handleObserve=function(t){t&&e.hasLoaded||t&&(e.hasLoaded=!0,e.loadThumbnail(),e.loadImage())},e.handleThumbnailLoaded=function(){var t=e.props.onLoadImageSuccess;t&&t({type:"thumbnail",url:e.props.thumbnail});var n=e.state,r=n.computedWidth;if(!n.computedHeight){var a=e.thumbnail,c=a.naturalWidth,o=a.naturalHeight*(Number(r)/c);e.setState({computeHeight:o})}e.setState({thumbnailLoaded:!0})},e.handleImageLoaded=function(){var t=e.props.onLoadImageSuccess;t&&t({type:"image",url:e.props.url}),e.setState({loaded:!0}),e.timeout=window.setTimeout((function(){return e.setState({vagued:!1})}),500)},e}return o()(n,[{key:"componentDidMount",value:function(){if(this.wrapperNode){var e=Object(g.findDOMNode)(this.wrapperNode),t=this.state,n=t.computedWidth,r=t.computedHeight;this.setState({computeWidth:n||e.offsetWidth,computeHeight:r||e.offsetHeight})}}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout),this.thumbnail&&this.thumbnail.removeEventListener("load",this.handleThumbnailLoaded),this.image&&this.image.removeEventListener("load",this.handleImageLoaded)}},{key:"render",value:function(){var e=this,t=w()(this.props,["onLoadImageFail","onLoadImageTimeout","onLoadImageSuccess"]),n=t.className,r=t.url,a=t.alt,c=t.threshold,o=t.thumbnail,i=m()(t,["className","url","alt","threshold","thumbnail"]),l=this.state,s=l.thumbnailLoaded,u=l.loaded,d=l.vagued,f=l.computedWidth,p=l.computedHeight;if(!d)return Object(S.g)("img",h()({className:n,width:f,src:r,alt:a},i));var b=C.a;return Object(S.g)(b,{rootMargin:"".concat(c,"px 0px ").concat(c,"px 0px"),onChange:this.handleObserve,className:O()("VagueImage",n),ref:function(t){e.wrapperNode=t},style:Object.assign({},f&&{width:"".concat(f,"px")},{},p&&{height:"".concat(p,"px")}),"data-src":r},Object(S.g)("div",{className:O()("VagueImage-mask",{"is-active":!u}),style:s?{backgroundImage:"url(".concat(o,")")}:{}}),u&&Object(S.g)("img",{className:"VagueImage-innerLarge",src:r,alt:a}))}}]),n}(v.Component);R.defaultProps={threshold:200};var E=R},945:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(1),a=n(2),c=n(29),o=n(781),i=n(197),l=function(e){var t=e.className,n=e.onClick,l=e.label,s=e.onRef,u=e.disabled,d=e.showIcon,f=void 0===d||d;return Object(r.c)(a.Fragment,{children:[Object(r.b)(i.c,{keyMap:{BOOKMARK:"s c"},handlers:{BOOKMARK:n}}),Object(r.b)(c.c,{onRef:s,className:t,preset:"plain",onClick:n,icon:f?o.a:null,label:l,disabled:u})]})};l.defaultProps={label:"收藏"};var s=l},946:function(e,t,n){"use strict";var r=n(33),a=n.n(r),c=n(172),o=n(45),i=n.n(o),l=n(2),s=n(58),u=n(1203),d=n(10),f=n.n(d),p=n(165),h=n(819),b=n(5);var m={name:"arfc8v",styles:"font-size:12px;height:20px;line-height:19px;display:flex;align-items:center;&+.Catalog-FirstLevelTitle{margin-top:12px;}&+.Catalog-SecondLevelTitle{margin-top:6px;}"},v={name:"160ybly",styles:"cursor:pointer;align-items:center;"},g=function(e){var t=e.children,n=e.pl,r=e.targetId,o=e.handleScroll,l=e.index,d=i()(e,["children","pl","targetId","handleScroll","index"]);return Object(b.g)(s.h,a()({color:"GBK02A",css:m},d),Object(b.g)(s.d,{pl:n,css:v,"data-catalog-target-id":r,"data-za-detail-view-id":"9745","data-za-detail-view-action":"Click","data-za-detail-view-name":"正文",onClick:function(e){o(e,l)}},Object(b.g)(s.h,{css:Object(c.a)([Object(p.d)(1),{pointerEvents:"none",wordBreak:"break-all"}],"")},t),Object(b.g)(u.a,{size:"20px",css:function(e){var t;return{color:null===(t=e.colors)||void 0===t?void 0:t.GBK08A,flex:"0 0 auto",pointerEvents:"none"}}})))},y={name:"16fhh0i",styles:"&+.Catalog-FirstLevelTitle{margin-top:12px;}&+.Catalog-SecondLevelTitle{margin-top:6px;}"},O=function(e){var t=e.className,n=i()(e,["className"]);return Object(b.g)(g,a()({className:f()(t,"Catalog-FirstLevelTitle"),fontWeight:"bold",css:y},n))},j={name:"q7f27s",styles:"&+.Catalog-FirstLevelTitle{margin-top:12px;}&+.Catalog-SecondLevelTitle{margin-top:0px;}"},C={1:O,2:function(e){var t=e.className,n=i()(e,["className"]);return Object(b.g)(g,a()({className:f()(t,"Catalog-SecondLevelTitle"),pl:"10px",css:j},n))}},k={name:"1objg3t",styles:"font-size:17px;line-height:24px;text-align:center;"},w={name:"8qb8m4",styles:"margin-bottom:48px;"},S={name:"npr4z8",styles:"margin-bottom:18px !important;margin-top:0px !important;"},x={name:"1qxtz39",styles:"font-size:12px;"};t.a=function(e){var t=e.catalog,n=e.className,r=e.inEditor,a=e.scrollOffset,c=void 0===a?0:a,o=Object(l.useCallback)((function(e,t){if(r){var n=document.querySelector(".DraftEditor-editorContainer");if(n){var a=Array.from(n.querySelectorAll("h2,h3"))[t];a&&requestAnimationFrame((function(){return Object(h.a)(a,c)}))}}}),[r,c]);return(null==t?void 0:t.length)?Object(b.g)(s.a,{className:f()(n,"Catalog"),css:w,"data-za-detail-view-name":"正文"},Object(b.g)("h2",{css:S},"目录"),Object(b.g)(s.d,{flexDirection:"column",css:x},t.map((function(e){var t=e.titleLevel,n=e.text,r=e.targetId,a=e.index,c=C[t]||O;return Object(b.g)(c,{key:String([r,a]),targetId:r,handleScroll:o,index:a},n)})))):r?Object(b.g)(s.d,{flexDirection:"column",alignItems:"center",mb:"18px"},Object(b.g)(s.a,{size:"160px",mb:"10px"},Object(b.g)(s.f,{size:"100%",src:"https://pic1.zhimg.com/v2-acf70e51e6f95a027a65a9209fd6a330_r.png"})),Object(b.g)(s.h,{color:"GBK06A",css:k},"在内容中设置标题将会在此处同步展示")):null}},949:function(e,t,n){"use strict";var r=n(59),a=n.n(r),c=n(33),o=n.n(c),i=n(45),l=n.n(i),s=n(2),u=n.n(s),d=n(10),f=n.n(d),p=n(28),h=n(304),b=n.n(h),m=n(7),v=n(813),g=n(356),y=n(222),O=n(167),j=n(876),C=n(864),k=n(825),w=n(5);function S(e){var t=String(e);return t.length<2&&(t="0"+t),t}function x(e){var t=Object(s.useRef)(null),n=e.component,r=void 0===n?"a":n,a=e.className,c=e.onClick,o=e.onMouseDown,i=e.zvideo,l=e.enableInlinePlay,d=void 0!==l&&l,h=e.onImageClick,m=void 0===h?b.a:h,j=e.onInfoClick,x=void 0===j?b.a:j,R=i.id,E=i.title,T=i.url,I=i.imageUrl,P=i.video,L=P.videoId,A=P.duration,_=P.status,M=i.author,z=i.playCount,D=!T?"inlinezvideo":"zvideo";Object(s.useEffect)((function(){Object(v.onViewedOnce)(t.current,(function(){p.a.trackCardShow(t.current,{id:7844},{button:{text:D}})}))}),[D]);var B=Object(s.useCallback)((function(e){p.a.trackEvent(e.target,{id:7846,action:"OpenUrl"},{button:{text:D}}),m(e,i)}),[m,i,D]),V=Object(s.useCallback)((function(e){p.a.trackEvent(e.target,{id:7847,action:"OpenUrl"},{button:{text:D}}),x(e,i)}),[x,i,D]);return"converting_failure"===_?Object(w.g)(N,{error:"视频转码失败，请重新上传视频"}):Object(w.g)(u.a.Fragment,null,Object(w.g)(y.c,{as:r,shouldTrackClick:!0,shouldTrackShow:!0,zaAction:"OpenUrl",zaEventType:"Click",zaBlock:"ZTextZVideoLinkCard",zaType:"Button",extra:{link:{url:T}},className:f()("ZVideoLinkCard",a),ref:t,href:T,target:"_blank",rel:"noopener noreferrer",onClick:c,onMouseDown:o,"data-za-not-track-link":!0,"data-za-module":"Content","data-za-module-info":JSON.stringify({card:{content:{type:"Zvideo",token:R,video_id:L}}})},d?Object(w.g)(C.a,{placeholder:Object(w.g)("div",{className:"ZVideoLinkCard-playerContainer"})},Object(w.g)("div",{className:"ZVideoLinkCard-playerContainer"},Object(w.g)("iframe",{className:"ZVideoLinkCard-player",frameBorder:0,allowFullScreen:!0,src:"https://www.zhihu.com/video/".concat(L)}))):Object(w.g)("div",{className:"ZVideoLinkCard-image",style:{backgroundImage:"url(".concat(I,")")},onClick:B},Object(w.g)(k.a,{className:"ZVideoLinkCard-playIcon"}),Boolean(A)&&Object(w.g)("div",{className:"ZVideoLinkCard-duration"},function(e){if(!Number.isFinite(e))return"";var t=(e=Math.floor(e))%60,n=Math.floor(e/60);return"".concat(S(n),":").concat(S(t))}(A))),Object(w.g)("div",{className:"ZVideoLinkCard-info",onClick:V},Object(w.g)("div",{className:"ZVideoLinkCard-title"},E),Boolean(T)&&Object(w.g)("div",{className:"ZVideoLinkCard-author"},Object(w.g)(O.a,{className:"ZVideoLinkCard-avatar",url:M.avatarUrl,alt:"",size:20,round:!0}),Object(w.g)("div",null,M.name,"的视频"),Boolean(z)&&Object(w.g)("div",null," · ",Object(g.cnNiceNumber)(z),"播放")))))}function N(e){var t=e.error;return Object(w.g)("div",{className:"ZVideoLinkErrorCard"},Object(w.g)("div",{className:"ZVideoLinkErrorCard-message"},t.message||"视频加载错误"))}t.a=function(e){var t=e.id,n=l()(e,["id"]),r=Object(s.useState)(null),c=a()(r,2),i=c[0],u=c[1],d=Object(s.useState)(null),f=a()(d,2),p=f[0],h=f[1];return Object(s.useEffect)((function(){var e="https://www.zhihu.com/api/v4/zvideos/".concat(t,"/card");Object(j.a)(e).then((function(e){return Object(m.camelizeKeys)(e)})).then((function(e){e.error?h(e.error):u(e)})).catch((function(e){h(e)}))}),[t]),p?Object(w.g)(N,{error:p}):i?Object(w.g)(x,o()({zvideo:i},n)):null}},950:function(e,t,n){"use strict";var r=n(2),a=n.n(r),c=n(203),o=n.n(c),i=n(5);t.a=function(e){var t=e.referenceList,n=e.onClick,r=e.listRef;return Object(i.g)(a.a.Fragment,null,Object(i.g)("h2",null,"参考"),Object(i.g)("ol",{className:"ReferenceList",onClick:n,ref:r},o()(t,"refKey").map((function(e){var n=t.filter((function(t){return t.refKey===e.refKey})),r=n.length>1?Object(i.g)(a.a.Fragment,null,Object(i.g)("span",{className:"ReferenceList-backHint","aria-label":"back"},"^"),n.map((function(e,t){var n="".concat(e.refKey,"_").concat(t);return Object(i.g)("sup",{key:n,className:"ReferenceList-backLink"},Object(i.g)("a",{href:"#".concat(n),"data-reference-link":!0},"abcdefghijklmnopqrstuvwxyz"[t%26]))}))):Object(i.g)("a",{className:"ReferenceList-backLink",href:"#".concat(e.refKey,"_0"),"aria-label":"back","data-reference-link":!0},"^");return Object(i.g)("li",{id:e.refKey,key:e.refKey,tabIndex:0},r,e.text&&Object(i.g)("span",null,e.text),e.text&&e.url&&" ",e.url&&Object(i.g)("a",{href:e.url,className:"external",target:"_blank",rel:"noopener noreferrer"},e.url))}))))}},952:function(e,t,n){"use strict";var r=n(61),a=n(2),c=n(819);t.a=function(e,t){var n=Object(r.c)((function(n){return function(e,t,n){if(!e.defaultPrevented&&e.target.matches("a[data-reference-link]")){var r=e.target.getAttribute("href"),a=t.querySelector(r);if(a){if(e.preventDefault(),n.onReferenceClick&&e.target.hasAttribute("aria-labelledby"))return void n.onReferenceClick(e);a.focus({preventScroll:!0}),Object(c.a)(a),document.documentElement.setAttribute("data-focus-visible","")}}}(n,e,t)}));Object(a.useEffect)((function(){if(e)return e.addEventListener("click",n),function(){e.removeEventListener("click",n)}}),[e,n])}},953:function(e,t,n){"use strict";
/** @license React v16.14.0
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(89),a=n(2);function c(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o="function"==typeof Symbol&&Symbol.for,i=o?Symbol.for("react.portal"):60106,l=o?Symbol.for("react.fragment"):60107,s=o?Symbol.for("react.strict_mode"):60108,u=o?Symbol.for("react.profiler"):60114,d=o?Symbol.for("react.provider"):60109,f=o?Symbol.for("react.context"):60110,p=o?Symbol.for("react.concurrent_mode"):60111,h=o?Symbol.for("react.forward_ref"):60112,b=o?Symbol.for("react.suspense"):60113,m=o?Symbol.for("react.suspense_list"):60120,v=o?Symbol.for("react.memo"):60115,g=o?Symbol.for("react.lazy"):60116,y=o?Symbol.for("react.block"):60121,O=o?Symbol.for("react.fundamental"):60117,j=o?Symbol.for("react.scope"):60119;function C(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case l:return"Fragment";case i:return"Portal";case u:return"Profiler";case s:return"StrictMode";case b:return"Suspense";case m:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case f:return"Context.Consumer";case d:return"Context.Provider";case h:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case v:return C(e.type);case y:return C(e.render);case g:if(e=1===e._status?e._result:null)return C(e)}return null}var k=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;k.hasOwnProperty("ReactCurrentDispatcher")||(k.ReactCurrentDispatcher={current:null}),k.hasOwnProperty("ReactCurrentBatchConfig")||(k.ReactCurrentBatchConfig={suspense:null});var w={};function S(e,t){for(var n=0|e._threadCount;n<=t;n++)e[n]=e._currentValue2,e._threadCount=n+1}for(var x=new Uint16Array(16),N=0;15>N;N++)x[N]=N+1;x[15]=0;var R=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E=Object.prototype.hasOwnProperty,T={},I={};function P(e){return!!E.call(I,e)||!E.call(T,e)&&(R.test(e)?I[e]=!0:(T[e]=!0,!1))}function L(e,t,n,r,a,c){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=c}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){A[e]=new L(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];A[t]=new L(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){A[e]=new L(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){A[e]=new L(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){A[e]=new L(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){A[e]=new L(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){A[e]=new L(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){A[e]=new L(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){A[e]=new L(e,5,!1,e.toLowerCase(),null,!1)}));var _=/[\-:]([a-z])/g;function M(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(_,M);A[t]=new L(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(_,M);A[t]=new L(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(_,M);A[t]=new L(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){A[e]=new L(e,1,!1,e.toLowerCase(),null,!1)})),A.xlinkHref=new L("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){A[e]=new L(e,1,!1,e.toLowerCase(),null,!0)}));var z=/["'&<>]/;function D(e){if("boolean"==typeof e||"number"==typeof e)return""+e;e=""+e;var t=z.exec(e);if(t){var n,r="",a=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}a!==n&&(r+=e.substring(a,n)),a=n+1,r+=t}e=a!==n?r+e.substring(a,n):r}return e}function B(e,t){var n,r=A.hasOwnProperty(e)?A[e]:null;return(n="style"!==e)&&(n=null!==r?0===r.type:2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])),n||function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(e,t,r,!1)?"":null!==r?(e=r.attributeName,3===(n=r.type)||4===n&&!0===t?e+'=""':(r.sanitizeURL&&(t=""+t),e+'="'+D(t)+'"')):P(e)?e+'="'+D(t)+'"':""}var V="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},F=null,H=null,U=null,q=!1,W=!1,K=null,G=0;function Q(){if(null===F)throw Error(c(321));return F}function Z(){if(0<G)throw Error(c(312));return{memoizedState:null,queue:null,next:null}}function J(){return null===U?null===H?(q=!1,H=U=Z()):(q=!0,U=H):null===U.next?(q=!1,U=U.next=Z()):(q=!0,U=U.next),U}function Y(e,t,n,r){for(;W;)W=!1,G+=1,U=null,n=e(t,r);return H=F=null,G=0,U=K=null,n}function X(e,t){return"function"==typeof t?t(e):t}function $(e,t,n){if(F=Q(),U=J(),q){var r=U.queue;if(t=r.dispatch,null!==K&&void 0!==(n=K.get(r))){K.delete(r),r=U.memoizedState;do{r=e(r,n.action),n=n.next}while(null!==n);return U.memoizedState=r,[r,t]}return[U.memoizedState,t]}return e=e===X?"function"==typeof t?t():t:void 0!==n?n(t):t,U.memoizedState=e,e=(e=U.queue={last:null,dispatch:null}).dispatch=ee.bind(null,F,e),[U.memoizedState,e]}function ee(e,t,n){if(!(25>G))throw Error(c(301));if(e===F)if(W=!0,e={action:n,next:null},null===K&&(K=new Map),void 0===(n=K.get(t)))K.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}}function te(){}var ne=0,re={readContext:function(e){var t=ne;return S(e,t),e[t]},useContext:function(e){Q();var t=ne;return S(e,t),e[t]},useMemo:function(e,t){if(F=Q(),t=void 0===t?null:t,null!==(U=J())){var n=U.memoizedState;if(null!==n&&null!==t){e:{var r=n[1];if(null===r)r=!1;else{for(var a=0;a<r.length&&a<t.length;a++)if(!V(t[a],r[a])){r=!1;break e}r=!0}}if(r)return n[0]}}return e=e(),U.memoizedState=[e,t],e},useReducer:$,useRef:function(e){F=Q();var t=(U=J()).memoizedState;return null===t?(e={current:e},U.memoizedState=e):t},useState:function(e){return $(X,e)},useLayoutEffect:function(){},useCallback:function(e){return e},useImperativeHandle:te,useEffect:te,useDebugValue:te,useResponder:function(e,t){return{props:t,responder:e}},useDeferredValue:function(e){return Q(),e},useTransition:function(){return Q(),[function(e){e()},!1]}},ae="http://www.w3.org/1999/xhtml";function ce(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}var oe={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},ie=r({menuitem:!0},oe),le={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},se=["Webkit","ms","Moz","O"];Object.keys(le).forEach((function(e){se.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),le[t]=le[e]}))}));var ue=/([A-Z])/g,de=/^ms-/,fe=a.Children.toArray,pe=k.ReactCurrentDispatcher,he={listing:!0,pre:!0,textarea:!0},be=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,me={},ve={};var ge=Object.prototype.hasOwnProperty,ye={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null};function Oe(e,t){if(void 0===e)throw Error(c(152,C(t)||"Component"))}function je(e,t,n){function o(a,o){var i=o.prototype&&o.prototype.isReactComponent,l=function(e,t,n,r){if(r&&("object"==typeof(r=e.contextType)&&null!==r))return S(r,n),r[n];if(e=e.contextTypes){for(var a in n={},e)n[a]=t[a];t=n}else t=w;return t}(o,t,n,i),s=[],u=!1,d={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===s)return null},enqueueReplaceState:function(e,t){u=!0,s=[t]},enqueueSetState:function(e,t){if(null===s)return null;s.push(t)}};if(i){if(i=new o(a.props,l,d),"function"==typeof o.getDerivedStateFromProps){var f=o.getDerivedStateFromProps.call(null,a.props,i.state);null!=f&&(i.state=r({},i.state,f))}}else if(F={},i=o(a.props,l,d),null==(i=Y(o,a.props,i,l))||null==i.render)return void Oe(e=i,o);if(i.props=a.props,i.context=l,i.updater=d,void 0===(d=i.state)&&(i.state=d=null),"function"==typeof i.UNSAFE_componentWillMount||"function"==typeof i.componentWillMount)if("function"==typeof i.componentWillMount&&"function"!=typeof o.getDerivedStateFromProps&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&"function"!=typeof o.getDerivedStateFromProps&&i.UNSAFE_componentWillMount(),s.length){d=s;var p=u;if(s=null,u=!1,p&&1===d.length)i.state=d[0];else{f=p?d[0]:i.state;var h=!0;for(p=p?1:0;p<d.length;p++){var b=d[p];null!=(b="function"==typeof b?b.call(i,f,a.props,l):b)&&(h?(h=!1,f=r({},f,b)):r(f,b))}i.state=f}}else s=null;if(Oe(e=i.render(),o),"function"==typeof i.getChildContext&&"object"==typeof(a=o.childContextTypes)){var m=i.getChildContext();for(var v in m)if(!(v in a))throw Error(c(108,C(o)||"Unknown",v))}m&&(t=r({},t,m))}for(;a.isValidElement(e);){var i=e,l=i.type;if("function"!=typeof l)break;o(i,l)}return{child:e,context:t}}var Ce=function(){function e(e,t){a.isValidElement(e)?e.type!==l?e=[e]:(e=e.props.children,e=a.isValidElement(e)?[e]:fe(e)):e=fe(e),e={type:null,domNamespace:ae,children:e,childIndex:0,context:w,footer:""};var n=x[0];if(0===n){var r=x,o=2*(n=r.length);if(!(65536>=o))throw Error(c(304));var i=new Uint16Array(o);for(i.set(r),(x=i)[0]=n+1,r=n;r<o-1;r++)x[r]=r+1;x[o-1]=0}else x[0]=x[n];this.threadID=n,this.stack=[e],this.exhausted=!1,this.currentSelectValue=null,this.previousWasTextNode=!1,this.makeStaticMarkup=t,this.suspenseDepth=0,this.contextIndex=-1,this.contextStack=[],this.contextValueStack=[]}var t=e.prototype;return t.destroy=function(){if(!this.exhausted){this.exhausted=!0,this.clearProviders();var e=this.threadID;x[e]=x[0],x[0]=e}},t.pushProvider=function(e){var t=++this.contextIndex,n=e.type._context,r=this.threadID;S(n,r);var a=n[r];this.contextStack[t]=n,this.contextValueStack[t]=a,n[r]=e.props.value},t.popProvider=function(){var e=this.contextIndex,t=this.contextStack[e],n=this.contextValueStack[e];this.contextStack[e]=null,this.contextValueStack[e]=null,this.contextIndex--,t[this.threadID]=n},t.clearProviders=function(){for(var e=this.contextIndex;0<=e;e--)this.contextStack[e][this.threadID]=this.contextValueStack[e]},t.read=function(e){if(this.exhausted)return null;var t=ne;ne=this.threadID;var n=pe.current;pe.current=re;try{for(var r=[""],a=!1;r[0].length<e;){if(0===this.stack.length){this.exhausted=!0;var o=this.threadID;x[o]=x[0],x[0]=o;break}var i=this.stack[this.stack.length-1];if(a||i.childIndex>=i.children.length){var l=i.footer;if(""!==l&&(this.previousWasTextNode=!1),this.stack.pop(),"select"===i.type)this.currentSelectValue=null;else if(null!=i.type&&null!=i.type.type&&i.type.type.$$typeof===d)this.popProvider(i.type);else if(i.type===b){this.suspenseDepth--;var s=r.pop();if(a){a=!1;var u=i.fallbackFrame;if(!u)throw Error(c(303));this.stack.push(u),r[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}r[this.suspenseDepth]+=s}r[this.suspenseDepth]+=l}else{var f=i.children[i.childIndex++],p="";try{p+=this.render(f,i.context,i.domNamespace)}catch(e){if(null!=e&&"function"==typeof e.then)throw Error(c(294));throw e}r.length<=this.suspenseDepth&&r.push(""),r[this.suspenseDepth]+=p}}return r[0]}finally{pe.current=n,ne=t}},t.render=function(e,t,n){if("string"==typeof e||"number"==typeof e)return""===(n=""+e)?"":this.makeStaticMarkup?D(n):this.previousWasTextNode?"\x3c!-- --\x3e"+D(n):(this.previousWasTextNode=!0,D(n));if(e=(t=je(e,t,this.threadID)).child,t=t.context,null===e||!1===e)return"";if(!a.isValidElement(e)){if(null!=e&&null!=e.$$typeof){if((n=e.$$typeof)===i)throw Error(c(257));throw Error(c(258,n.toString()))}return e=fe(e),this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),""}var o=e.type;if("string"==typeof o)return this.renderDOM(e,t,n);switch(o){case s:case p:case u:case m:case l:return e=fe(e.props.children),this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),"";case b:throw Error(c(294))}if("object"==typeof o&&null!==o)switch(o.$$typeof){case h:F={};var y=o.render(e.props,e.ref);return y=Y(o.render,e.props,y,e.ref),y=fe(y),this.stack.push({type:null,domNamespace:n,children:y,childIndex:0,context:t,footer:""}),"";case v:return e=[a.createElement(o.type,r({ref:e.ref},e.props))],this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),"";case d:return n={type:e,domNamespace:n,children:o=fe(e.props.children),childIndex:0,context:t,footer:""},this.pushProvider(e),this.stack.push(n),"";case f:o=e.type,y=e.props;var C=this.threadID;return S(o,C),o=fe(y.children(o[C])),this.stack.push({type:e,domNamespace:n,children:o,childIndex:0,context:t,footer:""}),"";case O:throw Error(c(338));case g:switch(function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(o=e.type),o._status){case 1:return e=[a.createElement(o._result,r({ref:e.ref},e.props))],this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),"";case 2:throw o._result;default:throw Error(c(295))}case j:throw Error(c(343))}throw Error(c(130,null==o?o:typeof o,""))},t.renderDOM=function(e,t,n){var o=e.type.toLowerCase();if(n===ae&&ce(o),!me.hasOwnProperty(o)){if(!be.test(o))throw Error(c(65,o));me[o]=!0}var i=e.props;if("input"===o)i=r({type:void 0},i,{defaultChecked:void 0,defaultValue:void 0,value:null!=i.value?i.value:i.defaultValue,checked:null!=i.checked?i.checked:i.defaultChecked});else if("textarea"===o){var l=i.value;if(null==l){l=i.defaultValue;var s=i.children;if(null!=s){if(null!=l)throw Error(c(92));if(Array.isArray(s)){if(!(1>=s.length))throw Error(c(93));s=s[0]}l=""+s}null==l&&(l="")}i=r({},i,{value:void 0,children:""+l})}else if("select"===o)this.currentSelectValue=null!=i.value?i.value:i.defaultValue,i=r({},i,{value:void 0});else if("option"===o){s=this.currentSelectValue;var u=function(e){if(null==e)return e;var t="";return a.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(i.children);if(null!=s){var d=null!=i.value?i.value+"":u;if(l=!1,Array.isArray(s)){for(var f=0;f<s.length;f++)if(""+s[f]===d){l=!0;break}}else l=""+s===d;i=r({selected:void 0,children:void 0},i,{selected:l,children:u})}}if(l=i){if(ie[o]&&(null!=l.children||null!=l.dangerouslySetInnerHTML))throw Error(c(137,o,""));if(null!=l.dangerouslySetInnerHTML){if(null!=l.children)throw Error(c(60));if("object"!=typeof l.dangerouslySetInnerHTML||!("__html"in l.dangerouslySetInnerHTML))throw Error(c(61))}if(null!=l.style&&"object"!=typeof l.style)throw Error(c(62,""))}for(O in l=i,s=this.makeStaticMarkup,u=1===this.stack.length,d="<"+e.type,l)if(ge.call(l,O)){var p=l[O];if(null!=p){if("style"===O){f=void 0;var h="",b="";for(f in p)if(p.hasOwnProperty(f)){var m=0===f.indexOf("--"),v=p[f];if(null!=v){if(m)var g=f;else if(g=f,ve.hasOwnProperty(g))g=ve[g];else{var y=g.replace(ue,"-$1").toLowerCase().replace(de,"-ms-");g=ve[g]=y}h+=b+g+":",b=f,h+=m=null==v||"boolean"==typeof v||""===v?"":m||"number"!=typeof v||0===v||le.hasOwnProperty(b)&&le[b]?(""+v).trim():v+"px",b=";"}}p=h||null}f=null;e:if(m=o,v=l,-1===m.indexOf("-"))m="string"==typeof v.is;else switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":m=!1;break e;default:m=!0}m?ye.hasOwnProperty(O)||(f=P(f=O)&&null!=p?f+'="'+D(p)+'"':""):f=B(O,p),f&&(d+=" "+f)}}s||u&&(d+=' data-reactroot=""');var O=d;l="",oe.hasOwnProperty(o)?O+="/>":(O+=">",l="</"+e.type+">");e:{if(null!=(s=i.dangerouslySetInnerHTML)){if(null!=s.__html){s=s.__html;break e}}else if("string"==typeof(s=i.children)||"number"==typeof s){s=D(s);break e}s=null}return null!=s?(i=[],he.hasOwnProperty(o)&&"\n"===s.charAt(0)&&(O+="\n"),O+=s):i=fe(i.children),e=e.type,n=null==n||"http://www.w3.org/1999/xhtml"===n?ce(e):"http://www.w3.org/2000/svg"===n&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":n,this.stack.push({domNamespace:n,type:o,children:i,childIndex:0,context:t,footer:l}),this.previousWasTextNode=!1,O},e}(),ke={renderToString:function(e){e=new Ce(e,!1);try{return e.read(1/0)}finally{e.destroy()}},renderToStaticMarkup:function(e){e=new Ce(e,!0);try{return e.read(1/0)}finally{e.destroy()}},renderToNodeStream:function(){throw Error(c(207))},renderToStaticNodeStream:function(){throw Error(c(208))},version:"16.14.0"};e.exports=ke.default||ke},954:function(e,t,n){var r=n(567),a=n(569),c=n(390),o=n(568);e.exports=function(e){return r(e)||a(e)||c(e)||o()}},955:function(e,t,n){},956:function(e,t,n){var r=n(566),a=r&&new r;e.exports=a},957:function(e,t){e.exports={}},958:function(e,t,n){var r=n(846),a=n(874),c=n(875),o=n(959);e.exports=function(e){var t=c(e),n=o[t];if("function"!=typeof n||!(t in r.prototype))return!1;if(e===n)return!0;var i=a(n);return!!i&&e===i[0]}},959:function(e,t,n){var r=n(846),a=n(844),c=n(845),o=n(100),i=n(120),l=n(960),s=Object.prototype.hasOwnProperty;function u(e){if(i(e)&&!o(e)&&!(e instanceof r)){if(e instanceof a)return e;if(s.call(e,"__wrapped__"))return l(e)}return new a(e)}u.prototype=c.prototype,u.prototype.constructor=u,e.exports=u},960:function(e,t,n){var r=n(846),a=n(844),c=n(384);e.exports=function(e){if(e instanceof r)return e.clone();var t=new a(e.__wrapped__,e.__chain__);return t.__actions__=c(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}},961:function(e,t,n){"use strict";var r=n(20),a=n.n(r),c=n(21),o=n.n(c),i=n(22),l=n.n(i),s=n(23),u=n.n(s),d=n(13),f=n.n(d),p=n(59),h=n.n(p),b=n(33),m=n.n(b),v=n(45),g=n.n(v),y=n(2),O=n.n(y),j=n(3),C=n.n(j),k=n(18),w=function(e){return O.a.createElement(k.a,e,O.a.createElement("path",{d:"M11.991 3C7.023 3 3 7.032 3 12s4.023 9 8.991 9C16.968 21 21 16.968 21 12s-4.032-9-9.009-9zm6.237 5.4h-2.655a14.084 14.084 0 0 0-1.242-3.204A7.227 7.227 0 0 1 18.228 8.4zM12 4.836A12.678 12.678 0 0 1 13.719 8.4h-3.438A12.678 12.678 0 0 1 12 4.836zM5.034 13.8A7.418 7.418 0 0 1 4.8 12c0-.621.09-1.224.234-1.8h3.042A14.864 14.864 0 0 0 7.95 12c0 .612.054 1.206.126 1.8H5.034zm.738 1.8h2.655a14.084 14.084 0 0 0 1.242 3.204A7.188 7.188 0 0 1 5.772 15.6zm2.655-7.2H5.772a7.188 7.188 0 0 1 3.897-3.204c-.54.999-.954 2.079-1.242 3.204zM12 19.164a12.678 12.678 0 0 1-1.719-3.564h3.438A12.678 12.678 0 0 1 12 19.164zm2.106-5.364H9.894A13.242 13.242 0 0 1 9.75 12c0-.612.063-1.215.144-1.8h4.212c.081.585.144 1.188.144 1.8 0 .612-.063 1.206-.144 1.8zm.225 5.004c.54-.999.954-2.079 1.242-3.204h2.655a7.227 7.227 0 0 1-3.897 3.204zm1.593-5.004c.072-.594.126-1.188.126-1.8 0-.612-.054-1.206-.126-1.8h3.042c.144.576.234 1.179.234 1.8s-.09 1.224-.234 1.8h-3.042z"}))};w.defaultProps={name:"Browser"};var S=w,x=n(802),N=n(807),R=n(10),E=n.n(R),T=n(93),I=n.n(T),P=n(196),L=n(5);var A=function(e){return Object(L.g)("svg",m()({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 12",fill:"currentColor"},e),Object(L.g)("path",{d:"M5,0 C7.7615,0 10,2.074 10,4.632 C10,8 8.681,9.6805 6.043,11.657 C5.463,12.0915 4.6455,12.1135 4.041,11.722 L3.952,11.66 L3.766,11.5195 C1.2555,9.5815 0,8 0,4.632 C0,2.074 2.2385,0 5,0 Z M5,1.5 C3.0425,1.5 1.5,2.929 1.5,4.632 C1.5,7.1075 2.159,8.3245 4.368,10.0855 L4.672,10.3235 L4.8565,10.463 C4.926,10.508 5.033,10.5115 5.109,10.4765 L5.144,10.4565 C7.708,8.535 8.5,7.2275 8.5,4.631 C8.5,2.9295 6.9575,1.5 5,1.5 Z M5,3 C5.82842712,3 6.5,3.67157288 6.5,4.5 C6.5,5.32842712 5.82842712,6 5,6 C4.17157288,6 3.5,5.32842712 3.5,4.5 C3.5,3.67157288 4.17157288,3 5,3 Z"}))},_=[{id:"4",url:"https://m.yaochufa.com/d_142935?payChannel=5df72913c00a7",banner:"https://pic4.zhimg.com/80/v2-ea9684815413107f1847bc1f198711c3.jpg",name:"融创雪世界，畅享冰雪狂欢",priceText:"¥180 起",province:"广东",city:"广州",source:"要出发",type:"门票"},{id:"7",url:"https://m.yaochufa.com/d_131732?payChannel=5df72913c00a7",banner:"https://pic3.zhimg.com/80/v2-9a8bbc609b0d170b888eede800041676.jpg",name:"长隆香江酒店（野生动物世界店）",priceText:"¥666 起",province:"广东",city:"广州",source:"要出发",type:"酒景套餐"},{id:"8",url:"https://m.yaochufa.com/d_179094?payChannel=5df72913c00a7",banner:"https://pic3.zhimg.com/80/v2-ed46b402a13c20e13ce50bace5b4fe1a.jpg",name:"北京欢乐谷",priceText:"¥66.6 起",province:"北京",city:"北京",source:"要出发",type:"门票"},{id:"11",url:"https://m.yaochufa.com/d_25830?payChannel=5df72913c00a7",banner:"https://pic2.zhimg.com/80/v2-3da17340263451c52311f12b252adb2c.png",name:"古北水镇－古北之光温泉度假酒店",priceText:"¥1190 起",province:"北京",city:"北京",source:"要出发",type:"酒景套餐"},{id:"13",url:"https://m.yaochufa.com/d_25600?payChannel=5df72913c00a7",banner:"https://pic1.zhimg.com/80/v2-7a2fbc319c89b875ad25fed75222f358.jpg",name:"北京 古北水镇-梨园客栈，京剧往事",priceText:"¥540 起",province:"北京",city:"北京",source:"要出发",type:"酒景套餐"},{id:"17",url:"https://m.yaochufa.com/d_177004?payChannel=5df72913c00a7",banner:"https://pic2.zhimg.com/80/v2-5a410355e749b9bee787883b4dd3d861.jpg",name:"上海野生动物园",priceText:"¥65 起",province:"上海",city:"上海",source:"要出发",type:"门票"},{id:"19",url:"https://m.yaochufa.com/d_23067?payChannel=5df72913c00a7",banner:"https://pic3.zhimg.com/80/v2-73fe1fe0945a3cde3fd62539f2a811b2.jpg",name:"上海迪士尼乐园酒店",priceText:"¥1505 起",province:"上海",city:"上海",source:"要出发",type:"酒景套餐"},{id:"23",url:"https://m.yaochufa.com/d_19258?payChannel=5df72913c00a7",banner:"https://pic4.zhimg.com/80/v2-9964b6bf9b1bb8c4c04e366b23532dc7.jpg",name:"横店圆明新园，重现百年辉煌历史",priceText:"¥160 起",province:"浙江",city:"金华",source:"要出发",type:"门票"},{id:"26",url:"https://m.yaochufa.com/d_12373?payChannel=5df72913c00a7",banner:"https://pic3.zhimg.com/80/v2-7bd5e8d2c164058627e4d703de7dd4fe.jpg",name:"宋城千古情景区，宋文化主题游",priceText:"¥290 起",province:"浙江",city:"杭州",source:"要出发",type:"门票"},{id:"34",url:"https://m.yaochufa.com/d_14155?payChannel=5df72913c00a7",banner:"https://pic3.zhimg.com/80/v2-5de0708096f517c04df8e25b73fae3a2.jpg",name:"环球恐龙城恐龙主题度假酒店",priceText:"¥519 起",province:"江苏",city:"常州",source:"要出发",type:"酒景套餐"}];var M=n(42),z=function(e){return Object(L.g)("div",e,Object(L.g)("span",null),Object(L.g)("span",null))},D=function(e){var t=I()(e,["entityType","entityData"]),n=t.target,r=t.url,a=t.image,c=t.imageWidth,o=t.imageHeight,i=t.component,l=t.size,s=t.className,u=g()(t,["target","url","image","imageWidth","imageHeight","component","size","className"]);return Object(L.g)(i,m()({target:n,href:r,"data-draft-node":"block","data-draft-type":"link-card","data-is-ecommerce":"1","data-image":a},c&&{"data-image-width":c},o&&{"data-image-height":o},l&&{"data-size":l},{className:E()("LinkCard",s)},u),Object(L.g)("span",{className:"LinkCard-content LinkCard-ecommerceLoadingCard"},Object(L.g)("div",{className:"LinkCard-ecommerceLoadingCardAvatarWrapper"},Object(L.g)("img",{src:"https://pic2.zhimg.com/v2-1b0bbef27f0496a58468f92d94c8a80e_l.png",className:"LinkCard-ecommerceLoadingCardNetwork"})),Object(L.g)(z,{className:"LinkCard-ecommerceLoadingCardLoadingbar"})))};function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return u()(this,n)}}var V=function(){return Object(L.g)("div",{className:"LinkCard-image LinkCard-image--default"},Object(L.g)(S,{size:32}))},F=/^https?:\/\/link\.zhihu\.com/,H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e;if(F.test(e)){var n=e.match(/target=([^=]+)/)||[],r=h()(n,2),a=r[1];a&&(t=decodeURIComponent(a))}var c=t.split("/"),o=h()(c,3),i=o[2];return i||""},U=function(e){l()(n,e);var t=B(n);function n(){return a()(this,n),t.apply(this,arguments)}return o()(n,[{key:"renderLinkMeta",value:function(){var e=this.props,t=e.url,n=e.entityType,r=e.entityData,a=H(t);if(n&&r&&"job"===n){var c=r.salary,o=r.city,i=r.location,l=r.seniority,s=r.education;return Object(L.g)("span",{className:"LinkCard-meta"},Object(L.g)("span",{className:"LinkCard-textMeta"},l&&Object(L.g)("span",{className:"LinkCard-metaItem"},l),s&&Object(L.g)("span",{className:"LinkCard-metaItem"},s),(o||i)&&Object(L.g)("span",{className:"LinkCard-metaItem"},o,Object(L.g)("span",{className:"LinkCard-metaItem-jobLocation"},i))),c&&Object(L.g)("span",{className:"LinkCard-badge"},c))}return Object(L.g)("span",{className:"LinkCard-meta"},Object(L.g)(x.a,{size:17,center:!0}),a)}},{key:"render",value:function(){var e=I()(this.props,["entityType","entityData"]),t=e.text,n=e.target,r=e.url,a=e.image,c=e.imageWidth,o=e.imageHeight,i=e.component,l=e.className,s=e.size,u=g()(e,["text","target","url","image","imageWidth","imageHeight","component","className","size"]);if(function(e){var t;return"ECOMMERCE"===Object(M.parse)(null===(t=e.split("?"))||void 0===t?void 0:t[1]).BIZ}(r))return Object(L.g)(D,this.props);var d=function(e){try{return _.find((function(t){return decodeURIComponent(e).includes(t.url)}))}catch(e){return null}}(r);if(d){var f=d.name,p=d.url,h=d.banner,b=d.source,v=d.type,y=d.priceText,O=d.province,j=d.city;return Object(L.g)(i,m()({target:n,href:p,"data-draft-node":"block","data-draft-type":"link-card","data-image":h,"data-image-width":"","data-image-height":"",className:E()("LinkCard","TravelMVPLinkCard",l)},u),Object(L.g)("div",{className:"TravelMVPLinkCard-main"},Object(L.g)("div",{className:"TravelMVPLinkCard-banner"},Object(L.g)("img",{src:Object(P.imgUrl)(h,"xll"),alt:"商品图片"})),Object(L.g)("div",{className:"TravelMVPLinkCard-core"},Object(L.g)("div",{className:"TravelMVPLinkCard-info"},Object(L.g)("div",{className:"TravelMVPLinkCard-name"},f),Object(L.g)("div",{className:"TravelMVPLinkCard-tags"},b," · ",v)),Object(L.g)("div",{className:"TravelMVPLinkCard-priceArea"},Object(L.g)("div",{className:"TravelMVPLinkCard-priceText"},y),Object(L.g)("div",{role:"button",className:"TravelMVPLinkCard-buyButton"},"去购买",Object(L.g)(N.a,{size:18,center:!0}))),Object(L.g)("div",{className:"TravelMVPLinkCard-location"},Object(L.g)(A,{width:"12",height:"12"}),!["北京","上海"].includes(O)&&Object(L.g)("span",{className:"TravelMVPLinkCard-locationTag"},O),Object(L.g)("span",{className:"TravelMVPLinkCard-locationTag"},j)))))}var C=function(e,t){if(e>0&&t>0){var n=e/t;if(n>1.2)return{modifier:"horizontal",size:"180x120"};if(n<=.8)return{modifier:"vertical",size:"120x160"}}return{modifier:"square",size:"ipico"}}(c,o),k=C.modifier,w=C.size,S=!a&&function(e){var t=H(e);return"zhihu.com"===t||t.endsWith(".zhihu.com")}(r)?"https://zhstatic.zhihu.com/assets/zhihu/editor/zhihu-card-default.svg":Object(P.imgUrl)(a,w);return Object(L.g)(i,m()({target:n,href:r,"data-draft-node":"block","data-draft-type":"link-card"},S&&{"data-image":S},c&&{"data-image-width":c},o&&{"data-image-height":o},s&&{"data-size":s},{className:E()("LinkCard",l,{"LinkCard--hasImage":Boolean(S),"LinkCard--noImage":!S})},u),S&&Object(L.g)("span",{className:"LinkCard-backdrop",style:{backgroundImage:"url(".concat(S,")")}}),Object(L.g)("span",{className:"LinkCard-content"},Object(L.g)("span",{className:"LinkCard-text"},Object(L.g)("span",{className:"LinkCard-title","data-text":!0},t),this.renderLinkMeta()),Object(L.g)("span",{className:"LinkCard-imageCell"},S?Object(L.g)("img",{className:E()("LinkCard-image","LinkCard-image--".concat(k)),alt:"图标",src:S}):Object(L.g)(V,null))))}}]),n}(O.a.Component);U.propTypes={component:C.a.oneOfType([C.a.string,C.a.func]),target:C.a.string,url:C.a.string.isRequired,text:C.a.string.isRequired,image:C.a.string,imageWidth:C.a.oneOfType([C.a.string,C.a.number]),imageHeight:C.a.oneOfType([C.a.string,C.a.number])},U.defaultProps={component:"a",target:"_blank"};t.a=U},962:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(2),a=n.n(r),c=n(10),o=n.n(c),i=n(356),l=n(5),s=[{extensionList:["doc","docx","txt"],type:"doc"},{extensionList:["jpg","jpeg","png","bmp"],type:"image"},{extensionList:["mp3","aac"],type:"music"},{extensionList:["pdf"],type:"pdf"},{extensionList:["xls","xlsx","csv"],type:"table"},{extensionList:["torrent"],type:"torrent"},{extensionList:["mp4","flv"],type:"video"},{extensionList:["zip","rar","7z"],type:"zip"},{extensionList:[""],type:"folder"}];var u=function(e){var t=e.className,n=e.isDirectory,r=void 0!==n&&n,a=e.extension,c=function(e){return"https://zhstatic.zhihu.com/assets/zhihu-components/file-icon/zhimg_answer_editor_file_".concat(e,".svg")}(r?"folder":function(e){var t=s.find((function(t){return t.extensionList.includes(e)}));return t?t.type:"other"}(a));return Object(l.g)("img",{className:o()("FileExtensionIcon",t),src:c})},d={baidu:"百度网盘"};var f=function(e){var t=e.component,n=void 0===t?"a":t,r=e.className,c=e.href,s=e.type,f=void 0===s?"file":s,p=e.name,h=e.extension,b=e.size,m=e.source,v=e.onRef,g=e.onClick,y=e.onMouseDown,O=Number(b);return Object(l.g)(n,{className:o()("FileLinkCard",r),href:c,target:"_blank",rel:"noopener noreferrer","data-za-detail-view-id":7693,ref:v,onClick:g,onMouseDown:y},Object(l.g)(u,{className:"FileLinkCard-icon",isDirectory:"directory"===f,extension:h}),Object(l.g)("div",{className:"FileLinkCard-info"},Object(l.g)("div",{className:"FileLinkCard-name"},p),Object(l.g)("div",{className:"FileLinkCard-meta"},Boolean(O)&&Object(l.g)("div",{className:"FileLinkCard-size"},Object(i.unitPrefix)(O)),Boolean(O)&&m&&Object(l.g)(a.a.Fragment,null," · "),m&&Object(l.g)("div",{className:"FileLinkCard-source"},function(e){return d[e]||e}(m)))))}},965:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n(2);var r=n(3),a=n.n(r),c=n(61),o=n(5);function i(e){var t=e.id,r=e.parentType,a=e.parentId,i=e.suger,l=e.data,s=e.isEditor,u=void 0!==s&&s,d=Object(c.d)((function(){return n.e(3).then(n.bind(null,2420))}),t);return d?Object(o.g)(d,{id:t,parentType:r,urlToken:a,suger:i,data:l,isEditor:u}):null}i.propTypes={id:a.a.string.isRequired,parentType:a.a.oneOf(["answer","article"]),parentId:a.a.string,suger:a.a.object,data:a.a.object,isEditor:a.a.bool};var l=i},966:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(0),a=n(6),c=n(26),o=n(24),i=Object(a.a)("user",["UPDATE_FOLLOWERS_PIN"]).UPDATE_FOLLOWERS_PIN;function l(e,t,n){return function(a,l){var s=l(),u=s.entities.users,d=s.currentUser,f=u[e];return a(n?Object(c.h)(o.S.blocked,"red"):{urlToken:d,userUrlToken:e,expect:t,API:{types:i,endpoint:"members/".concat(e,"/followers"),method:t?"POST":"DELETE"},UPDATE:{request:{users:Object(r.a)({},e,{isFollowing:t})},failure:{users:Object(r.a)({},e,f)},success:function(t){return{users:Object(r.a)({},e,t)}}}})}}},968:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(2)),o=n(1055);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){var e,n,r;i(this,t);for(var a=arguments.length,c=Array(a),s=0;s<a;s++)c[s]=arguments[s];return n=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.state={inView:!1},r.node=null,r.handleNode=function(e){r.node&&(0,o.unobserve)(r.node),r.node=e,r.observeNode(),r.props.innerRef&&r.props.innerRef(e)},r.handleChange=function(e){r.setState({inView:e}),r.props.onChange&&r.props.onChange(e)},l(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidUpdate",value:function(e,t){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold||((0,o.unobserve)(this.node),this.observeNode()),t.inView!==this.state.inView&&this.state.inView&&this.props.triggerOnce&&((0,o.unobserve)(this.node),this.node=null)}},{key:"componentWillUnmount",value:function(){this.node&&((0,o.unobserve)(this.node),this.node=null)}},{key:"observeNode",value:function(){if(this.node){var e=this.props,t=e.threshold,n=e.root,r=e.rootMargin,a=e.rootId;(0,o.observe)(this.node,this.handleChange,{threshold:t,root:n,rootMargin:r},a)}}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.render,a=e.tag,o=(e.innerRef,e.triggerOnce,e.threshold,e.root,e.rootId,e.rootMargin,function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","render","tag","innerRef","triggerOnce","threshold","root","rootId","rootMargin"])),i=this.state.inView;return c.createElement(a,r({},o,{ref:this.handleNode}),"function"==typeof n?n(i):null,"function"==typeof t?t(i):t)}}]),t}(c.Component);s.defaultProps={tag:"div",threshold:0,triggerOnce:!1},t.default=s},969:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return c}));var r=Object.freeze({DOM:{PLAY:"event/dom/play",PLAYING:"event/dom/playing",PAUSE:"event/dom/pause",ENDED:"event/dom/ended",TIMEUPDATE:"event/dom/timeupdate",ERROR:"event/dom/error",WAITING:"event/dom/waiting"},PLAYER:{QUALITY_CHANGE:"event/player/quality-change",REQUEST_PLAY:"event/player/request-play",PLAY_REJECTED:"event/player/play-rejected",REQUEST_PAUSE:"event/player/request-pause",PLAY_COUNT:"event/player/play-count",PLAY_FAILED:"event/player/play-failed",ENTER_FULLSCREEN:"event/player/enter-fullscreen",EXIT_FULLSCREEN:"event/player/exit-fullscreen",ENTER_PIP:"event/player/enter-pip",EXIT_PIP:"event/player/exit-pip"}}),a=Object.freeze({PLAYER:{PLAY:"action/player/play",PAUSE:"action/player/pause",SET_VOLUME:"action/player/set-volume",ENTER_FULLSCREEN:"action/player/enter-fullscreen",EXIT_FULLSCREEN:"action/player/exit-fullscreen",ENTER_PIP:"action/player/enter-pip",EXIT_PIP:"action/player/exit-pip",TIME_UPDATE:"action/player/time-update"}});function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*",n=arguments.length>2?arguments[2]:void 0;function r(r){function a(a){var c=a.origin||a.originalEvent.origin,o="*"===t||t===c,i=a.data||{},l=i.from,s=i.id,u=i.payload;if(o&&"griffith"===l&&(!n||e===s)&&u){var d=u.messageName,f=u.data;d&&r(d,f,a.source)}}return window.addEventListener("message",a),{unsubscribe:function(){return window.removeEventListener("message",a)}}}function a(n,r,a){n&&n.postMessage&&n.postMessage({from:"griffith",id:e,payload:{messageName:r,data:a}},t||"*")}return{subscribeMessage:r,dispatchMessage:a}}},972:function(e,t,n){"use strict";var r=n(20),a=n.n(r),c=n(21),o=n.n(c),i=n(22),l=n.n(i),s=n(23),u=n.n(s),d=n(13),f=n.n(d),p=n(33),h=n.n(p),b=n(3),m=n.n(b),v=n(2),g=n(825),y=n(5);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return u()(this,n)}}var j=function(e){l()(n,e);var t=O(n);function n(){return a()(this,n),t.apply(this,arguments)}return o()(n,[{key:"renderThumbnail",value:function(){var e=this.props.error;return Object(y.g)("div",{className:"VideoErrorCard-thumbnail"},Object(y.g)("div",{className:"VideoErrorCard-error"},e.message||"错误"))}},{key:"render",value:function(){var e=this.props,t=e.isLens,n=e.id;return Object(y.g)("div",{className:"VideoErrorCard"},Object(y.g)(g.b,h()({},this.props,t&&{playerUrl:"https://www.zhihu.com/video/".concat(n)},{thumbnail:this.renderThumbnail(),showPlayButton:!1,onBeforePlay:function(){return!1}})))}}]),n}(v.Component);j.propTypes={error:m.a.object.isRequired};t.a=j},973:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stripHTML=t.truncateHTML=t.parseTag=t.parseTagGroup=t.parseAttrs=t.TAG_RE=t.TAG_RE_TEMPLATE=void 0;var r=n(1043);Object.defineProperty(t,"TAG_RE_TEMPLATE",{enumerable:!0,get:function(){return r.TAG_RE_TEMPLATE}}),Object.defineProperty(t,"TAG_RE",{enumerable:!0,get:function(){return r.TAG_RE}}),Object.defineProperty(t,"parseAttrs",{enumerable:!0,get:function(){return r.parseAttrs}}),Object.defineProperty(t,"parseTagGroup",{enumerable:!0,get:function(){return r.parseTagGroup}}),Object.defineProperty(t,"parseTag",{enumerable:!0,get:function(){return r.parseTag}}),Object.defineProperty(t,"truncateHTML",{enumerable:!0,get:function(){return r.truncateHTML}}),Object.defineProperty(t,"stripHTML",{enumerable:!0,get:function(){return r.stripHTML}})},974:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=c(n(399)),a=c(n(400));function c(e){return e&&e.__esModule?e:{default:e}}var o=function(e){if(204===e.status)return!1;if("0"===e.headers.get("content-length"))return!1;var t=e.headers.get("content-type");return t&&-1!==t.indexOf("application/json")},i=function(e){return e.ok?o(e)?e.json():e.text():o(e)?e.json().then((function(t){return Promise.reject(Object.assign({},t,{status:e.status}))})):e.text().then((function(t){return Promise.reject(new a.default(e,{text:t}))}))},l=(0,r.default)(fetch),s=function(e,t){return l(e,t).then(i)};t.default=s},975:function(e,t,n){var r=n(896)(!0);e.exports=r},977:function(e,t,n){"use strict";n.d(t,"a",(function(){return Pe}));var r=n(59),a=n.n(r),c=n(33),o=n.n(c),i=n(45),l=n.n(i),s=n(3),u=n.n(s),d=n(2),f=n.n(d),p=n(10),h=n.n(p),b=n(165),m=n(975),v=n.n(m),g=n(78),y=n.n(g),O=n(954),j=n.n(O),C=function(e){var t=j()(e.children),n=t[0],r=t.slice(1);return n.apply(void 0,y()(r))},k=n(830),w=n(961),S=n(819),x=n(5),N=/<a\b([^>]*data-draft-type="link-card"[^>]*)>(.*?)<\/a>/g,R=function(e){return e?e.replace(N,(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=Object(S.d)(t,{decodeValue:!0}),a=r.target,c=void 0===a?"_blank":a,o=r.href,i=void 0===o?"":o,l=r["data-image"],s=r["data-image-width"],u=r["data-image-height"],d=r["data-entity-type"],f=r["data-entity-data"],p=r["data-size"],h=n.replace(/<[^>]*>/g,"");return h=Object(S.b)(h),i.match(/https:\/\/www.zhihu.com\/zvideo\/(\d+)$/)&&!h&&(h="知乎视频"),Object(k.renderToStaticMarkup)(Object(x.g)(w.a,{text:h,url:i,target:c,image:l,imageWidth:s,imageHeight:u,entityType:d,entityData:Object(S.e)(f),size:p}))})):e},E=n(962),T=/<a\b([^>]*data-draft-type="file-link-card"[^>]*)>(.*?)<\/a>/g,I=function(e){return e?e.replace(T,(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=Object(S.d)(t,{decodeValue:!0}),a=r.href,c=void 0===a?"":a,o=r["data-file-type"],i=r["data-file-extension"],l=r["data-file-size"],s=r["data-file-source"],u=Object(S.b)(n);return Object(k.renderToStaticMarkup)(Object(x.g)(E.a,{href:c,name:u,type:o,extension:i,size:l,source:s}))})):e},P=/<p><br><\/p>/g,L=function(e){return e?e.replace(P,'<p class="ztext-empty-paragraph"><br /></p>'):e},A=n(850),_=n(871),M=function(e){Object(d.useEffect)((function(){e&&Array.from(e.querySelectorAll("img[eeimg]")).forEach((function(e){e.setAttribute("data-formula",e.alt),e.alt="[公式]"}))}),[e])},z=n(952),D=n(28),B=function(e){var t=Object(d.useCallback)((function(t){!function(e,t){if(!e.defaultPrevented&&e.target.matches("[data-catalog-target-id]")){var n=e.target.getAttribute("data-catalog-target-id");D.a.trackEvent(e.target);var r=t.querySelector("#"+n);r&&(e.preventDefault(),Object(S.a)(r))}}(t,e)}),[e]);Object(d.useEffect)((function(){if(e)return e.addEventListener("click",t),function(){e.removeEventListener("click",t)}}),[e,t])},V=n(304),F=n.n(V),H=n(43),U=function(e){return function(t,n){var r=Object(d.useState)(null),c=a()(r,2),i=c[0],l=c[1],s=e.idAttr,u=e.selector,f=e.component,p=e.targetClassName,h=e.cardDataFilter,b=s&&u&&p&&Object(d.useCallback)(function(e){var t=e.idAttr,n=e.targetClassName;return function(e){var r=e.getAttribute(t),a=document.createElement("div");return a.className=n,e.parentNode.replaceChild(a,e),{data:{id:r},target:a}}}({idAttr:s,targetClassName:p}),[s,p]),m=Object(d.useMemo)((function(){return b?function(e){return Array.from(e.querySelectorAll(u)).map(b)}:F.a}),[b,t,u]);return Object(d.useEffect)((function(){if(t||u&&h){var e=(h||m)(t).map((function(e){var t=e.data,r=e.target;return Object(H.createPortal)(Object(x.g)(f,o()({key:t.id,id:t.id},n)),r)}));e.length>0&&l(e)}}),[t]),i}},q=U({cardDataFilter:function(e){return Array.from(e.getElementsByTagName("a")).map((function(e){var t,n=e.getAttribute("href"),r="link-card"===e.getAttribute("data-draft-type");if(!n||!r)return null;var a=null===(t=n.match(/https:\/\/www.zhihu.com\/zvideo\/(\d+)$/))||void 0===t?void 0:t[1];if(a){var c=document.createElement("div");return c.className="RichText-ZVideoLinkCardContainer",e.parentNode.replaceChild(c,e),{data:{id:a},target:c}}return null})).filter(Boolean)},component:n(949).a}),W=n(222),K=n(7),G=n(876),Q=n(394),Z=n.n(Q),J=n(358),Y=n.n(J),X=n(196),$=n(356);function ee(){var e=Z()(["","的文章"]);return ee=function(){return e},e}var te=function(e){var t=e.authorName,n=e.voteupCount;return Object(x.g)(f.a.Fragment,null,Y()(ee(),t),n>=100&&" · ".concat(Object($.cnNiceNumber)(n),"赞同"))};function ne(e){var t=e.cardRef,n=e.useOpenArticleButton,r=e.handleClickLink,a=e.title,c=e.excerptText,o=e.imgUrlSrc,i=e.voteupCount,l=e.commentCount;return Object(x.g)("div",{className:"ArticleLinkCard",ref:t},Object(x.g)("span",{className:"ArticleLinkCard-title"},a),Boolean(c)&&Object(x.g)("div",{className:"ArticleLinkCard-excerpt"},c),o&&Object(x.g)("div",{className:"ArticleLinkCard-imageWrapper"},Object(x.g)("img",{src:Object(X.imgUrl)(o,"540x300"),className:"ArticleLinkCard-image",alt:""})),Object(x.g)("div",{className:"ArticleLinkCard-bottom"},Object(x.g)("span",{className:"ArticleLinkCard-hint"},"".concat(Object($.cnNiceNumber)(i),"赞同 · ").concat(Object($.cnNiceNumber)(l),"评论")),n&&Object(x.g)("span",{onClick:r,className:"ArticleLinkCard-hybridLink"},"查看完整文章")),Object(x.g)("div",{className:"ArticleLinkCard-bottomCardGradient"}))}function re(e){var t=e.cardRef,n=e.useOpenArticleButton,r=e.handleClickLink,a=e.title,c=e.content,o=e.imgUrlSrc,i=e.voteupCount,l=e.authorName,s=e.avatarUrl;return Object(x.g)("div",{className:"ArticleLinkCard AvatarArticleLinkCard",ref:t},Object(x.g)("div",{className:"AvatarArticleLinkCard-info"},Object(x.g)("div",{className:"AvatarArticleLinkCard-hint"},s&&Object(x.g)("img",{className:"AvatarArticleLinkCard-avatar",src:s,alt:""}),Object(x.g)(te,{authorName:l,voteupCount:i})),n&&Object(x.g)("span",{onClick:r,className:"AvatarArticleLinkCard-hybridLink"},"查看全文")),Object(x.g)("span",{className:"ArticleLinkCard-title"},a),Object(x.g)("div",{className:h()("ArticleLinkCard-content",{"ArticleLinkCard-content--noImg":!o})},Object(x.g)("div",{dangerouslySetInnerHTML:{__html:c}})),!o&&Object(x.g)("span",{className:"AvatarArticleLinkCard-more"},"更多内容"),o&&Object(x.g)("img",{className:"AvatarArticleLinkCard-image",src:o,alt:""}))}function ae(e){var t=e.cardRef,n=e.useOpenArticleButton,r=e.handleClickLink,a=e.title,c=e.content,o=e.imgUrlSrc,i=e.voteupCount,l=e.authorName;return Object(x.g)("div",{className:"ArticleLinkCard QuoteArticleLinkCard",ref:t},Object(x.g)("span",{className:"ArticleLinkCard-title"},a),Object(x.g)("div",{className:"QuoteArticleLinkCard-hint"},Object(x.g)(te,{authorName:l,voteupCount:i})),Object(x.g)("div",{className:h()("ArticleLinkCard-content QuoteArticleLinkCard-content",{"ArticleLinkCard-content--noImg":!o})},Object(x.g)("div",{dangerouslySetInnerHTML:{__html:c}})),!o&&n&&Object(x.g)("div",{onClick:r,className:"QuoteArticleLinkCard-hybridLink"},"查看全文"),o&&Object(x.g)("img",{className:"QuoteArticleLinkCard-image",src:o,alt:""}))}function ce(e){var t=e.article,n=t.title,r=t.excerpt,a=t.content,c=t.imageUrl,o=t.voteupCount,i=t.commentCount,l=t.author,s=void 0===l?{}:l,u=e.styleAbParam,f=e.cardRef,p=e.useOpenArticleButton,h=e.handleClickLink,b=Object(d.useMemo)((function(){var e=document.createElement("div");return e.innerHTML=r,e.textContent}),[r]),m=s.name,v=s.avatarUrl;return"1"===u?Object(x.g)(re,{cardRef:f,useOpenArticleButton:p,handleClickLink:h,title:n,content:a,imgUrlSrc:c,voteupCount:o,authorName:m,avatarUrl:v}):"2"===u?Object(x.g)(ae,{cardRef:f,useOpenArticleButton:p,handleClickLink:h,title:n,content:a,imgUrlSrc:c,voteupCount:o,authorName:m}):Object(x.g)(ne,{cardRef:f,useOpenArticleButton:p,handleClickLink:h,title:n,excerptText:b,imgUrlSrc:c,voteupCount:o,commentCount:i})}var oe=function(e){var t=e.article.id,n=e.article,r=e.useOpenArticleButton,a=e.enableZa,c=e.styleAbParam,o=Object(d.useRef)(null);Object(d.useEffect)((function(){a&&(D.a.setModule(o.current,{module:"Content"},{card:{content:{type:"Post",token:String(t)}}}),D.a.trackCardShow(o.current,{id:8589,element:"Card"}))}),[a,t]);var i="https://zhuanlan.zhihu.com/p/".concat(t),l=Object(d.useCallback)((function(){a&&D.a.trackEvent(o.current,{id:8590,action:"OpenUrl",element:"Card"})}),[a]);return Object(x.g)(W.c,{as:"a",shouldTrackShow:!0,shouldTrackClick:!0,zaBlock:"ZTextArticleLinkCard",zaAction:"OpenUrl",zaType:"Button",zaEventType:"Click",extra:{link:{url:i}},href:i,"data-za-not-track-link":!0,onClick:l,rel:"noopener noreferrer",target:"_blank"},Object(x.g)(ce,{styleAbParam:c,cardRef:o,useOpenArticleButton:r,linkUrl:i,handleClickLink:l,article:n}))},ie=U({cardDataFilter:function(e){return Array.from(e.getElementsByTagName("a")).map((function(e){var t,n=e.getAttribute("href"),r="link-card"===e.getAttribute("data-draft-type"),a="normal"===e.getAttribute("data-size");if(!n||!r||!a)return null;var c=null===(t=n.match(/https:\/\/zhuanlan.zhihu.com\/p\/(\d+)$/))||void 0===t?void 0:t[1];if(c){var o=document.createElement("div");return o.className="RichText-ArticleLinkCardContainer",e.parentNode.replaceChild(o,e),{data:{id:c},target:o}}return null})).filter(Boolean)},component:function(e){var t=e.id,n=e.useOpenArticleButton,r=e.enableZa,c=e.styleAbParam,i=l()(e,["id","useOpenArticleButton","enableZa","styleAbParam"]),s=Object(d.useState)(null),u=a()(s,2),f=u[0],p=u[1],h=Object(d.useState)(null),b=a()(h,2),m=b[0],v=b[1],g=c&&["1","2"].includes(c)?"1":"0";return Object(d.useEffect)((function(){var e="https://www.zhihu.com/api/v4/articles/".concat(t,"?is_article_card=").concat(g);Object(G.a)(e).then((function(e){return Object(K.camelizeKeys)(e)})).then((function(e){e.error?v(e.error.message):p(e)})).catch((function(e){v(e.message||"未知错误")}))}),[t,g]),m?Object(x.g)("div",{className:"ArticleLinkCard-error"},m):f?Object(x.g)(oe,o()({article:f,useOpenArticleButton:n,enableZa:r,styleAbParam:c},i)):Object(x.g)("div",{className:"ArticleLinkCard-loading"},"加载中...")}}),le=U({idAttr:"data-ad-id",selector:"a[data-ad-id]",targetClassName:"RichText-ADLinkCardContainer",component:n(965).a}),se=n(878),ue=U({idAttr:"data-mcn-id",selector:"a[data-mcn-id]",targetClassName:"RichText-MCNLinkCardContainer",component:se.c}),de=n(813),fe=function(e){var t=Object(K.camelizeKeys)(e),n=t.resourceName,r=t.button,a=r.url,c=r.text,o=t.title,i=t.cover,l=t.price,s=t.source,u=void 0===s?"知乎":s;return{url:a,buttonText:c,title:o,imgUrl:i,price:l,authorText:t.desc,heatText:t.footer,producer:n,source:u}},pe=U({idAttr:"data-sku-id",selector:"a[data-sku-id]",targetClassName:"RichText-MkSkuLinkCardContainer",component:function(e){var t=e.onClick,n=Object(d.useRef)(!1);return Object(x.g)(se.c,o()({processResponse:fe,getUrl:function(e){return"https://www.zhihu.com/api/v4/market/km_sku_card/".concat(e)},fetcherOptions:{credentials:"same-origin"},onClick:function(e){D.a.trackEvent(e.target,{id:7204,action:"OpenUrl"}),t&&t(e)},disableZa:!0,ref:function(t){t&&!t.classList.contains("MCNLinkCard-placeholder")&&!1===n.current&&(D.a.setModule(t,{module:"Content"},{card:{content:{id:e.id}}}),Object(de.onViewedOnce)(t,(function(){D.a.trackCardShow(t,{id:7203})})),n.current=!0)},zaBlock:"ZTextMkSKuLinkCard"},e))}}),he=n(73),be=n.n(he),me=n(897),ve=n(901),ge=be()((function(){return/Mobile/.test(navigator.userAgent)}));function ye(e,t){var n={monitor:{type:"Event",imgResourceErrorInfo:{error_description:t,img_url:e,img_from:"web"}}};D.a.trackMonitor({name:t},n)}var Oe=function(e){var t=e.onLoadStateChange,n=e.enableWebP,r=e.size,a=e.quality;return function(e){var c=e.target,o=function(e){var t=e.image,n=e.enableWebP,r=e.size,a=e.quality,c=void 0===a?80:a,o=t.dataset,i=o.actualsrc,l=o.actualgif;return n&&l&&l.match(/.gif$/i)?i:(r||(r="720w",!ge()&&window.devicePixelRatio>=1.5&&(r="1440w"),ge()&&window.devicePixelRatio*window.innerWidth>=1080&&(r="1440w")),Object(X.imgUrl)(i,{quality:c,size:r}))}({image:c,enableWebP:n,size:r,quality:a});if(n&&(o=function(e){return e.replace(/\.(jpg|png|jpeg|gif)/,".webp")}(o)),c.src=o,c.complete)c.dataset.lazyStatus="ok";else{t&&c.addEventListener("loadstart",(function(){t("loadstart",o)})),c.dataset.lazyStatus="loading";var i=setTimeout((function(){c.complete||ye(c.url,"image_web_timeout_image"),t&&t("timeout",o)}),15e3);c.addEventListener("load",(function(){c.dataset.lazyStatus="ok",clearTimeout(i),ye(c.url,"image_web_success_image"),t&&t("load",o)})),c.addEventListener("error",(function(){clearTimeout(i),ye(c.url,"image_web_fail_image"),t&&t("error",o)}))}}},je=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.useWebP,r=void 0===n||n,c=t.disabled,o=void 0!==c&&c,i=t.onLoadStateChange,l=t.size,s=t.quality,u=Object(d.useState)([]),f=a()(u,2),p=f[0],h=f[1],b=Object(ve.a)("lossless");Object(me.a)(p,Oe({onLoadStateChange:i,enableWebP:b&&r,size:l,quality:s}),{rootMargin:"300px"}),Object(d.useEffect)((function(){if(e&&!o){var t=Array.from(e.querySelectorAll("img.lazy:not([data-thumbnail])"));t.length&&h(t)}}),[e,o])},Ce=(n(565),function(e){var t=function(e){if(0!==e.intersectionRatio){var t=e.target;t.dataset.zaDetailViewId=t.cardShowViewId,D.a.trackCardShow(t,{},{link:{url:t.href}}),n.unobserve(t),t.clickViewId&&(t.dataset.zaDetailViewId=t.clickViewId)}},n=new IntersectionObserver((function(e){e.forEach(t)}),{threshold:[.1]});return[{cardShowViewId:1042,clickViewId:1043,selector:"a.external, a.internal"},{cardShowViewId:1044,clickViewId:1045,selector:"a.member_mention, a.UserLink-link"},{cardShowViewId:174,clickViewId:175,selector:"a.video-box"},{cardShowViewId:171,clickViewId:172,selector:'a[data-draft-type="link-card"]'},{cardShowViewId:7692,selector:"a.FileLinkCard .FileLinkCard-info"},{cardShowViewId:9744,selector:".Catalog"}].forEach((function(t){var r=t.selector,a=t.cardShowViewId,c=t.clickViewId;Array.from(e.querySelectorAll(r)).forEach((function(e){e.cardShowViewId=a,e.clickViewId=c,n.observe(e)}))})),function(){n.disconnect()}}),ke="function"==typeof queueMicrotask?queueMicrotask:function(e){return Promise.resolve().then(e)},we=function(e){var t=Object(d.useRef)(null);Object(d.useEffect)((function(){if(e)return ke((function(){e&&(t.current=Ce(e))})),function(){t.current&&t.current()}}),[e])},Se=n(230),xe=n(61),Ne=[{selector:"a.external, a.internal",zaBlock:"ZTextLink"},{selector:"a.member_mention, a.UserLink-link",zaBlock:"ZTextMention"},{selector:"a.video-box",zaBlock:"ZTextVideoCard"},{selector:'a[data-draft-type="link-card"]',zaBlock:"ZTextLinkCard"},{selector:"a.FileLinkCard",zaBlock:"ZTextFileLinkCard"}],Re=function(e){var t=e.element,n=e.config,r={elementLocation:{type:"Button"},block:n.zaBlock},a={action:"OpenUrl",elementLocation:{type:"Button"},block:n.zaBlock,eventType:"Click"},c={link:{url:t.href}},o=Object(W.i)().trackEvent,i=Object(W.h)(r,c),l=Object(xe.c)((function(e){o(a,c),"ZTextLinkCard"===n.zaBlock&&t.dataset.isEcommerce&&e.preventDefault()}));return Object(d.useEffect)((function(){return t.addEventListener("click",l),function(){t.removeEventListener("click",l)}}),[]),Object(d.useEffect)((function(){return i(t),function(){return i(null)}}),[]),null},Ee=function(e){var t=Object(d.useState)([]),n=a()(t,2),r=n[0],c=n[1];return Object(d.useEffect)((function(){if(e){var t=[];Ne.forEach((function(n){var r=n.selector;Array.from(e.querySelectorAll(r)).forEach((function(e){t.push({el:e,config:n})}))})),c(t)}}),[e]),Object(x.g)(f.a.Fragment,null,r.map((function(e,t){var n=e.el,r=e.config;return Object(x.g)(Re,{key:t,element:n,config:r})})))},Te=(n(955),n(570),v()([L,Object(A.a)(),R,I,_.a])),Ie=function(e){var t=e.tag,n=void 0===t?"div":t,r=e.className,c=e.html,i=e.onRef,s=e.zvideoLinkCardProps,u=void 0===s?{}:s,p=e.articleLinkCardProps,m=void 0===p?{}:p,v=e.adLinkCardProps,g=void 0===v?{}:v,y=e.mcnLinkCardProps,O=void 0===y?{}:y,j=e.mkSkuLinkCardProps,k=void 0===j?{}:j,w=e.clearBoth,S=void 0!==w&&w,N=e.referenceLinkProps,R=void 0===N?{}:N,E=e.lazyLoadImageProps,T=e.shouldUseArticleCard,I=void 0!==T&&T,P=e.sourceId,L=e.shouldShowCatalog,A=e.richContentKey,_=l()(e,["tag","className","html","onRef","zvideoLinkCardProps","articleLinkCardProps","adLinkCardProps","mcnLinkCardProps","mkSkuLinkCardProps","clearBoth","referenceLinkProps","lazyLoadImageProps","shouldUseArticleCard","sourceId","shouldShowCatalog","richContentKey"]),D=Object(d.useState)(null),V=a()(D,2),F=V[0],H=V[1],U=Object(b.f)();return M(F),Object(z.a)(F,R),B(F),we(F),je(F,E),Object(x.g)(f.a.Fragment,null,Ee(F),q(F,u),I&&Object(x.g)(C,null,[ie,F,m]),le(F,g),ue(F,O),pe(F,k),Object(x.g)(n,o()({key:A||c,ref:Object(d.useCallback)(Object(Se.a)(H,i),[]),className:h()("RichText","ztext",r,{"RichText--clearBoth":S}),dangerouslySetInnerHTML:{__html:Te(c,{sourceId:P,theme:U,shouldShowCatalog:L})}},_)))};Ie.propTypes={tag:u.a.string,html:u.a.string.isRequired,clearBoth:u.a.bool,onRef:u.a.oneOfType([u.a.func,u.a.object])};var Pe=f.a.memo(Ie)},980:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(14),a=n(15),c=n(16),o=n(17),i=n(8),l=n(1),s=n(3),u=n.n(s),d=n(2),f=n(138),p=n(225);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var b=function(e){Object(c.a)(n,e);var t=h(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={stickyOffset:e.props.offset},e.check=function(){var t;if(null===(t=e.el)||void 0===t?void 0:t.children){var n=e.props.offset,r=n,a=Array.from(e.el.children).map((function(e){var t=window.getComputedStyle(e);return e.offsetHeight+parseInt(t.marginBottom,10)+parseInt(t.marginTop,10)})),c=e.el&&e.el.clientHeight,o=document.documentElement.clientHeight-n;if(e.sticky&&e.sticky.updateHeight(),c>o){var i=c;a.every((function(e){return!(i<o)&&(i-=e,!0)})),r=n-c+i}e.state.stickyOffset!==r&&e.setState({stickyOffset:r})}},e}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.resizeHandler=Object(f.subscribe)("resize",this.check),this.timeout=setTimeout(this.check)}},{key:"componentWillUnmount",value:function(){this.resizeHandler.unsubscribe(),clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.className,a=t.onRef;return Object(l.b)("div",{className:r,ref:a,children:Object(l.b)(p.a,{offset:this.state.stickyOffset,ref:function(t){e.sticky=t},children:Object(l.b)("div",{ref:function(t){e.el=t},children:n})})})}}]),n}(d.Component);b.propTypes={offset:u.a.number,onRef:u.a.func,className:u.a.string},b.defaultProps={offset:0,onRef:function(){},className:""}},982:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return d}));var r=n(0),a=n(7),c=n(11),o=n(6),i=Object(o.a)("club",["GET","JOIN","LEAVE","UPDATE","REQUEST_JOIN"]),l=function(e){return{API:{types:i.GET,method:"GET",endpoint:"clubs/".concat(e),fetchOptions:{credentials:"include"}},schema:c.a.CLUB,meta:{id:e}}},s=function(e){return function(t){return t({API:{types:i.JOIN,method:"POST",endpoint:"clubs/".concat(e,"/join"),fetchOptions:{credentials:"include"}},meta:{id:e}}).then((function(){return t(l(e))}))}},u=function(e,t){return function(n){return n({API:{types:i.REQUEST_JOIN,method:"POST",endpoint:"clubs/".concat(e,"/join_requests"),fetchOptions:{zsEncrypt:!0},body:Object(a.decamelizeKeys)({requestDetail:t})}}).then((function(){return n(l(e))}))}},d=function(e){return function(t,n){var a=n().entities.clubs[e],c=a.joinCount,o=a.isJoined,s=a.loginMask;return t({API:{types:i.LEAVE,method:"DELETE",endpoint:"clubs/".concat(e,"/join"),fetchOptions:{credentials:"include"}},UPDATE:{request:{clubs:Object(r.a)({},e,Object.assign({isJoined:!1},c&&{joinCount:c-1}))},failure:{clubs:Object(r.a)({},e,Object.assign({isJoined:o,loginMask:s},c&&{joinCount:c}))}},meta:{id:e}}).then((function(){return t(l(e))}))}}},987:function(e,t,n){"use strict";var r=n(31),a=n(14),c=n(15),o=n(16),i=n(17),l=n(8),s=n(1),u=n(3),d=n.n(u),f=n(2),p=n(19),h=n(25),b=n(10),m=n.n(b),v=n(167),g=n(29),y=n(900),O=n(943),j=n(361),C=n(28),k=n(119),w=n(24),S=n(146);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var N=function(e){Object(o.a)(n,e);var t=x(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).load=function(){var t=e.props,n=t.dispatch,r=t.id;n(Object(S.A)(r))},e.track=function(){var t=e.props.topic;e.hoverCardElement&&t&&(C.a.setModule(e.hoverCardElement,{module:"TopicItem"},{card:{content:{type:"Topic",token:t.id,item_num:t.questionsCount,follower_num:t.followersCount}}}),C.a.trackCardShow(e.hoverCardElement))},e.handleFollow=e.context.authRequired((function(){var t=!e.props.topic.isFollowing;C.a.trackEvent(e.hoverCardElement,{action:t?"Follow":"UnFollow",element:"Button"});var n=e.props,r=n.dispatch,a=n.id;r(Object(S.M)(a))}),w.U.follow),e.handleOpen=function(){e.load(),e.track()},e}return Object(c.a)(n,[{key:"isTopicReady",value:function(){var e=this.props.topic||{},t=e.questionsCount,n=e.followersCount,r=e.bestAnswersCount;return!(void 0===t&&void 0===n&&void 0===r)}},{key:"render",value:function(){var e=this,t=this.props,n=t.toggler,a=t.topic,c=t.id,o=t.isLoading,i=t.onRef,l=Object(r.a)(t,["toggler","topic","id","isLoading","onRef"]),u=a||{},d=u.name,f=u.introduction,p=u.questionsCount,h=u.followersCount,b=u.bestAnswersCount,m=u.avatarUrl,v=u.isFollowing,C=u.headerCard,w="//www.zhihu.com/topic/".concat(c),S=C&&C.avatarUrl||m;return Object(s.c)(O.b,Object.assign({toggler:n,preventCloseOnTarget:!0,isLoading:o,onOpen:this.handleOpen,size:"large"},l,{onRef:function(t){i&&"function"==typeof i&&i(t),e.hoverCardElement=t},children:[Object(s.b)(O.a,{title:Object(s.b)("a",{target:"_blank",rel:"noopener noreferrer",href:w,children:d}),avatarUrl:S,avatarFit:"cover"}),f&&Object(s.b)("div",{children:Object(s.b)(j.a,{className:"HoverCard-description",html:f})}),Object(s.c)("div",{children:[this.isTopicReady()&&Object(s.c)(y.a,{children:[Object(s.b)(y.a.Item,{tag:k.a,preset:"plain",a:!0,to:"".concat(w,"/questions"),name:"问题",value:p,target:"_blank"}),Object(s.b)(y.a.Item,{tag:k.a,preset:"plain",a:!0,to:"".concat(w,"/top-answers"),name:"精华",value:b,target:"_blank"}),Object(s.b)(y.a.Item,{tag:k.a,preset:"plain",a:!0,to:"".concat(w,"/followers"),name:"关注者",target:"_blank",value:h})]}),Object(s.b)("div",{className:"HoverCard-buttons",children:a&&Object(s.b)(g.c,{preset:"primary",color:v?"grey":"blue",onClick:this.handleFollow,children:v?"已关注":"关注话题"})})]})]}))}}]),n}(f.Component);N.contextTypes={authRequired:d.a.func};var R=Object(h.connect)((function(e,t){var n=t.id,r=e.entities.topics,a=e.loading.local;return{topic:r[n],isLoading:Boolean(a["topic/".concat(n)])}}))(N),E=n(60);function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var I=function(e){Object(o.a)(n,e);var t=T(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.isMobile,a=t.topic,c=a.name,o=a.avatarUrl,i=a.id,l=a.headerCard,u=t.avatar,d=t.avatarProps,f=t.noHoverCard,p=t.noLink,h=t.style,b=t.className,g=t.children,y=(t.dispatch,t.trackEvent,Object(r.a)(t,["isMobile","topic","avatar","avatarProps","noHoverCard","noLink","style","className","children","dispatch","trackEvent"])),O=void 0===f?n:f,j=l&&l.avatarUrl||o;e=u?Object(s.b)(v.a,Object.assign({className:"TopicLink-avatar",url:j,alt:c},d)):g||c,p||O||(e=Object(s.b)(R,{toggler:e,id:i}));var C=p?"span":"a";return Object(s.b)(C,Object.assign({style:h,className:m()("TopicLink",b),href:"//www.zhihu.com/topic/".concat(i),target:"_blank"},y,{children:e}))}}]),n}(f.Component);I.propTypes={topic:d.a.object.isRequired,user:d.a.object,avatar:d.a.bool,avatarProps:d.a.object,noHoverCard:d.a.bool,noLink:d.a.bool,style:d.a.object,className:d.a.string,children:d.a.node},I.defaultProps={avatar:!1,noLink:!1};t.a=Object(p.compose)(Object(h.connect)((function(e){return{isMobile:Object(E.d)(e,{includeTablet:!0})}})))(I)},988:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1),a=n(34),c=n(61),o=["answer","question","article","pin","zvideo","club_post"];var i=Object(a.withRouter)((function(e){var t=e.parent.type,a=o.includes(t),i=Object(c.d)((function(){return n.e(16).then(n.bind(null,2426))}),!a),l=Object(c.d)((function(){return n.e(16).then(n.bind(null,2422))}),a),s=a?l:i;return s?Object(r.b)(s,Object.assign({},e)):null}))}}]);
//# sourceMappingURL=main.search-routes.6dc06a4036b5853b2fd8.js.map